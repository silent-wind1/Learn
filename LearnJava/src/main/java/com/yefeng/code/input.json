æœ¬èŠ‚é‡ç‚¹
----

å­¦ä¹  AI æ™ºèƒ½ä½“çš„æ¦‚ï»¿å¿µå’Œæ„å»ºæ–¹æ³•ï¼ŒæŒæ¡å¦‚ä½•å®ç°å…·æœ‰è‡ªä¸»å†³ç­–èƒ½åŠ›çš„â€‹ AI ç³»ç»Ÿã€‚é€šè¿‡ CoT æ€ç»´é“¾ã€ReAcâ€t æ¨¡å¼ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œæ·±å…¥ç†è§£æ™ºèƒ½ä½“çš„å·¥ä½œåŸç†ï»¿ï¼Œå¹¶å‚è€ƒ OpenManus å¼€æºæ¡†æ¶å®æˆ˜å¼€â€å‘èƒ½å¤Ÿè‡ªä¸»è§„åˆ’æ‰§è¡Œä»»åŠ¡çš„ AI æ™ºèƒ½ä½“ã€‚

å…·ä½“å†…å®¹åŒ…æ‹¬ï¼š

*   AI æ™ºèƒ½ä½“æ¦‚å¿µä¸ç‰¹ç‚¹

*   æ™ºèƒ½ä½“å®ç°å…³é”®æŠ€æœ¯

*   ä½¿ç”¨ AI æ™ºèƒ½ä½“çš„å¤šç§æ–¹å¼

*   OpenManus å®ç°åŸç†

*   è‡ªä¸»å®ç° Manus æ™ºèƒ½ä½“

*   æ™ºèƒ½ä½“å·¥ä½œæµç¼–æ’

*   A2A åè®®


ä¸€ã€ä»€ä¹ˆæ˜¯æ™ºèƒ½ä½“ï¼Ÿ
---------

æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæ„ŸçŸ¥ç¯å¢ƒã€è¿›è¡Œæ¨ç†ã€åˆ¶å®šè®¡åˆ’ã€åšå‡ºå†³ç­–å¹¶è‡ªä¸»é‡‡å–è¡ŒåŠ¨ä»¥å®ç°ç‰¹å®šç›®æ ‡çš„ AI ç³»ç»Ÿã€‚å®ƒä»¥å¤§è¯­è¨€æ¨¡å‹ä¸ºæ ¸å¿ƒï¼Œé›†æˆ **è®°å¿†ã€çŸ¥è¯†åº“å’Œå·¥å…·** ç­‰èƒ½åŠ›ä¸ºä¸€ä½“ï¼Œæ„é€ äº†å®Œæ•´çš„å†³ç­–èƒ½åŠ›ã€æ‰§è¡Œèƒ½åŠ›å’Œè®°å¿†èƒ½åŠ›ï¼Œå°±åƒä¸€ä¸ªæœ‰ä¸»è§‚èƒ½åŠ¨æ€§çš„äººç±»ä¸€æ ·ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/2lxYItZML09s2igb.webp" alt="" width="566px" />


ä¸æ™®é€šçš„ AI å¤§æ¨¡å‹ä¸åŒï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿï¼š

1.  æ„ŸçŸ¥ç¯å¢ƒï¼šé€šè¿‡å„ç§è¾“å…¥æ¸ é“è·å–ä¿¡æ¯ï¼ˆå¤šæ¨¡æ€ï¼‰ï¼Œç†è§£ç”¨æˆ·éœ€æ±‚å’Œç¯å¢ƒçŠ¶æ€

2.  è‡ªä¸»è§„åˆ’ä»»åŠ¡æ­¥éª¤ï¼šå°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å­ä»»åŠ¡ï¼Œå¹¶è®¾è®¡æ‰§è¡Œé¡ºåº

3.  ä¸»åŠ¨è°ƒç”¨å·¥å…·å®Œæˆä»»åŠ¡ï¼šæ ¹æ®éœ€è¦é€‰æ‹©å¹¶ä½¿ç”¨å„ç§å¤–éƒ¨å·¥å…·å’Œ APIï¼Œæ‰©å±•è‡ªèº«èƒ½åŠ›è¾¹ç•Œ

4.  è¿›è¡Œå¤šæ­¥æ¨ç†ï¼šé€šè¿‡æ€ç»´é“¾ï¼ˆChain of Thoughtï¼‰é€æ­¥åˆ†æé—®é¢˜å¹¶æ¨å¯¼è§£å†³æ–¹æ¡ˆ

5.  æŒç»­å­¦ä¹ å’Œè®°å¿†è¿‡å»çš„äº¤äº’ï¼šä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ï¼Œåˆ©ç”¨å†å²äº¤äº’æ”¹è¿›å†³ç­–

6.  æ ¹æ®ç¯å¢ƒåé¦ˆè°ƒæ•´è¡Œä¸ºï¼šæ ¹æ®æ‰§è¡Œç»“æœåŠ¨æ€è°ƒæ•´ç­–ç•¥ï¼Œå®ç°é—­ç¯ä¼˜åŒ–


å¤§å¤šæ•°åŒå­¦ï»¿ç¬¬ä¸€æ¬¡æ„Ÿå—åˆ°æ™ºèƒ½ä½“â€‹åº”è¯¥æ˜¯ â€œæ·±åº¦æ€è€ƒâ€â€ åŠŸèƒ½ï¼Œè¿™æ˜¯ Aï»¿I é€æ­¥æ™ºèƒ½åŒ–çš„ä½“â€ç°ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/6iiHrTsygYzTs18M.webp" alt="" width="100%" />



AI ä¼šåƒäººç±»ä¸€æ ·å…ˆæ€è€ƒåå›ç­”ï¼Œè®©ç­”æ¡ˆæ›´å‡†ç¡®ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/rfG1nm0l2Icg4wgO.webp" alt="" width="100%" />


### æ™ºèƒ½ä½“çš„åˆ†ç±»

è·Ÿäººçš„ç”Ÿé•¿ï»¿é˜¶æ®µä¸€æ ·ï¼Œæ™ºèƒ½ä½“ä¹Ÿâ€‹æ˜¯å¯ä»¥ä¸æ–­è¿›åŒ–çš„ã€‚â€æŒ‰ç…§è‡ªä¸»æ€§å’Œè§„åˆ’èƒ½ï»¿åŠ›ï¼Œæ™ºèƒ½ä½“å¯ä»¥åˆ†ä¸ºâ€å‡ ä¸ªå±‚æ¬¡ï¼š

1ï¼‰ååº”å¼æ™ºèƒ½ï»¿ä½“ï¼šä»…æ ¹æ®å½“å‰è¾“å…¥å’Œå›ºå®šè§„åˆ™â€‹åšå‡ºååº”ï¼Œç±»ä¼¼ç®€å•çš„èŠå¤©æœºå™¨â€äººï¼Œæ²¡æœ‰çœŸæ­£çš„è§„åˆ’èƒ½åŠ›ã€‚23ï»¿ å¹´æ—¶çš„å¤§å¤šæ•° AI èŠå¤©æœºâ€å™¨äººåº”ç”¨ï¼Œå‡ ä¹éƒ½æ˜¯ååº”å¼æ™ºèƒ½ä½“ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/YedTUYLHJAUmZfCY.webp" alt="" width="100%" />





2ï¼‰æœ‰é™è§„åˆ’æ™ºèƒ½ä½“ï¼šèƒ½è¿›è¡Œç®€å•åœ°å¤šæ­¥éª¤æ‰§è¡Œï¼Œä½†æ‰§è¡Œè·¯å¾„é€šå¸¸æ˜¯é¢„è®¾çš„æˆ–æœ‰ä¸¥æ ¼é™åˆ¶çš„ã€‚é‰´å®šä¸º â€œèƒ½å¹²äº‹ã€ä½†å¹²ä¸äº†å¤æ‚çš„å¤§äº‹â€ã€‚24 å¹´æµè¡Œçš„å¾ˆå¤šå¯è”ç½‘æœç´¢å†…å®¹ã€è°ƒç”¨çŸ¥è¯†åº“å’Œå·¥å…·çš„ AI åº”ç”¨ï¼Œéƒ½å±äºè¿™ç±»æ™ºèƒ½ä½“ã€‚æ¯”å¦‚ ChatGPT + Pluginsï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/FpaTTBb5urP0pT8z.webp" alt="" width="100%" />


3ï¼‰è‡ªä¸»è§„åˆ’æ™ºèƒ½ä½“ï»¿ï¼šä¹Ÿå«ç›®æ ‡å¯¼å‘æ™ºèƒ½ä½“ï¼Œèƒ½å¤Ÿæ ¹æ®ä»»åŠ¡â€‹ç›®æ ‡è‡ªä¸»åˆ†è§£ä»»åŠ¡ã€åˆ¶å®šè®¡åˆ’ã€é€‰æ‹©å·¥â€å…·å¹¶ä¸€æ­¥æ­¥æ‰§è¡Œï¼Œç›´åˆ°å®Œæˆä»»åŠ¡ã€‚â€‚â€‚ï»¿â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‰â€

æ¯”å¦‚ 25 å¹´åˆå¾ˆç«çš„ Mï»¿anus é¡¹ç›®ï¼Œå®ƒçš„æ ¸å¿ƒäº®ç‚¹åœ¨äºå…¶ â€œè‡ªä¸»æ‰§è¡Œâ€ èƒ½â€‹åŠ›ã€‚æ®å®˜æ–¹ä»‹ç»ï¼ŒManus èƒ½å¤Ÿåœ¨è™šæ‹Ÿæœºä¸­è°ƒç”¨å„â€ç§å·¥å…·ï¼ˆå¦‚ç¼–å†™ä»£ç ã€çˆ¬å–æ•°æ®ï¼‰å®Œæˆä»»åŠ¡ã€‚å…¶åº”ç”¨åœºæ™¯ï»¿è¦†ç›–æ—…è¡Œè§„åˆ’ã€è‚¡ç¥¨åˆ†æã€æ•™è‚²å†…å®¹ç”Ÿæˆç­‰ 40 ä½™ä¸ªâ€é¢†åŸŸï¼Œæ‰€ä»¥åœ¨å½“æ—¶ç»™äº†å¾ˆå¤šäººéœ‡æ’¼æ„Ÿã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/Dd2lPC7JMKUm3wn8.webp" alt="" width="100%" />


ä½†å…¶å®æ—©åœ¨è¿™ä¹‹å‰ï¼Œå°±æœ‰ç±»ä¼¼çš„é¡¹ç›®äº†ï¼Œæ¯”å¦‚ AutoGPTï¼Œæ‰€ä»¥ Manus å¤§ç«çš„åŒæ—¶ä¹Ÿè¢«äººè¯Ÿç—… â€œä¼šè¥é”€è€Œå·²â€ã€‚ç”šè‡³æ²¡éš”å¤šä¹…å°±æœ‰å°å›¢é˜Ÿå¼€æºäº† Manus çš„å¤åˆ»ç‰ˆ â€”â€” [OpenManus](https://github.com/FoundationAgents/OpenManus)ï¼Œè¿™ç±»æ™ºèƒ½ä½“é€šè¿‡ â€œæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿâ€ çš„å¾ªç¯æ¨¡å¼å·¥ä½œï¼Œèƒ½å¤ŸæŒç»­æ¨è¿›ä»»åŠ¡ç›´è‡³å®Œæˆç›®æ ‡ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/0rAwfy7x9i5Ljk3q.webp" alt="" width="100%" />


éœ€è¦æ³¨æ„ï¼Œè‡ªä¸»ï»¿è§„åˆ’èƒ½åŠ›æ˜¯æ™ºèƒ½ä½“å‘å±•çš„é‡è¦â€‹æ–¹å‘ï¼Œä½†å¹¶éæ‰€æœ‰åº”ç”¨åœºæ™¯éƒ½â€éœ€è¦å®Œå…¨çš„è‡ªä¸»è§„åˆ’èƒ½åŠ›ã€‚åœ¨ï»¿æŸäº›åœºæ™¯ä¸­ï¼Œé™åˆ¶æ™ºèƒ½ä½“çš„è‡ªâ€ä¸»æ€§åè€Œèƒ½æé«˜æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚

äºŒã€æ™ºèƒ½ä½“å®ç°å…³é”®æŠ€æœ¯
-----------

åœ¨è‡ªä¸»å¼€å‘ï»¿æ™ºèƒ½ä½“å‰ï¼Œæˆ‘ä»¬è¦å…ˆâ€‹äº†è§£ä¸€ä¸‹æ™ºèƒ½ä½“çš„å…³â€é”®å®ç°æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯ï»¿æ–¹æ¡ˆè®¾è®¡é˜¶æ®µåšçš„äº‹â€æƒ…ã€‚

### CoT æ€ç»´é“¾

CoTï¼ˆChain ofï»¿ Thoughtï¼‰æ€ç»´é“¾æ˜¯ä¸€ç§è®© AI åƒäººç±»ä¸€â€‹æ · â€œæ€è€ƒâ€ çš„æŠ€æœ¯ï¼Œå¸®åŠ© AI åœ¨å¤„ç†å¤æ‚é—®é¢˜â€æ—¶èƒ½å¤ŸæŒ‰æ­¥éª¤æ€è€ƒã€‚å¯¹äºå¤æ‚çš„æ¨ç†ç±»é—®é¢˜ï¼Œå…ˆæ€è€ƒåï»¿æ‰§è¡Œï¼Œæ•ˆæœå¾€å¾€æ›´å¥½ã€‚è€Œä¸”è¿˜å¯ä»¥è®©æ¨¡å‹åœ¨ç”Ÿæˆç­”æ¡ˆæ—¶â€å±•ç¤ºæ¨ç†è¿‡ç¨‹ï¼Œä¾¿äºæˆ‘ä»¬ç†è§£å’Œä¼˜åŒ– AIã€‚

CoT çš„å®ç°æ–¹å¼å…¶å®å¾ˆç®€å•ï»¿ï¼Œå¯ä»¥åœ¨è¾“å…¥ Prompt æ—¶ï¼Œç»™æ¨¡å‹æä¾›é¢å¤–çš„æç¤ºæˆ–â€‹å¼•å¯¼ï¼Œæ¯”å¦‚ â€œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ€è€ƒè¿™ä¸ªé—®é¢˜â€ï¼Œè®©æ¨¡å‹ä»¥é€â€æ­¥æ¨ç†çš„æ–¹å¼ç”Ÿæˆå›ç­”ã€‚è¿˜å¯ä»¥è¿ç”¨ Prompt çš„ä¼˜åŒ–ï»¿æŠ€å·§ few shotï¼Œç»™æ¨¡å‹æä¾›åŒ…å«æ€ç»´é“¾çš„ç¤ºä¾‹é—®é¢˜â€å’Œç­”æ¡ˆï¼Œè®©æ¨¡å‹å­¦ä¹ å¦‚ä½•æ„å»ºè‡ªå·±çš„æ€ç»´é“¾ã€‚

åœ¨ Opeï»¿nManus æ—©æœŸâ€‹ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å®â€ç° CoT çš„ç³»ç»Ÿï»¿æç¤ºè¯ï¼š

```plain
You are an assistant focused on Chain of Thought reasoning. For each question, please follow these steps:

1. Break down the problem: Divide complex problems into smaller, more manageable parts
2. Think step by step: Think through each part in detail, showing your reasoning process
3. Synthesize conclusions: Integrate the thinking from each part into a complete solution
4. Provide an answer: Give a final concise answer

Your response should follow this format:
Thinking: [Detailed thought process, including problem decomposition, reasoning for each step, and analysis]
Answer: [Final answer based on the thought process, clear and concise]

Remember, the thinking process is more important than the final answer, as it demonstrates how you reached your conclusion.
```

æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/OwfJBsuhxeS0lpGn.webp" alt="" width="100%" />

### Agent Loop æ‰§è¡Œå¾ªç¯

Agentï»¿ Loop æ˜¯æ™ºèƒ½ä½“â€‹æœ€æ ¸å¿ƒçš„å·¥ä½œæœºåˆ¶ï¼ŒæŒ‡â€æ™ºèƒ½ä½“åœ¨æ²¡æœ‰ç”¨æˆ·è¾“å…¥ï»¿çš„æƒ…å†µä¸‹ï¼Œè‡ªä¸»é‡å¤æ‰§â€è¡Œæ¨ç†å’Œå·¥å…·è°ƒç”¨çš„è¿‡ç¨‹ã€‚

åœ¨ä¼ ç»Ÿçš„èŠå¤©æ¨¡å‹ä¸­ï¼Œï»¿æ¯æ¬¡ç”¨æˆ·æé—®åï¼ŒAI å›å¤ä¸€æ¬¡å°±ç»“æŸâ€‹äº†ã€‚ä½†åœ¨æ™ºèƒ½ä½“ä¸­ï¼ŒAI å›å¤åå¯èƒ½ä¼šç»§ç»­è‡ªä¸»â€æ‰§è¡Œåç»­åŠ¨ä½œï¼ˆå¦‚è°ƒç”¨å·¥å…·ã€å¤„ç†ç»“æœã€ç»§ç»­ï»¿æ¨ç†ï¼‰ï¼Œå½¢æˆä¸€ä¸ªè‡ªä¸»æ‰§è¡Œçš„å¾ªç¯ï¼Œç›´åˆ°ä»»åŠ¡â€å®Œæˆï¼ˆæˆ–è€…è¶…å‡ºé¢„è®¾çš„æœ€å¤§æ­¥éª¤æ•°ï¼‰ã€‚

Agent Loop çš„å®ç°å¾ˆç®€å•ï¼Œå‚è€ƒä»£ç å¦‚ä¸‹ï¼š

```java
public String execute() {
List<String> results = new ArrayList<>();
while (currentStep < MAX_STEPS && !isFinished) {
currentStep++;
// è¿™é‡Œå®ç°å…·ä½“çš„æ­¥éª¤é€»è¾‘
String stepResult = executeStep();
results.add("æ­¥éª¤ " + currentStep + ": " + stepResult);
}
if (currentStep >= MAX_STEPS) {
results.add("è¾¾åˆ°æœ€å¤§æ­¥éª¤æ•°: " + MAX_STEPS);
}
return String.join("\n", results);
}
```

### ReAct æ¨¡å¼

ReActï¼ˆReasoning + Actingï¼‰æ˜¯ä¸€ç§ç»“åˆæ¨ç†å’Œè¡ŒåŠ¨çš„æ™ºèƒ½ä½“æ¶æ„ï¼Œå®ƒæ¨¡ä»¿äººç±»è§£å†³é—®é¢˜æ—¶ â€æ€è€ƒ - è¡ŒåŠ¨ - è§‚å¯Ÿâ€ çš„å¾ªç¯ï¼Œç›®çš„æ˜¯é€šè¿‡äº¤äº’å¼å†³ç­–è§£å†³å¤æ‚ä»»åŠ¡ï¼Œæ˜¯ç›®å‰æœ€å¸¸ç”¨çš„æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼ä¹‹ä¸€ã€‚

æ ¸å¿ƒæ€æƒ³ï¼š

1.  æ¨ç†ï¼ˆReasonï¼‰ï¼šå°†åŸå§‹é—®é¢˜æ‹†åˆ†ä¸ºå¤šæ­¥éª¤ä»»åŠ¡ï¼Œæ˜ç¡®å½“å‰è¦æ‰§è¡Œçš„æ­¥éª¤ï¼Œæ¯”å¦‚ â€œç¬¬ä¸€æ­¥éœ€è¦æ‰“å¼€ç¼–ç¨‹å¯¼èˆªç½‘ç«™â€ã€‚

2.  è¡ŒåŠ¨ï¼ˆActï¼‰ï¼šè°ƒç”¨å¤–éƒ¨å·¥å…·æ‰§è¡ŒåŠ¨ä½œï¼Œæ¯”å¦‚è°ƒç”¨æœç´¢å¼•æ“ã€æ‰“å¼€æµè§ˆå™¨è®¿é—®ç½‘é¡µç­‰ã€‚

3.  è§‚å¯Ÿï¼ˆObserveï¼‰ï¼šè·å–å·¥å…·è¿”å›çš„ç»“æœï¼Œåé¦ˆç»™æ™ºèƒ½ä½“è¿›è¡Œä¸‹ä¸€æ­¥å†³ç­–ã€‚æ¯”å¦‚å°†æ‰“å¼€çš„ç½‘é¡µä»£ç è¾“å…¥ç»™ AIã€‚

4.  å¾ªç¯è¿­ä»£ï¼šä¸æ–­é‡å¤ä¸Šè¿° 3 ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆæˆ–è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ã€‚


ReAct æµç¨‹å¦‚å›¾ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/O3HENqP1oTHADdfh.webp" alt="" width="100%" />


ç¤ºä¾‹å®ç°ä»£ç ï¼š

```java
void executeReAct(String task) {
String state = "å¼€å§‹";

while (!state.equals("å®Œæˆ")) {
// 1. æ¨ç† (Reason)
String thought = "æ€è€ƒä¸‹ä¸€æ­¥è¡ŒåŠ¨";
System.out.println("æ¨ç†: " + thought);

// 2. è¡ŒåŠ¨ (Act)
String action = "æ‰§è¡Œå…·ä½“æ“ä½œ";
System.out.println("è¡ŒåŠ¨: " + action);

// 3. è§‚å¯Ÿ (Observe)
String observation = "è§‚å¯Ÿæ‰§è¡Œç»“æœ";
System.out.println("è§‚å¯Ÿ: " + observation);

// æ›´æ–°çŠ¶æ€
state = "å®Œæˆ";
}
}
```

### æ‰€éœ€æ”¯æŒç³»ç»Ÿ

é™¤äº†åŸºæœ¬çš„å·¥ä½œæœºåˆ¶å¤–ï¼Œæ™ºèƒ½ä½“çš„å®ç°è¿˜ä¾èµ–äºå¾ˆå¤šæ”¯æŒç³»ç»Ÿã€‚

1ï¼‰é¦–å…ˆæ˜¯ ï»¿AI å¤§æ¨¡å‹ï¼Œè¿™ä¸ªå°±ä¸â€‹å¤šè¯´äº†ï¼Œå¤§æ¨¡å‹æä¾›äº†æ€â€è€ƒã€æ¨ç†å’Œå†³ç­–çš„æ ¸å¿ƒèƒ½ï»¿åŠ›ï¼Œè¶Šå¼ºçš„ AI å¤§æ¨¡â€å‹é€šå¸¸æ‰§è¡Œä»»åŠ¡çš„æ•ˆæœè¶Šå¥½ã€‚

2ï¼‰è®°å¿†ç³»ç»Ÿ

æ™ºèƒ½ä½“éœ€è¦è®°å¿†ç³»ç»Ÿï»¿æ¥å­˜å‚¨å¯¹è¯å†å²ã€ä¸­é—´ç»“æœå’Œæ‰§è¡ŒçŠ¶æ€ï¼Œâ€‹è¿™æ ·å®ƒæ‰èƒ½å¤Ÿè¿›è¡Œè¿ç»­å¯¹è¯å¹¶æ ¹æ®å†å²å¯¹â€è¯åˆ†ææ¥ä¸‹æ¥çš„å·¥ä½œæ­¥éª¤ã€‚ä¹‹å‰æˆ‘ä»¬å­¦ä¹ ï»¿è¿‡å¦‚ä½•ä½¿ç”¨ Spring AI çš„ â€ChatMemory å®ç°å¯¹è¯è®°å¿†ã€‚

3ï¼‰çŸ¥è¯†åº“

å°½ç®¡å¤§è¯­è¨€æ¨¡å‹æ‹¥æœ‰ï»¿ä¸°å¯Œçš„å‚æ•°çŸ¥è¯†ï¼Œä½†é’ˆå¯¹ç‰¹å®šé¢†åŸŸçš„ä¸“â€‹ä¸šçŸ¥è¯†å¾€å¾€éœ€è¦é¢å¤–çš„çŸ¥è¯†åº“æ”¯æŒã€‚ä¹‹â€å‰æˆ‘ä»¬å­¦ä¹ è¿‡ï¼Œé€šè¿‡ RAG æ£€ç´¢å¢ï»¿å¼ºç”Ÿæˆ + å‘é‡æ•°æ®åº“ç­‰æŠ€æœ¯ï¼Œæ™ºèƒ½â€ä½“å¯ä»¥æ£€ç´¢å¹¶åˆ©ç”¨ä¸“ä¸šçŸ¥è¯†å›ç­”é—®é¢˜ã€‚

4ï¼‰å·¥å…·è°ƒç”¨

å·¥å…·æ˜¯æ‰©å±•æ™ºèƒ½ä½“ï»¿èƒ½åŠ›è¾¹ç•Œçš„å…³é”®ï¼Œæ™ºèƒ½ä½“é€šè¿‡å·¥å…·è°ƒâ€‹ç”¨å¯ä»¥è®¿é—®æœç´¢å¼•æ“ã€æ•°æ®åº“ã€APâ€I æ¥å£ç­‰å¤–éƒ¨æœåŠ¡ï¼Œæå¤§åœ°å¢å¼ºäº†ï»¿å…¶è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ã€‚å½“ç„¶ï¼ŒMCâ€P ä¹Ÿå¯ä»¥ç®—æ˜¯å·¥å…·è°ƒç”¨çš„ä¸€ç§ã€‚

ğŸ’¡ è¿™é‡Œåˆ†äº«ä¸€ç§ç‰¹ï»¿æ®Šçš„å·¥å…·è°ƒç”¨ â€”â€” Compute Uâ€‹seï¼Œå®ƒå…è®¸æ™ºèƒ½ä½“ç›´æ¥ä¸è®¡ç®—ç¯å¢ƒäº¤äº’ï¼Œâ€æ¯”å¦‚æ‰§è¡Œä»£ç ã€æ“ä½œæ–‡ä»¶ç³»ç»Ÿç­‰ã€‚ç›®å‰ Cï»¿laude ç­‰å¹³å°å·²æä¾›æ­¤ç±»èƒ½åŠ›ï¼Œæ„Ÿå…´â€è¶£çš„åŒå­¦å¯ä»¥é˜…è¯»ä¸‹é¢çš„èµ„æ–™å­¦ä¹ ï¼š

*   Claude æ”¯æŒ Compute Useï¼š[https://docs.anthropic.com/en/docs/agents-and-tools/computer-use](https://docs.anthropic.com/en/docs/agents-and-tools/computer-use)

*   Compute Use å®ç°ç¤ºä¾‹ï¼š[https://github.com/anthropics/anthropic-quickstarts/tree/main/computer-use-demo](https://github.com/anthropics/anthropic-quickstarts/tree/main/computer-use-demo)

*   Compute Use å¼€æºå®ç°ï¼š[https://github.com/e2b-dev/open-computer-use](https://github.com/e2b-dev/open-computer-use)ã€[https://github.com/showlab/computer_use_ootb](https://github.com/showlab/computer_use_ootb)


ä½¿ç”¨ Comï»¿pute Use åŠŸèƒ½â€‹æ—¶éœ€è¦æ³¨æ„ï¼Œè¿™äº›æ“ä½œä¼šâ€åœ¨æˆ‘ä»¬è‡ªå·±çš„ç³»ç»Ÿä¸Šæ‰§è¡Œï»¿ï¼Œå»ºè®®åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œâ€ï¼Œé˜²æ­¢æ„å¤–æ“ä½œå½±å“å®é™…ç³»ç»Ÿã€‚

ç»¼åˆä¸Šé¢ 4 ç±»ï»¿æŠ€æœ¯ï¼Œå¹¶ä¸”ç»“åˆ CoTã€Agenâ€‹t Loopã€ReAct ç­‰æœºåˆ¶â€ï¼ˆå¯ä»¥æ€»ç§°ä¸º â€œè§„åˆ’æ‰§è¡Œæœºåˆ¶â€ï¼‰ï»¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„å»ºä¸€ä¸ªå®Œæ•´çš„ã€æœ‰è‡ªâ€ä¸»è§„åˆ’èƒ½åŠ›çš„æ™ºèƒ½ä½“ç³»ç»Ÿå•¦ã€‚

ä¸‰ã€ä½¿ç”¨ AI æ™ºèƒ½ä½“
-----------

æœ‰ 3 ç§ï»¿æ–¹å¼å¯ä»¥ä½¿ç”¨ AIâ€‹ æ™ºèƒ½ä½“ï¼Œä¹‹å‰çš„æ•™â€ç¨‹ä¸­å…¶å®æˆ‘ä»¬å·²ç»æœ‰ï»¿æ¥è§¦è¿‡ï¼Œè¿™é‡Œå†å¿«é€Ÿâ€å¤ä¹ ä¸€éã€‚

### 1ã€å¹³å°ä¸­ä½¿ç”¨

è®¸å¤š AIï»¿ å¤§æ¨¡å‹å¼€å‘å¹³å°å·²â€‹ç»æä¾›äº†æ™ºèƒ½ä½“åˆ›å»ºâ€å’Œä½¿ç”¨åŠŸèƒ½ï¼Œæœ€ç®€å•ï»¿çš„æ–¹å¼å°±æ˜¯ç›´æ¥åœ¨è¿™â€äº›å¹³å°ä¸Šåˆ›å»ºå’Œä½¿ç”¨æ™ºèƒ½ä½“ã€‚

æ¯”å¦‚å¯ä»¥åœ¨é˜¿é‡Œäº‘ç™¾ç‚¼ã€Dify ç­‰å¹³å°ä¸Šåˆ›å»ºæ™ºèƒ½ä½“ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/eVX2nDW1aUI74G2v.webp" alt="" width="100%" />


### 2ã€è½¯ä»¶ä¸­ä½¿ç”¨

AI å¼€å‘å·¥å…· Cï»¿ursor å°±é›†æˆäº† AI æ™ºèƒ½ä½“â€‹ï¼Œå¯ä»¥å¸®æˆ‘ä»¬ç”Ÿæˆå®Œæ•´çš„é¡¹ç›®ä»£ç ã€æˆ–â€è€…è§£é‡Šé¡¹ç›®ä»£ç ã€‚é€‰æ‹© Agent ï»¿æ¨¡å¼å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ï¼Œå»ºè®®åŒæ—¶å¼€å¯â€ Thinking æ·±åº¦æ€è€ƒï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/iHP7hQ1srk3SsZ6v.webp" alt="" width="100%" />


è¿è¡Œæ•ˆæœå¦‚å›¾ï¼Œå…¸å‹çš„ CoT + Agent Loop + ReAct æ¨¡å¼ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/xrBhm5QvH506DPSq.webp" alt="" width="100%" />


### 3ã€ç¨‹åºä¸­ä½¿ç”¨

ä¹‹å‰æœ‰è®²è§£è¿‡ï»¿ï¼Œå¦‚æœä½¿ç”¨ AI å¤§æ¨¡â€‹å‹å¼€å‘å¹³å°åˆ›å»ºäº†æ™ºèƒ½ä½“â€ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥é€šè¿‡ Sï»¿DK æˆ– API åœ¨è‡ªâ€å·±çš„ç¨‹åºä¸­è°ƒç”¨æ™ºèƒ½ä½“ã€‚

å½“ç„¶ä¹Ÿå¯ä»¥å®Œå…¨é€šï»¿è¿‡ç¼–ç¨‹è‡ªä¸»å¼€å‘æ™ºèƒ½ä½“ï¼Œä¹‹å‰æˆ‘ä»¬â€‹é€šè¿‡ Spring AI åˆ›å»ºâ€çš„æ‹çˆ±å¤§å¸ˆ APP å°±å·²ç»æ˜¯ä¸ªï»¿æ™ºèƒ½ä½“äº†ï¼ŒåŒ…å«äº†å¤§æ¨¡å‹å†³ç­–ã€è®°â€å¿†èƒ½åŠ›ã€çŸ¥è¯†åº“é›†æˆå’Œå·¥å…·è°ƒç”¨ã€‚

```java
ChatResponse response = chatClient
.prompt()
.user(message)
// è®°å¿†
.advisors(spec -> spec.param(CHAT_MEMORY_CONVERSATION_ID_KEY, chatId)
.param(CHAT_MEMORY_RETRIEVE_SIZE_KEY, 10))
// å¼€å¯æ—¥å¿—ï¼Œä¾¿äºè§‚å¯Ÿæ•ˆæœ
.advisors(new MyLoggerAdvisor())
// çŸ¥è¯†åº“
.advisors(new QuestionAnswerAdvisor(loveAppVectorStore))
// å·¥å…·è°ƒç”¨
.tools(toolCallbackProvider)
.call()
.chatResponse();
```

ä½†æ˜¯ï¼Œè¿™ä¸ªï»¿å®ç°è¿˜ä¸å…·å¤‡å®Œæ•´çš„â€‹è‡ªä¸»è§„åˆ’å’Œæ‰§è¡Œèƒ½åŠ›â€ï¼Œä¸‹é¢æˆ‘ä»¬å°†å­¦ä¹ æ›´ï»¿é«˜çº§çš„è‡ªä¸»è§„åˆ’æ™ºâ€èƒ½ä½“æ¶æ„ã€‚

å››ã€OpenManus å®ç°åŸç†
----------------

åœ¨æˆ‘ä»¬å¼€å‘è¶…çº§æ™ºèƒ½ä½“å‰ï¼Œå¯ä»¥å…ˆå­¦ä¹ ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ã€‚ä¸‹é¢ä»¥ [OpenManus é¡¹ç›®](https://github.com/FoundationAgents/OpenManus) ä¸ºä¾‹ï¼Œé±¼çš®ä¼šå¸¦å¤§å®¶ä» 0 å¼€å§‹é˜…è¯»é¡¹ç›®æºç ï¼Œå­¦åˆ°è¶…çº§æ™ºèƒ½ä½“å®ç°æ–¹å¼çš„åŒæ—¶ï¼Œå¸®åŠ©å¤§å®¶æŒæ¡å¿«é€Ÿå­¦ä¹ å¼€æºé¡¹ç›®çš„æ–¹æ³•ã€‚

ğŸ’¡ å‹æƒ…æç¤ºï¼Œé±¼ï»¿çš®å¸¦å¤§å®¶åˆ†æçš„æºç æ˜¯ 2025 å¹´ â€‹5 æœˆ 16 æ—¥çš„ï¼Œåç»­æºç å¯èƒ½ä¼šæŒâ€ç»­æ›´æ–°ï¼Œé‡ç‚¹åœ¨äºå­¦ä¹ åˆ†ææºç çš„å¥—è·¯ã€‚ï»¿â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€

### å¿«é€Ÿè¿è¡Œ

å­¦ä¹ å¼€æºé¡¹ç›®çš„ç¬¬ä¸€æ­¥æ˜¯é˜…è¯»å®˜æ–¹æä¾›çš„ `README.md` é¡¹ç›®ä»‹ç»æ–‡æ¡£ï¼Œå…ˆæŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œå€Ÿæ­¤ç†Ÿæ‚‰ä¸šåŠ¡æµç¨‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±å•ƒæºç ã€‚

OpenMï»¿anus å®˜æ–¹æä¾›â€‹äº†ä¸€ä¸ª Demo â€è§†é¢‘ï¼Œæˆ‘ä»¬å°±ä¸å¿…å†ï»¿è‡ªå·±æ­å»ºç¯å¢ƒæ¥è·‘é¡¹â€ç›®äº†ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/g5CIwuNVSFKPvYO9.webp" alt="" width="100%" />


ä¸‹é¢è®©æˆ‘ä»¬çœ‹ä¸€ï»¿ä¸ª OpenManus çš„â€‹å¯¹è¯ç¤ºä¾‹ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£å®ƒçš„å·¥ä½œâ€æµç¨‹ã€‚å‡è®¾ç”¨æˆ·è¦å®Œæˆä¸€ï»¿ä¸ªä»»åŠ¡ â€”â€” åœ¨ç¼–ç¨‹å¯¼èˆªç½‘â€ç«™ä¸Šå¯»æ‰¾çƒ­é—¨æ–‡ç« ï¼Œå¯¹è¯å¦‚ä¸‹ï¼š

```plain
ç”¨æˆ·ï¼šå¸®æˆ‘åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™ä¸Šæ‰¾åˆ°æœ€è¿‘çš„å‡ ç¯‡çƒ­é—¨æ–‡ç« 

ç³»ç»Ÿï¼šOpenManus å·²å¯åŠ¨ï¼Œæ­£åœ¨å¤„ç†æ‚¨çš„è¯·æ±‚...

åŠ©æ‰‹ï¼šæˆ‘ä¼šå¸®æ‚¨åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™æŸ¥æ‰¾æœ€è¿‘çš„çƒ­é—¨æ–‡ç« ã€‚è®©æˆ‘å…ˆç”¨æµè§ˆå™¨å·¥å…·è®¿é—®ç¼–ç¨‹å¯¼èˆªç½‘ç«™ã€‚

ç³»ç»Ÿï¼šæ­£åœ¨è°ƒç”¨æµè§ˆå™¨å·¥å…·...

åŠ©æ‰‹ï¼šæˆ‘æˆåŠŸæ‰“å¼€äº†æµè§ˆå™¨å¹¶è®¿é—®äº†ç¼–ç¨‹å¯¼èˆªç½‘ç«™ã€‚ä»ç½‘ç«™å†…å®¹æ¥çœ‹ï¼Œæˆ‘ç°åœ¨éœ€è¦å¯¼èˆªåˆ°çƒ­é—¨æ–‡ç« åŒºåŸŸï¼Œç„¶åæå–è¿™äº›æ–‡ç« çš„ä¿¡æ¯ã€‚

ç³»ç»Ÿï¼šæ­£åœ¨æ‰§è¡Œæµè§ˆå™¨æ“ä½œ...

åŠ©æ‰‹ï¼šæˆ‘å·²åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™æ‰¾åˆ°äº†çƒ­é—¨æ–‡ç« åŒºåŸŸï¼Œä»¥ä¸‹æ˜¯æœ€è¿‘çš„å‡ ç¯‡çƒ­é—¨æ–‡ç« ï¼š

1. ã€ŠSpring Boot å®æˆ˜ï¼šæ„å»ºå¾®æœåŠ¡åº”ç”¨ã€‹- é˜…è¯»é‡ï¼š3200
2. ã€Šå‰ç«¯æ¡†æ¶å¯¹æ¯”ï¼šReact vs Vue vs Angularã€‹- é˜…è¯»é‡ï¼š2850
3. ã€ŠPython æ•°æ®åˆ†æå…¥é—¨ï¼šä» Pandas åˆ°å¯è§†åŒ–ã€‹- é˜…è¯»é‡ï¼š2400
4. ã€ŠDocker å®¹å™¨åŒ–åº”ç”¨éƒ¨ç½²æœ€ä½³å®è·µã€‹- é˜…è¯»é‡ï¼š2150
5. ã€Šç®—æ³•å­¦ä¹ è·¯çº¿ï¼šä»å…¥é—¨åˆ°ç²¾é€šã€‹- é˜…è¯»é‡ï¼š1980

è¿™äº›æ–‡ç« æ˜¯æ ¹æ®ç½‘ç«™æ˜¾ç¤ºçš„é˜…è¯»é‡æ’åºçš„çƒ­é—¨æ–‡ç« ã€‚

ç³»ç»Ÿï¼šæ­£åœ¨è°ƒç”¨ç»ˆæ­¢å·¥å…·...

åŠ©æ‰‹ï¼šå·²å®Œæˆä»»åŠ¡ï¼ŒæˆåŠŸæ‰¾åˆ°ç¼–ç¨‹å¯¼èˆªç½‘ç«™ä¸Šçš„çƒ­é—¨æ–‡ç« ã€‚å¦‚æœæ‚¨å¯¹æŸç¯‡æ–‡ç« æ„Ÿå…´è¶£æˆ–æœ‰å…¶ä»–éœ€æ±‚ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒOpenMaï»¿nus é¦–å…ˆç†è§£ç”¨æˆ·ä»»åŠ¡ï¼Œç„¶åé€‰æ‹©åˆé€‚çš„å·¥å…·ï¼ˆæµè§ˆâ€‹å™¨å·¥å…·ï¼‰æ¥æ‰§è¡Œä»»åŠ¡ï¼Œæœ€åæ•´ç†ä¿¡æ¯å¹¶è¿”å›ç»“æœã€‚æ•´ä¸ªè¿‡â€ç¨‹ä½“ç°äº† ReAct æ¨¡å¼çš„æ ¸å¿ƒè¦ç´ ï¼šæ€è€ƒï¼ˆThiï»¿nkingï¼‰ã€è¡ŒåŠ¨ï¼ˆActionï¼‰å’Œè§‚å¯Ÿï¼ˆObseâ€rvationï¼‰çš„å¾ªç¯ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚

### OpenManus æ•´ä½“æ¶æ„

äº†è§£äº† OpenManus çš„æ ¸å¿ƒåŠŸèƒ½åï¼Œå…ˆ **ä»æ•´ä½“åˆ°å±€éƒ¨** åœ°è§‚å¯Ÿ OpenManus çš„æ¶æ„ï¼Œç®€å•æ¥è¯´å°±æ˜¯çœ‹æ–‡ä»¶å¤¹çš„ç»„ç»‡å½¢å¼ã€æ–‡ä»¶çš„å‘½åè§„åˆ™ã€ä»¥åŠæ–‡ä»¶ä¹‹é—´çš„å…³è”ï¼Œæš‚æ—¶ä¸ç”¨æ·±å…¥æºç ã€‚

#### 1ã€æ•´ä½“æ–‡ä»¶å¤¹ç»„ç»‡å½¢å¼

å…ˆçœ‹æ–‡ä»¶å¤¹çš„ç»„ç»‡å½¢å¼ï¼Œè§åçŸ¥æ„ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/I0SZRLE7IGEc8LI7.webp" alt="" width="100%" />


#### 2ã€agent ç›®å½•

agent ï»¿ç›®å½•æ˜¯ OpenManâ€‹us å®ç°çš„æ ¸å¿ƒï¼Œé‡‡ç”¨â€äº†åˆ†å±‚çš„ä»£ç†æ¶æ„ï¼Œä¸åŒï»¿å±‚æ¬¡çš„ä»£ç†è´Ÿè´£ä¸åŒçš„åŠŸâ€èƒ½ï¼Œè¿™æ ·æ›´åˆ©äºç³»ç»Ÿçš„æ‰©å±•ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/zVLgJbCNr74HZ60U.webp" alt="" width="100%" />


OpenManus çš„ä»£ç†æ¶æ„ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ å±‚ï¼š

*   BaseAgentï¼šæœ€åŸºç¡€çš„ä»£ç†æŠ½è±¡ç±»ï¼Œå®šä¹‰äº†æ‰€æœ‰ä»£ç†çš„åŸºæœ¬çŠ¶æ€ç®¡ç†å’Œæ‰§è¡Œå¾ªç¯

*   ReActAgentï¼šå®ç° ReAct æ¨¡å¼çš„ä»£ç†ï¼Œå…·æœ‰æ€è€ƒï¼ˆThinkï¼‰å’Œè¡ŒåŠ¨ï¼ˆActï¼‰ä¸¤ä¸ªä¸»è¦æ­¥éª¤

*   ToolCallAgentï¼šèƒ½å¤Ÿè°ƒç”¨å·¥å…·çš„ä»£ç†ï¼Œç»§æ‰¿è‡ª ReActAgent å¹¶æ‰©å±•äº†å·¥å…·è°ƒç”¨èƒ½åŠ›

*   Manusï¼šå…·ä½“å®ç°çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œé›†æˆäº†æ‰€æœ‰èƒ½åŠ›å¹¶æ·»åŠ äº†æ›´å¤šä¸“ä¸šå·¥å…·


è¿˜æœ‰æ›´å¤šé€‚ç”¨äºç‰¹å®šé¢†åŸŸï»¿çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œæ¯”å¦‚ DataAnalysisâ€‹ æ•°æ®åˆ†æ Agentã€SWE è½¯ä»¶å¼€å‘å·¥ç¨‹â€å¸ˆ Agentã€MCP æœåŠ¡äº¤äº’ Agentï»¿ã€Browser æµè§ˆå™¨æ“ä½œ Agentï¼Œå®ƒâ€ä»¬éƒ½ç»§æ‰¿äº† ToolCallAgentã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/jLGa0c6lwYRhlaHu.webp" alt="" width="100%" />

#### 3ã€tool ç›®å½•

tool ï»¿ç›®å½•å®šä¹‰äº†å„ç§å„æ ·â€‹çš„å·¥å…·ï¼Œæ¯”å¦‚ç½‘é¡µæœâ€ç´¢ã€æ–‡ä»¶æ“ä½œã€è¯¢æ±‚ï»¿ç”¨æˆ·å¸®åŠ©ã€ä»£ç æ‰§è¡Œâ€å™¨ç­‰ç­‰ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/4Y4PYQA96JFmb7SG.webp" alt="" width="100%" />


#### 4ã€prompt ç›®å½•

prompï»¿t ç›®å½•å®šä¹‰äº†æ•´ä¸ªé¡¹â€‹ç›®ä¸­å¯èƒ½ä¼šç”¨åˆ°çš„æâ€ç¤ºè¯ã€‚ä»ä¸‹å›¾ä¸­æˆ‘ä»¬å¯ä»¥ï»¿çœ‹åˆ°æç¤ºè¯å†™çš„æ¯”è¾ƒä¸“â€ä¸šï¼Œè¿™å—ä¹Ÿæ˜¯æ¯”è¾ƒå€¼å¾—å­¦ä¹ çš„ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/mSVVhH5RubGj1OdW.webp" alt="" width="100%" />


#### 5ã€å…¶ä»–æ”¯æŒ

ä¸ºäº†å®ç°å®Œï»¿æ•´çš„æ™ºèƒ½ä½“åŠŸèƒ½ï¼ŒOâ€‹penManus â€ä¾èµ–ä»¥ä¸‹å…³é”®ç»„ä»¶ï¼š

*   è®°å¿†ç³»ç»Ÿï¼šä½¿ç”¨ Memory ç±»å­˜å‚¨å¯¹è¯å†å²å’Œä¸­é—´çŠ¶æ€

*   LLM å¤§æ¨¡å‹ï¼šé€šè¿‡ LLM ç±»æä¾›æ€è€ƒå’Œå†³ç­–èƒ½åŠ›

*   å·¥å…·ç³»ç»Ÿï¼šæä¾› BaseTool å’Œ ToolCollection ç±»æ‰©å±•æ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¹ç•Œ

*   æµç¨‹æ§åˆ¶ï¼šé€šè¿‡ AgentState å’Œæ‰§è¡Œå¾ªç¯ç®¡ç†çŠ¶æ€è½¬æ¢å’Œä»»åŠ¡æµç¨‹


åœ¨ OpenManus ä¸­ï¼Œè¿™äº›éƒ½æ˜¯è‡ªä¸»å®ç°çš„ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/fAl9ADVfbzUlroaN.webp" alt="" width="100%" />


### AI æ™ºèƒ½ä½“æ ¸å¿ƒå®ç°

äº†è§£æ•´ä½“æ¶æ„åï¼Œæˆ‘ä»¬é‡ç‚¹å­¦ä¹  Agent åˆ†å±‚ä»£ç†æ¶æ„ã€‚

#### 1ã€BaseAgent

BaseAgent æ˜¯æ‰€æœ‰ä»£ç†çš„åŸºç¡€ï¼Œå®šä¹‰äº†ä»£ç†çŠ¶æ€ç®¡ç†å’Œæ‰§è¡Œå¾ªç¯çš„æ ¸å¿ƒé€»è¾‘ã€‚æŸ¥çœ‹ `base.py` æ–‡ä»¶ï¼Œå…³é”®ä»£ç å°±æ˜¯ Agent Loop çš„å®ç°ï¼Œé€šè¿‡ while å®ç°å¾ªç¯ï¼Œå¹¶ä¸”å®šä¹‰äº†æ­»å¾ªç¯æ£€æŸ¥æœºåˆ¶ï¼š

```python
class BaseAgent(BaseModel, ABC):
async def run(self, request: Optional[str] = None) -> str:
"""æ‰§è¡Œä»£ç†çš„ä¸»å¾ªç¯"""
if self.state != AgentState.IDLE:
raise RuntimeError(f"Cannot run agent from state: {self.state}")

if request:
self.update_memory("user", request)

results: List[str] = []
async with self.state_context(AgentState.RUNNING):
while (self.current_step < self.max_steps and
self.state != AgentState.FINISHED):
self.current_step += 1
step_result = await self.step()

# æ£€æŸ¥æ˜¯å¦é™·å…¥å¾ªç¯
if self.is_stuck():
self.handle_stuck_state()

results.append(f"Step {self.current_step}: {step_result}")

if self.current_step >= self.max_steps:
self.current_step = 0
self.state = AgentState.IDLE
results.append(f"Terminated: Reached max steps ({self.max_steps})")

return "\n".join(results) if results else "No steps executed"

@abstractmethod
async def step(self) -> str:
"""æ‰§è¡Œå•æ­¥æ“ä½œï¼Œå¿…é¡»ç”±å­ç±»å®ç°"""
```

è¿™é‡Œå…¶å®ä½¿ï»¿ç”¨äº†æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡â€‹å¼ï¼Œçˆ¶ç±»å®šä¹‰æ‰§è¡Œæµâ€ç¨‹ï¼Œå…·ä½“çš„æ‰§è¡Œæ–¹æ³•ï»¿ï¼ˆstepï¼‰äº¤ç»™â€å­ç±»å®ç°ã€‚

#### 2ã€ReActAgent

ReActAgent å®ç°äº† ReAct æ¨¡å¼ï¼Œå°†ä»£ç†çš„æ‰§è¡Œè¿‡ç¨‹åˆ†ä¸ºæ€è€ƒï¼ˆThinkï¼‰å’Œè¡ŒåŠ¨ï¼ˆActï¼‰ä¸¤ä¸ªå…³é”®æ­¥éª¤ã€‚æŸ¥çœ‹ `react.py` æ–‡ä»¶ï¼š

```python
class ReActAgent(BaseAgent, ABC):
@abstractmethod
async def think(self) -> bool:
"""å¤„ç†å½“å‰çŠ¶æ€å¹¶å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""

@abstractmethod
async def act(self) -> str:
"""æ‰§è¡Œå†³å®šçš„è¡ŒåŠ¨"""

async def step(self) -> str:
"""æ‰§è¡Œå•æ­¥ï¼šæ€è€ƒå’Œè¡ŒåŠ¨"""
should_act = await self.think()
if not should_act:
return "Thinking complete - no action needed"
return await self.act()
```

ä¸Šè¿°ä»£ç åŒæ ·è¿ç”¨ï»¿äº†æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ï¼Œè¿™ç§è®¾è®¡ä½“ç°â€‹äº† ReAct æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³ï¼Œâ€ä¹Ÿå°±æ˜¯ â€œæ€è€ƒ - è¡ŒåŠ¨ - è§‚ï»¿å¯Ÿâ€ çš„å¾ªç¯è¿‡ç¨‹ã€‚ä½†æ˜¯å…·ä½“æ€ä¹ˆæ€â€è€ƒã€æ€ä¹ˆè¡ŒåŠ¨ï¼Œäº¤ç»™å­ç±»å»å®ç°ã€‚

#### 3ã€ToolCallAgent

ToolCallAgent åœ¨ ReAct æ¨¡å¼çš„åŸºç¡€ä¸Šå¢åŠ äº†å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œæ˜¯ OpenManus æœ€é‡è¦çš„ä¸€ä¸ªå±‚æ¬¡ã€‚æŸ¥çœ‹ `toolcall.py` æ–‡ä»¶ï¼Œè™½ç„¶ä»£ç æ¯”è¾ƒå¤æ‚ï¼Œä½†åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯å·¥å…·è°ƒç”¨æœºåˆ¶çš„å…·ä½“å®ç°ï¼š

1.  thinkï¼šå’Œ AI äº¤äº’æ€è€ƒä½¿ç”¨ä»€ä¹ˆå·¥å…·

2.  actï¼šç¨‹åºæ‰§è¡Œå·¥å…·

3.  observeï¼šå°†ç»“æœè¿”å›ç»™ AI


```python
class ToolCallAgent(ReActAgent):
"""èƒ½å¤Ÿæ‰§è¡Œå·¥å…·è°ƒç”¨çš„ä»£ç†ç±»"""

available_tools: ToolCollection = ToolCollection(
CreateChatCompletion(), Terminate()
)
tool_choices: TOOL_CHOICE_TYPE = ToolChoice.AUTO
special_tool_names: List[str] = Field(default_factory=lambda: [Terminate().name])

async def think(self) -> bool:
"""å¤„ç†å½“å‰çŠ¶æ€å¹¶ä½¿ç”¨å·¥å…·å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""
# æ·»åŠ ä¸‹ä¸€æ­¥æç¤ºåˆ°ç”¨æˆ·æ¶ˆæ¯
if self.next_step_prompt:
user_msg = Message.user_message(self.next_step_prompt)
self.messages += [user_msg]

# è¯·æ±‚ LLM é€‰æ‹©å·¥å…·
response = await self.llm.ask_tool(
messages=self.messages,
system_msgs=([Message.system_message(self.system_prompt)]
if self.system_prompt else None),
tools=self.available_tools.to_params(),
tool_choice=self.tool_choices,
)

# å¤„ç†å·¥å…·è°ƒç”¨
self.tool_calls = tool_calls = (
response.tool_calls if response and response.tool_calls else []
)
content = response.content if response and response.content else ""

# æ·»åŠ åŠ©æ‰‹æ¶ˆæ¯åˆ°è®°å¿†
assistant_msg = (
Message.from_tool_calls(content=content, tool_calls=self.tool_calls)
if self.tool_calls
else Message.assistant_message(content)
)
self.memory.add_message(assistant_msg)

# å†³å®šæ˜¯å¦åº”è¯¥æ‰§è¡Œè¡ŒåŠ¨
return bool(self.tool_calls or content)

async def act(self) -> str:
"""æ‰§è¡Œå·¥å…·è°ƒç”¨å¹¶å¤„ç†ç»“æœ"""
if not self.tool_calls:
# è¿”å›æœ€åä¸€æ¡æ¶ˆæ¯å†…å®¹ï¼Œå¦‚æœæ²¡æœ‰å·¥å…·è°ƒç”¨
return self.messages[-1].content or "No content or commands to execute"

results = []
for command in self.tool_calls:
# æ‰§è¡Œå·¥å…·
result = await self.execute_tool(command)

# è®°å½•å·¥å…·å“åº”åˆ°è®°å¿†
tool_msg = Message.tool_message(
content=result,
tool_call_id=command.id,
name=command.function.name,
base64_image=self._current_base64_image,
)
self.memory.add_message(tool_msg)
results.append(result)

return "\n\n".join(results)
```

#### 4ã€Manus

Manus ç±»æ˜¯ OpenManus çš„æ ¸å¿ƒæ™ºèƒ½ä½“å®ä¾‹ï¼Œé›†æˆäº†å„ç§å·¥å…·å’Œèƒ½åŠ›ã€‚æŸ¥çœ‹ `manus.py` æ–‡ä»¶ï¼š

```python
class Manus(ToolCallAgent):
"""å¤šåŠŸèƒ½é€šç”¨æ™ºèƒ½ä½“ï¼Œæ”¯æŒæœ¬åœ°å’Œ MCP å·¥å…·"""

name: str = "Manus"
description: str = "A versatile agent that can solve various tasks using multiple tools"

# æ·»åŠ å„ç§é€šç”¨å·¥å…·åˆ°å·¥å…·é›†åˆ
available_tools: ToolCollection = Field(
default_factory=lambda: ToolCollection(
PythonExecute(),
BrowserUseTool(),
StrReplaceEditor(),
AskHuman(),
Terminate(),
)
)
```

#### MCP å®¢æˆ·ç«¯ç”¨äºè¿œç¨‹å·¥å…·è®¿é—®
mcp_clients: MCPClients = Field(default_factory=MCPClients)

```
@classmethod
async def create(cls, **kwargs) -> "Manus":
"""å·¥å‚æ–¹æ³•åˆ›å»ºå¹¶åˆå§‹åŒ– Manus å®ä¾‹"""
instance = cls(**kwargs)
await instance.initialize_mcp_servers()
instance._initialized = True
return instance

async def think(self) -> bool:
"""å¤„ç†å½“å‰çŠ¶æ€å¹¶æ ¹æ®ä¸Šä¸‹æ–‡å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""
if not self._initialized:
await self.initialize_mcp_servers()
self._initialized = True

# ä¸ºæµè§ˆå™¨å·¥å…·æ·»åŠ ç‰¹æ®Šä¸Šä¸‹æ–‡
original_prompt = self.next_step_prompt
browser_in_use = self._check_browser_in_use()

if browser_in_use:
self.next_step_prompt = (
await self.browser_context_helper.format_next_step_prompt()
)

result = await super().think()

# æ¢å¤åŸå§‹æç¤º
self.next_step_prompt = original_prompt

return result
```


### å…³é”®å®ç°ç»†èŠ‚

å­¦å®Œäº†è¶…çº§ï»¿æ™ºèƒ½ä½“çš„æ ¸å¿ƒå®ç°åâ€‹ï¼Œæˆ‘ä»¬å†å­¦ä¹ ä¸€äº›é¡¹â€ç›®ä¸­æ¯”è¾ƒå¾®å¦™çš„å®ç°ï»¿ç»†èŠ‚ï¼Œå¯¹æˆ‘ä»¬è‡ªå·±å¼€â€å‘é¡¹ç›®ä¹Ÿä¼šå¾ˆæœ‰å¸®åŠ©ã€‚

#### 1ã€å·¥å…·ç³»ç»Ÿè®¾è®¡

1ï¼‰å·¥å…·æŠ½è±¡å±‚ BaseTool

æ‰€æœ‰å·¥å…·å‡ç»§æ‰¿è‡ª `BaseTool` æŠ½è±¡åŸºç±»ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£å’Œè¡Œä¸ºï¼š

```python
class BaseTool(ABC, BaseModel):
name: str
description: str
parameters: Optional[dict] = None

async def __call__(self, **kwargs) -> Any:
"""ä½¿ç”¨ç»™å®šå‚æ•°æ‰§è¡Œå·¥å…·"""
return await self.execute(**kwargs)

@abstractmethod
async def execute(self, **kwargs) -> Any:
"""æ‰§è¡Œå·¥å…·çš„å…·ä½“é€»è¾‘ï¼Œç”±å­ç±»å®ç°"""

def to_param(self) -> Dict:
"""å°†å·¥å…·è½¬æ¢ä¸ºå‡½æ•°è°ƒç”¨æ ¼å¼"""
return {
"type": "function",
"function": {
"name": self.name,
"description": self.description,
"parameters": self.parameters,
},
}
```

è¿™ç§è®¾è®¡ä½¿ï»¿å¾—æ¯ä¸ªå·¥å…·éƒ½æœ‰ç»Ÿä¸€â€‹çš„è°ƒç”¨æ–¹å¼ï¼ŒåŒæ—¶å…·â€æœ‰è§„èŒƒåŒ–çš„å‚æ•°æè¿°ï»¿ï¼Œä¾¿äº LLM ç†â€è§£å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ã€‚

2ï¼‰ç»ˆæ­¢å·¥å…· Terminate

Termiï»¿nate å·¥å…·æ˜¯ä¸€ä¸ªâ€‹ç‰¹æ®Šçš„å·¥å…·ï¼Œå…è®¸æ™ºèƒ½â€ä½“é€šè¿‡ AI å¤§æ¨¡å‹ï»¿è‡ªä¸»å†³å®šä½•æ—¶ç»“æŸä»»åŠ¡â€ï¼Œé¿å…æ— é™å¾ªç¯æˆ–è€…è¿‡æ—©ç»“æŸã€‚

```python
class Terminate(BaseTool):
name: str = "terminate"
description: str = """Terminate the interaction when the request is met OR
if the assistant cannot proceed further with the task.
When you have finished all the tasks, call this tool to end the work."""

parameters: dict = {
"type": "object",
"properties": {
"status": {
"type": "string",
"description": "The finish status of the interaction.",
"enum": ["success", "failure"],
}
},
"required": ["status"],
}

async def execute(self, status: str) -> str:
"""å®Œæˆå½“å‰æ‰§è¡Œ"""
return f"The interaction has been completed with status: {status}"
```

åœ¨ agent æºç ä¸­ï¼Œæœ‰ä¸€ä¸ª `special_tool_names` å˜é‡ï¼Œç”¨äºæŒ‡å®šç»ˆæ­¢å·¥å…·ç­‰ç‰¹æ®Šå·¥å…·ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/RWPVeFwadBJ45CLN.webp" alt="img" width="100%" />


åœ¨ `toolcall.py` æºç ä¸­ï¼Œå¯¹ç‰¹æ®Šå·¥å…·è¿›è¡Œå¤„ç†ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/jXWZyr42lvDJd3xg.webp" alt="img" width="100%" />



3ï¼‰è¯¢é—®å·¥å…· AskHuman

AskHumaï»¿n å·¥å…·å…è®¸æ™ºèƒ½ä½“åœ¨é‡åˆ°æ— â€‹æ³•è‡ªä¸»è§£å†³çš„é—®é¢˜æ—¶å‘äººç±»å¯»â€æ±‚å¸®åŠ©ï¼Œä¹Ÿå°±æ˜¯ç»™ç”¨æˆ·ä¸€ä¸ªè¾“ï»¿å…¥æ¡†ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°å¹²é¢„â€æ™ºèƒ½ä½“å®Œæˆä»»åŠ¡çš„è¿‡ç¨‹ã€‚

```python
class AskHuman(BaseTool):
"""Add a tool to ask human for help."""

name: str = "ask_human"
description: str = "Use this tool to ask human for help."
parameters: str = {
"type": "object",
"properties": {
"inquire": {
"type": "string",
"description": "The question you want to ask human.",
}
},
"required": ["inquire"],
}

async def execute(self, inquire: str) -> str:
return input(f"""Bot: {inquire}\n\nYou: """).strip()
```

è¿™ä¸ªå·¥å…·å®ï»¿ç°è™½ç„¶ç®€å•ï¼Œä½†æå¤§â€‹åœ°æå‡äº†æ™ºèƒ½ä½“çš„å®â€ç”¨æ€§å’Œå®‰å…¨æ€§ã€‚

4ï¼‰å·¥å…·é›†åˆ ToolCollection

OpenMï»¿anus è®¾è®¡äº† Tâ€‹oolCollectâ€ion ç±»æ¥ç®¡ç†å¤šä¸ªï»¿å·¥å…·å®ä¾‹ï¼Œæä¾›ç»Ÿä¸€çš„â€å·¥å…·æ³¨å†Œå’Œæ‰§è¡Œæ¥å£ï¼š

```python
class ToolCollection:
"""A collection of defined tools."""

def __init__(self, *tools: BaseTool):
self.tools = tools
self.tool_map = {tool.name: tool for tool in tools}

def to_params(self) -> List[Dict[str, Any]]:
return [tool.to_param() for tool in self.tools]

async def execute(self, *, name: str, tool_input: Dict[str, Any] = None) -> ToolResult:
tool = self.tool_map.get(name)
if not tool:
return ToolFailure(error=f"Tool {name} is invalid")
try:
result = await tool(**tool_input)
return result
except ToolError as e:
return ToolFailure(error=e.message)

def add_tools(self, *tools: BaseTool):
"""Add multiple tools to the collection."""
for tool in tools:
self.add_tool(tool)
return self
```

è¿™ç§è®¾è®¡ä½¿å¾— Oï»¿penManus å¯ä»¥çµæ´»åœ°æ·»â€‹åŠ ã€ç§»é™¤å’Œç®¡ç†å·¥å…·ï¼Œå®ç°äº†å·¥å…·â€ç³»ç»Ÿçš„å¯æ’æ‹”æ€§ã€‚æˆ‘ä»¬ä¹‹å‰åˆ©ç”¨ ï»¿Spring AI å¼€å‘å·¥å…·è°ƒâ€ç”¨æ—¶ï¼Œä¹Ÿå†™äº†ä¸ªç±»ä¼¼çš„å·¥å…·æ³¨å†Œç±»ã€‚

#### 2ã€MCP åè®®æ”¯æŒ

1ï¼‰MCP ä¸å·¥å…·ç³»ç»Ÿçš„é›†æˆ

è¿˜è®°å¾—ä¹ˆï¼Œä¹‹å‰é±¼çš®åœ¨æ•™ç¨‹ä¸­æåˆ°è¿‡ â€œMCP çš„æœ¬è´¨å°±æ˜¯å·¥å…·è°ƒç”¨â€ï¼ŒOpenManus çš„å®ç°ä¹Ÿæ˜¯éµå¾ªäº†è¿™ä¸€æ€æƒ³ã€‚é€šè¿‡ `MCPClients` ç±»ï¼ˆç»§æ‰¿è‡ª ToolCollectionï¼‰å°† MCP æœåŠ¡é›†æˆåˆ°ç°æœ‰å·¥å…·ç³»ç»Ÿä¸­ã€‚æŸ¥çœ‹ `tool/mcp.py` çš„æºç ï¼š

```python
class MCPClients(ToolCollection):
"""
A collection of tools that connects to multiple MCP servers and manages available tools through the Model Context Protocol.
"""

sessions: Dict[str, ClientSession] = {}
exit_stacks: Dict[str, AsyncExitStack] = {}
description: str = "MCP client tools for server interaction"

def __init__(self):
super().__init__()  # Initialize with empty tools list
self.name = "mcp"  # Keep name for backward compatibility
```

2ï¼‰åŠ¨æ€å·¥å…·ä»£ç†

æ¯å½“è¿æ¥åˆ° MCP æœåŠ¡å™¨æ—¶ï¼ŒOpenManus ä¼šåŠ¨æ€åˆ›å»º `MCPClientTool` å®ä¾‹ï¼ˆç»§æ‰¿è‡ª BaseToolï¼‰ä½œä¸ºæ¯ä¸ªè¿œç¨‹å·¥å…·çš„ä»£ç†ã€‚æŸ¥çœ‹ `tool/mcp.py` çš„æºç ï¼Œé€šè¿‡å‘ MCP æœåŠ¡å™¨å‘é€è¿œç¨‹è¯·æ±‚æ¥æ‰§è¡Œå·¥å…·ï¼š

```python
class MCPClientTool(BaseTool):
"""Represents a tool proxy that can be called on the MCP server from the client side."""

session: Optional[ClientSession] = None
server_id: str = ""  # Add server identifier
original_name: str = ""

async def execute(self, **kwargs) -> ToolResult:
"""Execute the tool by making a remote call to the MCP server."""
if not self.session:
return ToolResult(error="Not connected to MCP server")

try:
result = await self.session.call_tool(self.original_name, kwargs)
content_str = ", ".join(
item.text for item in result.content if isinstance(item, TextContent)
)
return ToolResult(output=content_str or "No output returned.")
except Exception as e:
return ToolResult(error=f"Error executing tool: {str(e)}")
```

3ï¼‰Manus ä¸­çš„ MCP é›†æˆæœºåˆ¶

Manus æ™ºèƒ½ä½“ **é€šè¿‡å·¥å…·è°ƒç”¨** å®ç°äº†ä¸ MCP æœåŠ¡å™¨çš„æ— ç¼é›†æˆã€‚æŸ¥çœ‹ `agent/manus.py` çš„æºç ï¼Œå‘ç°æœ¬è´¨ä¸Šæ˜¯æŠŠ MCP æœåŠ¡æä¾›çš„å·¥å…·åŠ¨æ€æ·»åŠ åˆ°å¯ç”¨çš„å·¥å…·é›†åˆä¸­ï¼š

```python
async def connect_mcp_server(
self,
server_url: str,
server_id: str = "",
use_stdio: bool = False,
stdio_args: List[str] = None,
) -> None:
"""Connect to an MCP server and add its tools."""
if use_stdio:
await self.mcp_clients.connect_stdio(server_url, stdio_args or [], server_id)
else:
await self.mcp_clients.connect_sse(server_url, server_id)

# å…³é”®å®ç°ï¼šåŠ¨æ€æ·»åŠ è¯¥æœåŠ¡å™¨çš„å·¥å…·åˆ°å¯ç”¨å·¥å…·é›†åˆ
new_tools = [
tool for tool in self.mcp_clients.tools if tool.server_id == server_id
]
self.available_tools.add_tools(*new_tools)
```

è¿™æ ·ä¸€æ¥ï¼Œï»¿å¯¹å¤§æ¨¡å‹æ¥è¯´ï¼ŒMCâ€‹P å·¥å…·ä¸æœ¬åœ°å·¥å…·â€çš„è°ƒç”¨æ–¹å¼ä¸€è‡´ï¼Œå¾ˆï»¿å·§å¦™åœ°å¤ç”¨äº†ä»£ç ã€‚

#### 3ã€å…¶ä»–å€¼å¾—å­¦ä¹ çš„æºç 

1ï¼‰Python ä»£ç æ‰§è¡Œæ²™ç®±

`PythonExecute` å·¥å…·å®ç°äº†ä¸€ä¸ªå®‰å…¨çš„ Python ä»£ç æ‰§è¡Œç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå€¼å¾—å­¦ä¹ çš„å®‰å…¨å®ç°ã€‚æŸ¥çœ‹ `tool/python_execute.py` æºç ï¼š

```python
class PythonExecute(BaseTool):
name: str = "python_execute"

async def execute(self, code: str, timeout: int = 5) -> Dict:
"""å®‰å…¨æ‰§è¡Œ Python ä»£ç """
with multiprocessing.Manager() as manager:
result = manager.dict({"observation": "", "success": False})
# å®‰å…¨çš„å…¨å±€ç¯å¢ƒ
safe_globals = {"__builtins__": __builtins__.__dict__.copy()}
# ä½¿ç”¨ç‹¬ç«‹è¿›ç¨‹æ‰§è¡Œä»£ç 
proc = multiprocessing.Process(
target=self._run_code, args=(code, result, safe_globals)
)
proc.start()
proc.join(timeout)

# è¶…æ—¶å¤„ç†
if proc.is_alive():
proc.terminate()
proc.join(1)
return {
"observation": f"Execution timeout after {timeout} seconds",
"success": False,
}
return dict(result)
```

è¿™æ®µä»£ç å±•ç¤ºäº†å‡ ä¸ªå®‰å…¨ç¼–ç¨‹çš„æœ€ä½³å®è·µï¼š

*   ä½¿ç”¨ç‹¬ç«‹è¿›ç¨‹éš”ç¦»ä»£ç æ‰§è¡Œ

*   å®ç°äº†è¶…æ—¶æœºåˆ¶é˜²æ­¢æ— é™å¾ªç¯

*   æˆªè·å’Œå¤„ç†æ‰€æœ‰å¼‚å¸¸

*   é‡å®šå‘æ ‡å‡†è¾“å‡ºä»¥æ•è·æ‰“å°å†…å®¹


2ï¼‰çŠ¶æ€ç®¡ç†ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢æœºåˆ¶

`BaseAgent` å®ç°äº†ä¸€ä¸ªä¼˜é›…çš„çŠ¶æ€ç®¡ç†å’Œä¸Šä¸‹æ–‡åˆ‡æ¢æœºåˆ¶ï¼š

```python
@asynccontextmanager
async def state_context(self, new_state: AgentState):
"""Context manager for safe agent state transitions."""
if not isinstance(new_state, AgentState):
raise ValueError(f"Invalid state: {new_state}")

previous_state = self.state
self.state = new_state
try:
yield
except Exception as e:
self.state = AgentState.ERROR  # Transition to ERROR on failure
raise e
finally:
self.state = previous_state  # Revert to previous state
```

è¿™ä¸ªä¸Šä¸‹æ–‡ï»¿ç®¡ç†å™¨ç¡®ä¿äº†çŠ¶æ€è½¬â€‹æ¢çš„å®‰å…¨æ€§å’Œå¯é æ€§â€ï¼Œå³ä½¿åœ¨å¼‚å¸¸æƒ…å†µä¸‹ï»¿ä¹Ÿèƒ½æ­£ç¡®æ¢å¤çŠ¶æ€ï¼Œâ€æ˜¯ä¸€ä¸ªå€¼å¾—å­¦ä¹ çš„è®¾è®¡æ¨¡å¼ã€‚

3ï¼‰å·¥å…·ç»“æœç»Ÿä¸€è¡¨ç¤ºä¸ç»„åˆ

OpenManus è®¾è®¡äº† `ToolResult` ç±»æ¥ç»Ÿä¸€è¡¨ç¤ºå·¥å…·æ‰§è¡Œç»“æœï¼Œå¹¶æ”¯æŒç»“æœç»„åˆã€‚æŸ¥çœ‹ `tool/base.py` æºç ï¼š

```python
class ToolResult(BaseModel):
"""Represents the result of a tool execution."""

output: Any = Field(default=None)
error: Optional[str] = Field(default=None)
base64_image: Optional[str] = Field(default=None)
system: Optional[str] = Field(default=None)

def __add__(self, other: "ToolResult"):
"""ç»„åˆä¸¤ä¸ªå·¥å…·ç»“æœ"""
def combine_fields(field: Optional[str], other_field: Optional[str], concatenate: bool = True):
if field and other_field:
if concatenate:
return field + other_field
raise ValueError("Cannot combine tool results")
return field or other_field

return ToolResult(
output=combine_fields(self.output, other.output),
error=combine_fields(self.error, other.error),
base64_image=combine_fields(self.base64_image, other.base64_image, False),
system=combine_fields(self.system, other.system),
)
```

è¿™ç§è®¾è®¡ä½¿ï»¿å¾—å·¥å…·ç»“æœå¤„ç†æ›´åŠ â€‹ç»Ÿä¸€å’Œçµæ´»ï¼Œç‰¹åˆ«æ˜¯â€åœ¨éœ€è¦ç»„åˆå¤šä¸ªå·¥å…·ï»¿ç»“æœæˆ–å¤„ç†å¼‚å¸¸æƒ…å†µâ€æ—¶ã€‚

äº”ã€è‡ªä¸»å®ç° Manus æ™ºèƒ½ä½“
----------------

è™½ç„¶ OpenManus ä»£ï»¿ç é‡å¾ˆå¤§ï¼Œä½†å…¶å®å¾ˆå¤šä»£ç éƒ½æ˜¯åœ¨å®ç°æ™ºèƒ½ä½“æ‰€éœ€çš„æ”¯æŒç³»ç»Ÿâ€‹ï¼Œæ¯”å¦‚è°ƒç”¨å¤§æ¨¡å‹ã€ä¼šè¯è®°å¿†ã€å·¥å…·è°ƒç”¨èƒ½åŠ›ç­‰ã€‚å¦‚æœä½¿ç”¨ â€AI å¼€å‘æ¡†æ¶ï¼Œè¿™äº›èƒ½åŠ›éƒ½ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å®ç°ï¼Œä»£ç é‡ä¼šç®€ï»¿å•å¾ˆå¤šã€‚ä¸‹é¢å°±è®©æˆ‘ä»¬åŸºäº Spring AI æ¡†æ¶ï¼Œâ€å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Manus æ™ºèƒ½ä½“ã€‚

### å®šä¹‰æ•°æ®æ¨¡å‹

æ–°å»º `agent.model` åŒ…ï¼Œå°†æ‰€æœ‰ç”¨åˆ°çš„æ•°æ®æ¨¡å‹ï¼ˆå®ä½“ç±»ã€æšä¸¾ç±»ç­‰ï¼‰éƒ½æ”¾åˆ°è¯¥åŒ…ä¸‹ã€‚

ç›®å‰æˆ‘ä»¬åªï»¿éœ€è¦å®šä¹‰ Agenâ€‹t çš„çŠ¶æ€æšä¸¾ï¼Œç”¨â€äºæ§åˆ¶æ™ºèƒ½ä½“çš„æ‰§è¡Œï»¿ã€‚AgentStaâ€te ä»£ç å¦‚ä¸‹ï¼š

```java
/**  
 * ä»£ç†æ‰§è¡ŒçŠ¶æ€çš„æšä¸¾ç±»  
 */
public enum AgentState {

/**
 * ç©ºé—²çŠ¶æ€
 */
IDLE,

/**
 * è¿è¡Œä¸­çŠ¶æ€
 */
RUNNING,

/**
 * å·²å®ŒæˆçŠ¶æ€
 */
FINISHED,

/**
 * é”™è¯¯çŠ¶æ€
 */
ERROR
}
```

### æ ¸å¿ƒæ¶æ„å¼€å‘

é¦–å…ˆå®šä¹‰æ™ºèƒ½ä½“çš„æ ¸å¿ƒæ¶æ„ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç±»ï¼š

*   BaseAgentï¼šæ™ºèƒ½ä½“åŸºç±»ï¼Œå®šä¹‰åŸºæœ¬ä¿¡æ¯å’Œå¤šæ­¥éª¤æ‰§è¡Œæµç¨‹

*   ReActAgentï¼šå®ç°æ€è€ƒå’Œè¡ŒåŠ¨ä¸¤ä¸ªæ­¥éª¤çš„æ™ºèƒ½ä½“

*   ToolCallAgentï¼šå®ç°å·¥å…·è°ƒç”¨èƒ½åŠ›çš„æ™ºèƒ½ä½“

*   YuManusï¼šæœ€ç»ˆå¯ä½¿ç”¨çš„ Manus å®ä¾‹


#### 1ã€å¼€å‘åŸºç¡€ Agent ç±»

å‚è€ƒ Opï»¿enManus çš„â€‹å®ç°æ–¹å¼ï¼ŒBaseâ€Agent çš„ä»£ç ï»¿å¦‚ä¸‹ï¼š

```java
/**  
 * æŠ½è±¡åŸºç¡€ä»£ç†ç±»ï¼Œç”¨äºç®¡ç†ä»£ç†çŠ¶æ€å’Œæ‰§è¡Œæµç¨‹ã€‚  
 *   
 * æä¾›çŠ¶æ€è½¬æ¢ã€å†…å­˜ç®¡ç†å’ŒåŸºäºæ­¥éª¤çš„æ‰§è¡Œå¾ªç¯çš„åŸºç¡€åŠŸèƒ½ã€‚  
 * å­ç±»å¿…é¡»å®ç°stepæ–¹æ³•ã€‚  
 */
@Data
@Slf4j
public abstract class BaseAgent {

// æ ¸å¿ƒå±æ€§
private String name;

// æç¤º
private String systemPrompt;
private String nextStepPrompt;

// çŠ¶æ€
private AgentState state = AgentState.IDLE;

// æ‰§è¡Œæ§åˆ¶
private int maxSteps = 10;
private int currentStep = 0;

// LLM
private ChatClient chatClient;

// Memoryï¼ˆéœ€è¦è‡ªä¸»ç»´æŠ¤ä¼šè¯ä¸Šä¸‹æ–‡ï¼‰
private List<Message> messageList = new ArrayList<>();

/**
 * è¿è¡Œä»£ç†
 *
 * @param userPrompt ç”¨æˆ·æç¤ºè¯
 * @return æ‰§è¡Œç»“æœ
 */
public String run(String userPrompt) {
if (this.state != AgentState.IDLE) {
throw new RuntimeException("Cannot run agent from state: " + this.state);
}
if (StringUtil.isBlank(userPrompt)) {
throw new RuntimeException("Cannot run agent with empty user prompt");
}
// æ›´æ”¹çŠ¶æ€
state = AgentState.RUNNING;
// è®°å½•æ¶ˆæ¯ä¸Šä¸‹æ–‡
messageList.add(new UserMessage(userPrompt));
// ä¿å­˜ç»“æœåˆ—è¡¨
List<String> results = new ArrayList<>();
try {
for (int i = 0; i < maxSteps && state != AgentState.FINISHED; i++) {
int stepNumber = i + 1;
currentStep = stepNumber;
log.info("Executing step " + stepNumber + "/" + maxSteps);
// å•æ­¥æ‰§è¡Œ
String stepResult = step();
String result = "Step " + stepNumber + ": " + stepResult;
results.add(result);
}
// æ£€æŸ¥æ˜¯å¦è¶…å‡ºæ­¥éª¤é™åˆ¶
if (currentStep >= maxSteps) {
state = AgentState.FINISHED;
results.add("Terminated: Reached max steps (" + maxSteps + ")");
}
return String.join("\n", results);
} catch (Exception e) {
state = AgentState.ERROR;
log.error("Error executing agent", e);
return "æ‰§è¡Œé”™è¯¯" + e.getMessage();
} finally {
// æ¸…ç†èµ„æº
this.cleanup();
}
}

/**
 * æ‰§è¡Œå•ä¸ªæ­¥éª¤
 *
 * @return æ­¥éª¤æ‰§è¡Œç»“æœ
 */
public abstract String step();

/**
 * æ¸…ç†èµ„æº
 */
protected void cleanup() {
// å­ç±»å¯ä»¥é‡å†™æ­¤æ–¹æ³•æ¥æ¸…ç†èµ„æº
}
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¦æ³¨æ„ 3 ç‚¹ï¼š

1.  åŒ…å« chatClient å±æ€§ï¼Œç”±è°ƒç”¨æ–¹ä¼ å…¥å…·ä½“è°ƒç”¨å¤§æ¨¡å‹çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯å†™æ­»ä½¿ç”¨çš„å¤§æ¨¡å‹ï¼Œæ›´çµæ´»

2.  åŒ…å« messageList å±æ€§ï¼Œç”¨äºç»´æŠ¤æ¶ˆæ¯ä¸Šä¸‹æ–‡åˆ—è¡¨

3.  é€šè¿‡ state å±æ€§æ¥æ§åˆ¶æ™ºèƒ½ä½“çš„æ‰§è¡Œæµç¨‹


#### 2ã€å¼€å‘ ReActAgent ç±»

å‚è€ƒ OpenMï»¿anus çš„å®ç°æ–¹å¼ï¼Œç»§æ‰¿è‡ª â€‹BaseAgentï¼Œå¹¶ä¸”å°† sâ€tep æ–¹æ³•åˆ†è§£ä¸º thinkï»¿ å’Œ act ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚Râ€eActAgent çš„ä»£ç å¦‚ä¸‹ï¼š

```java
/**  
 * ReAct (Reasoning and Acting) æ¨¡å¼çš„ä»£ç†æŠ½è±¡ç±»  
 * å®ç°äº†æ€è€ƒ-è¡ŒåŠ¨çš„å¾ªç¯æ¨¡å¼  
 */
@EqualsAndHashCode(callSuper = true)
@Data
public abstract class ReActAgent extends BaseAgent {

/**
 * å¤„ç†å½“å‰çŠ¶æ€å¹¶å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨
 *
 * @return æ˜¯å¦éœ€è¦æ‰§è¡Œè¡ŒåŠ¨ï¼Œtrueè¡¨ç¤ºéœ€è¦æ‰§è¡Œï¼Œfalseè¡¨ç¤ºä¸éœ€è¦æ‰§è¡Œ
 */
public abstract boolean think();

/**
 * æ‰§è¡Œå†³å®šçš„è¡ŒåŠ¨
 *
 * @return è¡ŒåŠ¨æ‰§è¡Œç»“æœ
 */
public abstract String act();

/**
 * æ‰§è¡Œå•ä¸ªæ­¥éª¤ï¼šæ€è€ƒå’Œè¡ŒåŠ¨
 *
 * @return æ­¥éª¤æ‰§è¡Œç»“æœ
 */
@Override
public String step() {
try {
boolean shouldAct = think();
if (!shouldAct) {
return "æ€è€ƒå®Œæˆ - æ— éœ€è¡ŒåŠ¨";
}
return act();
} catch (Exception e) {
// è®°å½•å¼‚å¸¸æ—¥å¿—
e.printStackTrace();
return "æ­¥éª¤æ‰§è¡Œå¤±è´¥: " + e.getMessage();
}
}
}
```

#### 3ã€å¼€å‘ ToolCallAgent ç±»

ToolCaï»¿llAgent è´Ÿè´£å®ç°â€‹å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œç»§æ‰¿è‡ª Râ€eActAgentï¼Œå…·ä½“ï»¿å®ç°äº† think å’Œ â€act ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚

æˆ‘ä»¬æœ‰ 3 ç§æ–¹æ¡ˆæ¥å®ç° ToolCallAgentï¼š

1ï¼‰åŸºäº Sï»¿pring AI çš„å·¥â€‹å…·è°ƒç”¨èƒ½åŠ›ï¼Œæ‰‹åŠ¨æ§åˆ¶å·¥å…·â€æ‰§è¡Œã€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚ï»¿â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€

å…¶å® Spring çš„ ChatClient å·²ç»æ”¯æŒé€‰æ‹©å·¥å…·è¿›è¡Œè°ƒç”¨ï¼ˆå†…éƒ¨å®Œæˆäº† thinkã€actã€observeï¼‰ï¼Œä½†è¿™é‡Œæˆ‘ä»¬è¦è‡ªä¸»å®ç°ï¼Œå¯ä»¥ä½¿ç”¨ Spring AI æä¾›çš„ [æ‰‹åŠ¨æ§åˆ¶å·¥å…·æ‰§è¡Œ](https://docs.spring.io/spring-ai/reference/api/tools.html#_user_controlled_tool_execution)ã€‚

2ï¼‰åŸºäº ï»¿Spring AIâ€‹ çš„å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œâ€ç®€åŒ–è°ƒç”¨æµç¨‹ã€‚

ç”±äº Sprï»¿ing AI å®Œå…¨æ‰˜ç®¡äº†â€‹å·¥å…·è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠâ€æ‰€æœ‰å·¥å…·è°ƒç”¨çš„ä»£ç ä½œä¸º ï»¿think æ–¹æ³•ï¼Œè€Œ aâ€ct æ–¹æ³•ä¸å®šä¹‰ä»»ä½•åŠ¨ä½œã€‚

3ï¼‰è‡ªä¸»å®ç°å·¥å…·è°ƒç”¨èƒ½åŠ›ã€‚

ä¹Ÿå°±æ˜¯å·¥å…·è°ƒç”¨ï»¿ç« èŠ‚æåˆ°çš„å®ç°åŸç†ï¼šè‡ªå·±å†™â€‹ Promptï¼Œå¼•å¯¼ AIâ€ å›å¤æƒ³è¦è°ƒç”¨çš„å·¥å…·åˆ—è¡¨å’Œï»¿è°ƒç”¨å‚æ•°ï¼Œç„¶åå†æ‰§è¡Œå·¥å…·å¹¶â€å°†ç»“æœè¿”é€ç»™ AI å†æ¬¡æ‰§è¡Œã€‚

ä½¿ç”¨å“ªç§æ–¹æ¡ˆå‘¢ï¼Ÿ

å¦‚æœæ˜¯ä¸ºäº†å­¦ï»¿ä¹  ReAct æ¨¡å¼ï¼Œè®©â€‹æµç¨‹æ›´æ¸…æ™°ï¼Œæ¨èç¬¬ä¸€ç§ï¼›â€å¦‚æœåªæ˜¯ä¸ºäº†å¿«é€Ÿå®ç°ï¼Œæ¨ï»¿èç¬¬äºŒç§ï¼›ä¸å»ºè®®é‡‡ç”¨ç¬¬ä¸‰â€ç§æ–¹æ¡ˆï¼Œè¿‡äºåŸç”Ÿï¼Œå¼€å‘æˆæœ¬é«˜ã€‚

ä¸‹é¢æˆ‘ä»¬é‡‡ï»¿ç”¨ç¬¬ä¸€ç§æ–¹æ¡ˆå®ç° â€‹ToolCallAâ€gentï¼Œå…ˆå®šä¹‰æ‰€ï»¿éœ€çš„å±æ€§å’Œæ„é€ æ–¹æ³•â€ï¼š

```java
/**  
 * å¤„ç†å·¥å…·è°ƒç”¨çš„åŸºç¡€ä»£ç†ç±»ï¼Œå…·ä½“å®ç°äº† think å’Œ act æ–¹æ³•ï¼Œå¯ä»¥ç”¨ä½œåˆ›å»ºå®ä¾‹çš„çˆ¶ç±»  
 */
@EqualsAndHashCode(callSuper = true)
@Data
@Slf4j
public class ToolCallAgent extends ReActAgent {

// å¯ç”¨çš„å·¥å…·
private final ToolCallback[] availableTools;

// ä¿å­˜äº†å·¥å…·è°ƒç”¨ä¿¡æ¯çš„å“åº”
private ChatResponse toolCallChatResponse;

// å·¥å…·è°ƒç”¨ç®¡ç†è€…
private final ToolCallingManager toolCallingManager;

// ç¦ç”¨å†…ç½®çš„å·¥å…·è°ƒç”¨æœºåˆ¶ï¼Œè‡ªå·±ç»´æŠ¤ä¸Šä¸‹æ–‡
private final ChatOptions chatOptions;

public ToolCallAgent(ToolCallback[] availableTools) {
super();
this.availableTools = availableTools;
this.toolCallingManager = ToolCallingManager.builder().build();
// ç¦ç”¨ Spring AI å†…ç½®çš„å·¥å…·è°ƒç”¨æœºåˆ¶ï¼Œè‡ªå·±ç»´æŠ¤é€‰é¡¹å’Œæ¶ˆæ¯ä¸Šä¸‹æ–‡
this.chatOptions = DashScopeChatOptions.builder()
.withProxyToolCalls(true)
.build();
}
}
```

æ³¨æ„ï¼Œåœ¨ä¸Šè¿°ä»£ç ä¸­ï»¿ï¼Œæˆ‘ä»¬é€šè¿‡å°† DashScopeChâ€‹atOptions çš„ withPrâ€oxyToolCalls é€‰é¡¹è®¾ç½®ä¸ºï»¿ trueï¼Œæ¥ç¦æ­¢ Spring Aâ€I æ‰˜ç®¡å·¥å…·è°ƒç”¨ï¼Œè€Œæ˜¯æˆ‘ä»¬è‡ªä¸»å®ç°ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/EGJoiTueixnROgjz.webp" alt="" width="100%" />


è™½ç„¶å®˜æ–¹æä¾›çš„ç¤ºä¾‹ä»£ç æ˜¯è®¾ï»¿ç½® internalToolExecutionEnaâ€‹bled ä¸º false æ¥ç¦ç”¨ Spring AIâ€ æ‰˜ç®¡å·¥å…·è°ƒç”¨ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é˜¿é‡Œçš„ Dashï»¿ScopeChatModel å¤§æ¨¡å‹å®¢æˆ·ç«¯ï¼Œå¦‚æœæŒ‰ç…§â€ä¸‹é¢çš„æ–¹å¼ï¼Œä¼šç›´æ¥å¯¼è‡´å·¥å…·è°ƒç”¨å¤±æ•ˆï¼

```java
ChatOptions chatOptions = ToolCallingChatOptions.builder()
.toolCallbacks(new CustomerTools())
.internalToolExecutionEnabled(false)
.build();
```

ä¸‹é¢æˆ‘ä»¬å®ï»¿ç° think æ–¹â€‹æ³•ï¼Œä¼ å…¥å·¥å…·åˆ—è¡¨å¹¶â€è°ƒç”¨å¤§æ¨¡å‹ï¼Œå¾—åˆ°éœ€ï»¿è¦è°ƒç”¨çš„å·¥å…·åˆ—è¡¨ï¼š

```java
/**  
 * å¤„ç†å½“å‰çŠ¶æ€å¹¶å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨  
 *  
 * @return æ˜¯å¦éœ€è¦æ‰§è¡Œè¡ŒåŠ¨  
 */
@Override
public boolean think() {
if (getNextStepPrompt() != null && !getNextStepPrompt().isEmpty()) {
UserMessage userMessage = new UserMessage(getNextStepPrompt());
getMessageList().add(userMessage);
}
List<Message> messageList = getMessageList();
Prompt prompt = new Prompt(messageList, chatOptions);
try {
// è·å–å¸¦å·¥å…·é€‰é¡¹çš„å“åº”
ChatResponse chatResponse = getChatClient().prompt(prompt)
.system(getSystemPrompt())
.tools(availableTools)
.call()
.chatResponse();
// è®°å½•å“åº”ï¼Œç”¨äº Act
this.toolCallChatResponse = chatResponse;
AssistantMessage assistantMessage = chatResponse.getResult().getOutput();
// è¾“å‡ºæç¤ºä¿¡æ¯
String result = assistantMessage.getText();
List<AssistantMessage.ToolCall> toolCallList = assistantMessage.getToolCalls();
log.info(getName() + "çš„æ€è€ƒ: " + result);
log.info(getName() + "é€‰æ‹©äº† " + toolCallList.size() + " ä¸ªå·¥å…·æ¥ä½¿ç”¨");
String toolCallInfo = toolCallList.stream()
.map(toolCall -> String.format("å·¥å…·åç§°ï¼š%sï¼Œå‚æ•°ï¼š%s",
toolCall.name(),
toolCall.arguments())
)
.collect(Collectors.joining("\n"));
log.info(toolCallInfo);
if (toolCallList.isEmpty()) {
// åªæœ‰ä¸è°ƒç”¨å·¥å…·æ—¶ï¼Œæ‰è®°å½•åŠ©æ‰‹æ¶ˆæ¯
getMessageList().add(assistantMessage);
return false;
} else {
// éœ€è¦è°ƒç”¨å·¥å…·æ—¶ï¼Œæ— éœ€è®°å½•åŠ©æ‰‹æ¶ˆæ¯ï¼Œå› ä¸ºè°ƒç”¨å·¥å…·æ—¶ä¼šè‡ªåŠ¨è®°å½•
return true;
}
} catch (Exception e) {
log.error(getName() + "çš„æ€è€ƒè¿‡ç¨‹é‡åˆ°äº†é—®é¢˜: " + e.getMessage());
getMessageList().add(
new AssistantMessage("å¤„ç†æ—¶é‡åˆ°é”™è¯¯: " + e.getMessage()));
return false;
}
}
```

æœ€åå®ç° ï»¿act æ–¹æ³•ï¼Œæ‰§è¡Œâ€‹å·¥å…·è°ƒç”¨åˆ—è¡¨ï¼Œå¾—åˆ°â€è¿”å›ç»“æœï¼Œå¹¶å°†å·¥å…·ï»¿çš„å“åº”æ·»åŠ åˆ°æ¶ˆæ¯åˆ—â€è¡¨ä¸­ï¼š

```java
/**  
 * æ‰§è¡Œå·¥å…·è°ƒç”¨å¹¶å¤„ç†ç»“æœ  
 *  
 * @return æ‰§è¡Œç»“æœ  
 */
@Override
public String act() {
if (!toolCallChatResponse.hasToolCalls()) {
return "æ²¡æœ‰å·¥å…·è°ƒç”¨";
}
// è°ƒç”¨å·¥å…·
Prompt prompt = new Prompt(getMessageList(), chatOptions);
ToolExecutionResult toolExecutionResult = toolCallingManager.executeToolCalls(prompt, toolCallChatResponse);
// è®°å½•æ¶ˆæ¯ä¸Šä¸‹æ–‡ï¼ŒconversationHistory å·²ç»åŒ…å«äº†åŠ©æ‰‹æ¶ˆæ¯å’Œå·¥å…·è°ƒç”¨è¿”å›çš„ç»“æœ
setMessageList(toolExecutionResult.conversationHistory());
// å½“å‰å·¥å…·è°ƒç”¨çš„ç»“æœ
ToolResponseMessage toolResponseMessage = (ToolResponseMessage) CollUtil.getLast(toolExecutionResult.conversationHistory());
String results = toolResponseMessage.getResponses().stream()
.map(response -> "å·¥å…· " + response.name() + " å®Œæˆäº†å®ƒçš„ä»»åŠ¡ï¼ç»“æœ: " + response.responseData())
.collect(Collectors.joining("\n"));
log.info(results);
return results;
}
```

æ³¨æ„ç»´æŠ¤æ¶ˆæ¯ä¸Šä¸‹æ–‡ï¼Œä¸è¦é‡å¤æ·»åŠ äº†æ¶ˆæ¯ï¼Œå› ä¸º `toolExecutionResult.conversationHistory()` æ–¹æ³•å·²ç»åŒ…å«äº†åŠ©æ‰‹æ¶ˆæ¯å’Œå·¥å…·è°ƒç”¨è¿”å›çš„ç»“æœã€‚

å¯ä»¥å¸¦çœ‹ä¸‹ toolCallingManager.executeToolCalls çš„æºç ï¼Œä¼šè‡ªåŠ¨è¿½åŠ åŠ©æ‰‹æ¶ˆæ¯åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/5LRrBoyPvs2kAJny.webp" alt="" width="100%" />

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/FlxqTqefcho72bGH.webp" alt="" width="100%" />




åƒä¸‡åˆ«å¿˜äº†ï»¿ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€â€‹ä¸ªç»ˆæ­¢å·¥å…·ï¼Œè®©æ™ºèƒ½â€ä½“å¯ä»¥è‡ªè¡Œå†³å®šä»»ï»¿åŠ¡ç»“æŸã€‚

1ï¼‰åœ¨ tools åŒ…ä¸‹æ–°å»º TerminateToolï¼š

```java
public class TerminateTool {

@Tool(description = """
Terminate the interaction when the request is met OR if the assistant cannot proceed further with the task.
"When you have finished all the tasks, call this tool to end the work.
""")
public String doTerminate() {
return "ä»»åŠ¡ç»“æŸ";
}
}
```

2ï¼‰ä¿®æ”¹ ToolRegistrationï¼Œæ³¨å†Œä¸­æ­¢å·¥å…·ï¼š

```java
TerminateTool terminateTool = new TerminateTool();

return ToolCallbacks.from(
fileOperationTool,
webSearchTool,
webScrapingTool,
resourceDownloadTool,
terminalOperationTool,
pdfGenerationTool,
terminateTool
);
```

3ï¼‰å®Œå–„ ï»¿act æ–¹æ³•ï¼Œå½“è°ƒâ€‹ç”¨äº†ç»ˆæ­¢å·¥å…·æ—¶ï¼Œä¿®â€æ”¹ agent çš„ï»¿çŠ¶æ€ä¸º â€œå·²ç»“æŸâ€â€ï¼š

```java
// å½“å‰å·¥å…·è°ƒç”¨çš„ç»“æœ  
ToolResponseMessage toolResponseMessage = (ToolResponseMessage) CollUtil.getLast(toolExecutionResult.conversationHistory());
String results = toolResponseMessage.getResponses().stream()
.map(response -> "å·¥å…· " + response.name() + " å®Œæˆäº†å®ƒçš„ä»»åŠ¡ï¼ç»“æœ: " + response.responseData())
.collect(Collectors.joining("\n"));
// åˆ¤æ–­æ˜¯å¦è°ƒç”¨äº†ç»ˆæ­¢å·¥å…·  
boolean terminateToolCalled = toolResponseMessage.getResponses().stream()
.anyMatch(response -> "doTerminate".equals(response.name()));
if (terminateToolCalled) {
setState(AgentState.FINISHED);
}
log.info(results);
return results;
```

#### 4ã€å¼€å‘ YuManus ç±»

YuManus æ˜¯ï»¿å¯ä»¥ç›´æ¥æä¾›ç»™å…¶ä»–æ–¹æ³•è°ƒç”¨çš„ AIâ€‹ è¶…çº§æ™ºèƒ½ä½“å®ä¾‹ï¼Œç»§æ‰¿è‡ª Toolâ€CallAgentï¼Œéœ€è¦ç»™æ™ºèƒ½ä½“è®¾ï»¿ç½®å„ç§å‚æ•°ï¼Œæ¯”å¦‚å¯¹è¯å®¢æˆ·ç«¯ chaâ€tClientã€å·¥å…·è°ƒç”¨åˆ—è¡¨ç­‰ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```java
@Component
public class YuManus extends ToolCallAgent {

public YuManus(ToolCallback[] allTools, ChatModel dashscopeChatModel) {
super(allTools);
this.setName("yuManus");
String SYSTEM_PROMPT = """
You are YuManus, an all-capable AI assistant, aimed at solving any task presented by the user.
You have various tools at your disposal that you can call upon to efficiently complete complex requests.
""";
this.setSystemPrompt(SYSTEM_PROMPT);
String NEXT_STEP_PROMPT = """
Based on user needs, proactively select the most appropriate tool or combination of tools.
For complex tasks, you can break down the problem and use different tools step by step to solve it.
After using each tool, clearly explain the execution results and suggest the next steps.
If you want to stop the interaction at any point, use the `terminate` tool/function call.
""";
this.setNextStepPrompt(NEXT_STEP_PROMPT);
this.setMaxSteps(20);
// åˆå§‹åŒ–å®¢æˆ·ç«¯
ChatClient chatClient = ChatClient.builder(dashscopeChatModel)
.defaultAdvisors(new MyLoggerAdvisor())
.build();
this.setChatClient(chatClient);
}
}
```

### æµ‹è¯•æ™ºèƒ½ä½“

ç¼–å†™å•å…ƒæµ‹è¯•ç±»ï¼Œè®©è¶…çº§æ™ºèƒ½ä½“å®Œæˆä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„ä»»åŠ¡ï¼š

```java
@SpringBootTest
class YuManusTest {

@Resource
private YuManus yuManus;

@Test
void run() {
String userPrompt = """
æˆ‘çš„å¦ä¸€åŠå±…ä½åœ¨ä¸Šæµ·é™å®‰åŒºï¼Œè¯·å¸®æˆ‘æ‰¾åˆ° 5 å…¬é‡Œå†…åˆé€‚çš„çº¦ä¼šåœ°ç‚¹ï¼Œ
å¹¶ç»“åˆä¸€äº›ç½‘ç»œå›¾ç‰‡ï¼Œåˆ¶å®šä¸€ä»½è¯¦ç»†çš„çº¦ä¼šè®¡åˆ’ï¼Œ
å¹¶ä»¥ PDF æ ¼å¼è¾“å‡º""";
String answer = yuManus.run(userPrompt);
Assertions.assertNotNull(answer);
}
}
```

ä»¥ Debï»¿ug æ¨¡å¼è¿è¡Œï¼Œèƒ½â€‹å¤ŸæŸ¥çœ‹åˆ° AI æ¯â€ä¸€æ­¥çš„æ€è€ƒè¿‡ç¨‹ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/WLIrziReAJr9zBVA.webp" alt="" width="100%" />


æ‰§è¡Œå®Œæˆåï»¿ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸€æ­¥çš„â€‹æ‰§è¡Œç»“æœï¼Œå¹¶ä¸”å¯ä»¥â€åœ¨æœ¬åœ°æŸ¥çœ‹åˆ°å·²ä¸‹è½½ï»¿çš„å›¾ç‰‡å’Œç”Ÿæˆçš„â€ PDFã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/TOhzfpBAWsewYqJy.webp" alt="" width="100%" />



æ³¨æ„ï¼Œç”±äº AI æ˜¯å­˜åœ¨éšæœºæ€§çš„ï¼Œæ‰§è¡Œçš„æ­¥éª¤æ•°ä¹Ÿä¸å›ºå®šã€‚ç»è¿‡æµ‹è¯•å¤§å®¶ä¼šå‘ç°ï¼Œæ‹¥æœ‰è‡ªä¸»è§„åˆ’èƒ½åŠ›çš„è¶…çº§æ™ºèƒ½ä½“è™½ç„¶èƒ½å¤Ÿå®Œæˆå¤æ‚çš„ä»»åŠ¡ï¼Œä½†ç¼ºç‚¹æ˜¯ **éå¸¸æµªè´¹ tokensï¼Œå¹¶ä¸”å¯èƒ½é™·å…¥æ— é™å¾ªç¯ã€‚** æ‰€ä»¥è¿˜æ˜¯è¦æŒ‰éœ€ä½¿ç”¨ã€‚

æ„Ÿå…´è¶£çš„åŒï»¿å­¦å¯ä»¥å‚è€ƒ Openâ€‹Manus çš„å®ç°æ¥â€è¿›ä¸€æ­¥ä¼˜åŒ–è¶…çº§æ™ºèƒ½ä½“ï»¿ï¼Œæ¯”å¦‚é˜²æ­¢é™·å…¥æ— é™å¾ªâ€ç¯ã€èƒ½å¤Ÿå’Œç”¨æˆ·äº¤äº’ç­‰ã€‚

å…­ã€æ‰©å±•çŸ¥è¯†
------

### æ™ºèƒ½ä½“å·¥ä½œæµ

å½“æˆ‘ä»¬é¢å¯¹å¤æ‚ä»»ï»¿åŠ¡æ—¶ï¼Œå•ä¸€æ™ºèƒ½ä½“å¯èƒ½æ— æ³•æ»¡è¶³éœ€â€‹æ±‚ã€‚å› æ­¤æ™ºèƒ½ä½“å·¥ä½œæµï¼ˆAgenâ€t Workflowï¼‰åº”è¿è€Œç”Ÿï»¿ï¼Œé€šè¿‡ç®€å•çš„ç¼–æ’ï¼Œå…è®¸å¤šä¸ªä¸“ä¸šâ€æ™ºèƒ½ä½“ååŒå·¥ä½œï¼Œå„å¸å…¶èŒã€‚

æ™ºèƒ½ä½“å·¥ä½œæµç¼–æ’çš„ç²¾é«“åœ¨äº **å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºè¿è´¯çš„èŠ‚ç‚¹é“¾**ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç”±æœ€é€‚åˆçš„æ™ºèƒ½ä½“å¤„ç†ï¼ŒèŠ‚ç‚¹é—´é€šè¿‡æ¡ä»¶è·¯ç”±çµæ´»è¿æ¥ï¼Œå½¢æˆä¸€ä¸ªé«˜æ•ˆã€å¯é çš„æ‰§è¡Œç½‘ç»œã€‚

Anthropic æ›¾ç»åœ¨ä¸€ç¯‡ [ç ”ç©¶æŠ¥å‘Šã€ŠBuilding effective agentsã€‹](https://www.anthropic.com/engineering/building-effective-agents?spm=4347728f.4638ae38.0.0.54b97646EY5Jbw) ä¸­æåˆ°äº†å¤šç§ä¸åŒçš„æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼ï¼Œå¤§å®¶éœ€è¦äº†è§£æ¯ç§æ¨¡å¼çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚

#### æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼

1ï¼‰Prompt Chaining æç¤ºé“¾å·¥ä½œæµ

Prompt Cï»¿haining æ˜¯æœ€å¸¸è§çš„æ™ºèƒ½ä½“â€‹å·¥ä½œæµæ¨¡å¼ä¹‹ä¸€ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†â€ä¸€ä¸ªå¤æ‚ä»»åŠ¡æ‹†è§£ä¸ºä¸€ç³»åˆ—æœ‰åºçš„å­ï»¿ä»»åŠ¡ï¼Œæ¯ä¸€æ­¥ç”± LLM å¤„ç†å‰ä¸€â€æ­¥çš„è¾“å‡ºï¼Œé€æ­¥æ¨è¿›ä»»åŠ¡å®Œæˆã€‚

æ¯”å¦‚åœ¨å†…å®¹ç”Ÿæˆï»¿åœºæ™¯ä¸­ï¼Œå¯ä»¥å…ˆè®©æ¨¡å‹ç”Ÿæˆå¤§â€‹çº²ï¼Œå†æ ¹æ®å¤§çº²ç”Ÿæˆè¯¦ç»†å†…å®¹â€ï¼Œæœ€åè¿›è¡Œæ¶¦è‰²å’Œæ ¡å¯¹ã€‚æ¯ä¸€ï»¿æ­¥éƒ½å¯ä»¥æ’å…¥æ ¡éªŒå’Œä¸­é—´æ£€æŸ¥â€ï¼Œç¡®ä¿æµç¨‹æ­£ç¡®ã€è¾“å‡ºæ›´ç²¾å‡†ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/k8OiC4KGZMh7JXLw.webp" alt="" width="100%" />


è¿™ç§æ¨¡å¼ç»“ï»¿æ„æ¸…æ™°ï¼Œæ˜“äºè°ƒè¯•ï¼Œâ€‹éå¸¸é€‚åˆä»»åŠ¡å¯ä»¥è¢«â€è‡ªç„¶åˆ†è§£ä¸ºå¤šä¸ªé˜¶æ®µï»¿çš„åœºæ™¯ã€‚

2ï¼‰Routing è·¯ç”±åˆ†æµå·¥ä½œæµ

Routing ï»¿å·¥ä½œæµæ¨¡å¼åˆ™æ›´åƒæ˜¯ä¸€ä¸ªæ™ºèƒ½çš„è·¯ç”±â€‹å™¨ã€‚ç³»ç»Ÿä¼šæ ¹æ®è¾“å…¥å†…å®¹çš„ç±»å‹â€æˆ–ç‰¹å¾ï¼Œå°†ä»»åŠ¡åˆ†å‘ç»™æœ€åˆé€‚çš„ä¸‹ï»¿æ¸¸æ™ºèƒ½ä½“æˆ–å¤„ç†æµç¨‹ã€‚éå¸¸é€‚åˆå¤šâ€æ ·åŒ–è¾“å…¥å’Œå¤šç§å¤„ç†ç­–ç•¥çš„åœºæ™¯ã€‚

æ¯”å¦‚åœ¨å®¢æœç³»ç»Ÿä¸­ï¼Œï»¿å¯ä»¥å°†å¸¸è§é—®é¢˜ã€é€€æ¬¾è¯·æ±‚ã€æŠ€æœ¯æ”¯æŒç­‰â€‹åˆ†æµåˆ°ä¸åŒçš„å¤„ç†æ¨¡å—ï¼›åœ¨å¤šæ¨¡å‹ç³»ç»Ÿä¸­â€ï¼Œå¯ä»¥å°†ç®€å•é—®é¢˜åˆ†é…ç»™å°æ¨¡å‹ï¼Œå¤æ‚é—®ï»¿é¢˜äº¤ç»™å¤§æ¨¡å‹ã€‚è¿™æ ·æ—¢æé«˜äº†å¤„ç†æ•ˆç‡ï¼Œâ€ä¹Ÿä¿è¯äº†æ¯ç±»é—®é¢˜éƒ½èƒ½å¾—åˆ°æœ€ä¼˜è§£ç­”ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/m4vQ65viDd0EoEAI.webp" alt="" width="100%" />


3ï¼‰Parallelization å¹¶è¡ŒåŒ–å·¥ä½œæµ

åœ¨ Parï»¿allelizatiâ€‹on å¹¶è¡ŒåŒ–æ¨¡å¼ä¸‹ï¼Œâ€ä»»åŠ¡ä¼šè¢«æ‹†åˆ†ä¸ºå¤šä¸ªå¯ï»¿ä»¥å¹¶è¡Œå¤„ç†çš„å­ä»»åŠ¡ï¼Œâ€æœ€åèšåˆå„è‡ªçš„ç»“æœã€‚

æ¯”å¦‚åœ¨ä»£ç å®‰å…¨å®¡æŸ¥åœºæ™¯ï»¿ä¸­ï¼Œå¯ä»¥è®©å¤šä¸ªæ™ºèƒ½ä½“åˆ†åˆ«å¯¹åŒä¸€æ®µä»£ç è¿›è¡Œå®‰å…¨â€‹å®¡æŸ¥ï¼Œæœ€å â€œæŠ•ç¥¨â€ å†³å®šæ˜¯å¦æœ‰é—®é¢˜ã€‚åˆæ¯”å¦‚â€åœ¨å¤„ç†é•¿æ–‡æ¡£æ—¶ï¼Œå¯ä»¥å°†æ–‡æ¡£åˆ†æ®µï¼Œæ¯æ®µç”±ä¸åŒæ™ºï»¿èƒ½ä½“å¹¶è¡Œæ€»ç»“ã€‚è¿™ç§æ¨¡å¼å¯ä»¥æ˜¾è‘—æå‡å¤„ç†é€Ÿåº¦ï¼Œâ€å¹¶é€šè¿‡ â€œæŠ•ç¥¨â€ æœºåˆ¶æå‡ç»“æœçš„å‡†ç¡®åº¦ã€‚


![](https://pic.code-nav.cn/course_picture/1608440217629360130/maM1xZsU42RcIUMF.webp)


4ï¼‰Orcï»¿hestratorâ€‹-Workers â€åè°ƒå™¨-æ‰§è¡Œè€…å·¥ä½œï»¿æµ

å¯¹äºå¤æ‚çš„ä»»åŠ¡ã€å‚ä¸ä»»åŠ¡ï»¿çš„æ™ºèƒ½ä½“å¢å¤šæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä½ â€œç®¡ç†è€…â€ï¼Œä¼šâ€‹æ ¹æ®ä»»åŠ¡åŠ¨æ€æ‹†è§£å‡ºå¤šä¸ªå­ä»»åŠ¡ï¼Œå¹¶å°†è¿™äº›å­ä»»åŠ¡åˆ†é…â€ç»™å¤šä¸ª â€œå·¥äººâ€ æ™ºèƒ½ä½“ï¼Œæœ€åå†æ•´åˆæ‰€æœ‰å·¥äººï»¿çš„ç»“æœã€‚è¿™ç§ä¸­å¤®åè°ƒæœºåˆ¶æé«˜äº†å¤æ‚ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡ï¼Œé€‚â€åˆä»»åŠ¡ç»“æ„ä¸ç¡®å®šã€éœ€è¦åŠ¨æ€åˆ†è§£çš„å¤æ‚åœºæ™¯ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/MBvCSteZa4WE7CPP.webp" alt="" width="100%" />



5ï¼‰Evaï»¿luator-Opâ€‹timizer è¯„â€ä¼°-ä¼˜åŒ–å¾ªç¯å·¥ä½œæµ

Evaluatoï»¿r-Optimizer æ¨¡å¼æ¨¡æ‹Ÿâ€‹äº†äººç±» â€œå†™ => è¯„ => æ”¹â€â€ çš„è¿‡ç¨‹ã€‚ä¸€ä¸ªæ™ºèƒ½ä½“è´Ÿè´£ç”Ÿæˆåˆï»¿æ­¥ç»“æœï¼Œå¦ä¸€ä¸ªæ™ºèƒ½ä½“è´Ÿè´£è¯„ä¼°å’Œåâ€é¦ˆï¼ŒäºŒè€…å¾ªç¯è¿­ä»£ä¼˜åŒ–è¾“å‡ºã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨æœºï»¿å™¨ç¿»è¯‘åœºæ™¯ä¸­ï¼Œå…ˆç”±ç¿»è¯‘æ™ºèƒ½ä½“â€‹è¾“å‡ºï¼Œå†ç”±è¯„å®¡æ™ºèƒ½ä½“ç»™å‡ºæ”¹è¿›â€å»ºè®®ï¼Œåå¤è¿­ä»£ç›´åˆ°è¾¾åˆ°æ»¡æ„ï»¿çš„è´¨é‡ã€‚è¿™ç§æ¨¡å¼ç‰¹åˆ«é€‚åˆéœ€è¦å¤šâ€è½®æ‰“ç£¨å’Œè´¨é‡æå‡çš„ä»»åŠ¡ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/wuZhEo9tB0q03F8G.webp" alt="" width="100%" />


#### æ™ºèƒ½ä½“å·¥ä½œæµç¼–æ’æ¡†æ¶

å¦‚æœè¦å®ç°ä¸Šè¿°å·¥ä½œæµï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ï»¿ç”¨ Activitiã€LiteFlow è¿™ç§å·¥ä½œæµæ¡†æ¶ï¼ŒæŠŠæ™ºèƒ½â€‹ä½“å¤„ç†å½“åšå·¥ä½œæµçš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸“é—¨çš„ AI æ™ºèƒ½ä½“â€å·¥ä½œæµç¼–æ’æ¡†æ¶ï¼Œæ¯”å¦‚ LangGraph å’Œ Spring Aï»¿I Alibaba Graphã€‚è¿™ä¸¤ä¸ªæ¡†æ¶å¤§å®¶ç®€å•äº†è§£ä¸€ä¸‹ï¼Œç›´â€åˆ°æ€ä¹ˆç»„åˆå·¥ä½œæµå³å¯ï¼Œå®é™…å­¦ä¹ æˆæœ¬éƒ½ä¸é«˜ã€‚

**1ï¼‰LangGraph**

[LangGraph](https://github.com/langchain-ai/langgraph) æ˜¯ LangChain å›¢é˜Ÿå¼€å‘çš„å‰æ²¿å·¥ä½œæµç¼–æ’æ¡†æ¶ï¼Œä¸“ä¸ºå¤§è¯­è¨€æ¨¡å‹åº”ç”¨è®¾è®¡ï¼Œæ˜¯æ„å»ºå¤æ‚ AI ç³»ç»Ÿçš„é¦–é€‰å·¥å…·ã€‚LangGraph çš„æ ¸å¿ƒç†å¿µæ˜¯å°†æ™ºèƒ½ä½“å·¥ä½œæµè¡¨ç¤ºä¸ºçŠ¶æ€è½¬æ¢å›¾ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æ˜¯å‡½æ•°ã€æ™ºèƒ½ä½“æˆ–å­å·¥ä½œæµï¼Œè¾¹åˆ™ä»£è¡¨çŠ¶æ€è½¬æ¢æ¡ä»¶ã€‚

ç›¸æ¯”äºä¼ ç»Ÿçš„å·¥ä½œæµæ¡†æ¶ï¼ŒLï»¿angGraph çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå®ƒå¯¹å¤§è¯­è¨€æ¨¡å‹å·¥ä½œæµâ€‹çš„æ·±åº¦ä¼˜åŒ–ã€‚æ¡†æ¶æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½æ¥æ»¡è¶³å¤§æ¨¡å‹åº”ç”¨å¼€å‘â€åœºæ™¯ï¼Œæ¯”å¦‚åŠ¨æ€åˆ†æ”¯å’Œå¹¶è¡Œæ‰§è¡Œã€æ€ç»´é“¾æ”¯æŒã€å¯¹è¯ç®¡ç†ã€ï»¿å†…ç½®ç›‘æ§ä¸å¯è§†åŒ–ç­‰ã€‚å¼€å‘è€…å¯ä»¥è½»æ¾å®ç°å¤æ‚çš„æ¨ç†è·¯å¾„â€ï¼Œè®©æ¨¡å‹åœ¨éœ€è¦æ—¶è¿›è¡Œåæ€ã€è§„åˆ’å’Œçº é”™ã€‚

å‰é¢è®²åˆ°çš„å‡ ç§å·¥ä½œæµæ¨¡å¼ï¼Œä»¥åŠæ™®é€šçš„å·¥å…·è°ƒç”¨ä»£ç†åœºæ™¯ï¼Œä½¿ç”¨ LangGraph éƒ½èƒ½è½»æ¾å®Œæˆï¼Œå…·ä½“ç”¨æ³•å’Œä»£ç ç¤ºä¾‹å¯ä»¥å‚è€ƒ [å®˜æ–¹æ–‡æ¡£](https://langchain-ai.github.io/langgraph/tutorials/workflows/#building-blocks-the-augmented-llm)ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/BSLeAOqLBz74bQUi.webp" alt="" width="100%" />


ä¸‹é¢ç»™å¤§å®¶ä¸€æ®µç®€å•çš„å·¥ä½œæµä»£ç ç¤ºä¾‹ï¼š

```python
from langgraph.graph import StateGraph
from typing import TypedDict, List, Annotated

# å®šä¹‰å·¥ä½œæµçŠ¶æ€
class AgentState(TypedDict):
messages: List[dict]
task: str
context: dict

# åˆ›å»ºçŠ¶æ€å›¾
workflow = StateGraph(AgentState)

# æ·»åŠ èŠ‚ç‚¹
workflow.add_node("understand", understand_task)
workflow.add_node("research", research_information)
workflow.add_node("analyze", analyze_data)
workflow.add_node("generate", generate_response)

# å®šä¹‰è¾¹å’Œæ¡ä»¶
workflow.add_edge("understand", "research")
workflow.add_conditional_edges(
"research",
decide_next_step,
{
"needs_more_info": "research",
"ready_for_analysis": "analyze",
"skip_analysis": "generate"
}
)
workflow.add_edge("analyze", "generate")

# è®¾ç½®èµ·å§‹èŠ‚ç‚¹
workflow.set_entry_point("understand")
```

è¿™æ®µä»£ç åˆ©ç”¨ LangGraph æ¡†æ¶å®šä¹‰ï»¿äº†ä¸€ä¸ªå¤šé˜¶æ®µçš„æ™ºèƒ½ä½“å·¥ä½œæµï¼šé¦–å…ˆé€šè¿‡ AgentState æè¿°äº†æ¯ä¸€æ­¥çš„çŠ¶æ€ç»“æ„â€‹ï¼Œç„¶åç”¨ StateGraph åˆ›å»ºäº†ä¸€ä¸ªçŠ¶æ€æµè½¬å›¾ï¼Œä¾æ¬¡æ·»åŠ äº† â€œç†è§£ä»»åŠ¡â€ã€â€œâ€ä¿¡æ¯æ£€ç´¢â€ã€â€œæ•°æ®åˆ†æâ€ å’Œ â€œç»“æœç”Ÿæˆâ€ å››ä¸ªèŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡æœ‰å‘è¾¹å’Œæ¡ä»¶åˆ†æ”¯å°†å®ƒä»¬ï»¿ä¸²è”èµ·æ¥ï¼Œå®ç°äº†æµç¨‹çš„è·³è½¬å’Œå¾ªç¯ï¼Œæœ€åæŒ‡å®šå·¥ä½œæµä» â€œç†è§£ä»»åŠ¡â€ èŠ‚ç‚¹å¼€å§‹ï¼Œæ•´ä½“ä¸Šâ€å®ç°äº†ä¸€ä¸ªå¯è‡ªåŠ¨å†³ç­–ã€å¯å¾ªç¯çš„æ™ºèƒ½ä½“ä»»åŠ¡å¤„ç†æµç¨‹ã€‚

2ï¼‰Spring AI Alibaba Graph

ç›®å‰ Spring AI å®˜æ–¹è¿˜æ²¡æœ‰æä¾›å·¥ä½œæµç¼–æ’èƒ½åŠ›ï¼Œä½†æ˜¯å›½å†…çš„ Spring AI Alibaba å·²ç»æä¾›äº†å·¥ä½œæµç¼–æ’æ¡†æ¶ [Spring AI Alibaba Graph](https://java2ai.com/blog/spring-ai-alibaba-graph-preview/)ã€‚

è™½ç„¶ç›®å‰è¿˜å¤„äº Demo é˜¶æ®µï¼Œå·²ç»æ”¯æŒäº†ï¼š

*   åŸºç¡€å·¥ä½œæµçš„ç¼–æ’

*   ReAct Agent æ¨¡å¼

*   Orchestrator-Workers åè°ƒå™¨-å·¥ä½œè€…æ¨¡å¼


åƒæˆ‘ä»¬å‰é¢è‡ªï»¿ä¸»å¼€å‘çš„ ReAct æ¨¡â€‹å¼çš„ Manus æ™ºèƒ½ä½“â€ï¼Œä½¿ç”¨ Spring Aï»¿I Alibaba Grâ€aphï¼Œå‡ è¡Œä»£ç å°±æå®šäº†ï¼š

```java
ReactAgent reactAgent = ReactAgent.builder()
.name("React Agent Demo")
.prompt("è¯·å®Œæˆæ¥ä¸‹æ¥ç”¨æˆ·è¾“å…¥ç»™ä½ çš„ä»»åŠ¡ã€‚")
.chatClient(chatClient)
.resolver(resolver)
.maxIterations(10)
.build();

reactAgent.invoke(Map.of("messages", new UserMessage(query)))
```

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®ï»¿é™…æ¡ˆä¾‹æ¥æ„Ÿå—åƒ Spring Aâ€‹I Alibaba Graph â€è¿™ç§æ¡†æ¶çš„ä½œç”¨ï¼Œæ¯”å¦‚ç¼–å†™ä¸€ä¸ªæ•°æ®ï»¿åˆ†æå’Œå¯è§†åŒ–æŠ¥å‘Šç”Ÿæˆä»»åŠ¡çš„å·¥ä½œæµâ€ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š

```java
public AIGraph<String, String> dataAnalysisWorkflow(
PlanningAgent planningAgent,
DataCollectionAgent dataCollectionAgent,
AnalysisAgent analysisAgent,
VisualizationAgent visualizationAgent,
ReportingAgent reportingAgent) {

return AIGraph.builder(String.class, String.class)
// ä»»åŠ¡è§„åˆ’èŠ‚ç‚¹
.addNode("planning", input -> planningAgent.run(input), Map.of(
"success", "data_collection"
))
// æ•°æ®æ”¶é›†èŠ‚ç‚¹
.addNode("data_collection", input -> dataCollectionAgent.run(input), Map.of(
"complete", "analysis",
"incomplete", "planning"
))
// æ•°æ®åˆ†æèŠ‚ç‚¹
.addNode("analysis", input -> analysisAgent.run(input), Map.of(
"success", "visualization",
"failure", "data_collection"
))
// æ•°æ®å¯è§†åŒ–èŠ‚ç‚¹
.addNode("visualization", input -> visualizationAgent.run(input), Map.of(
"success", "reporting"
))
// æŠ¥å‘Šç”ŸæˆèŠ‚ç‚¹
.addNode("reporting", input -> reportingAgent.run(input), Map.of())
.withStartAt("planning")
.build();
}
```

è¿™ä¸ªå·¥ä½œæµå±•ç°äº†æ•°æ®ï»¿åˆ†æçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼šä»è§„åˆ’æ™ºèƒ½ä½“åˆ¶å®šåˆ†â€‹æç­–ç•¥å¼€å§‹ï¼Œåˆ°æ•°æ®æ”¶é›†æ™ºèƒ½ä½“è·å–å¿…è¦æ•°â€æ®ï¼Œç„¶åæ˜¯åˆ†ææ™ºèƒ½ä½“å¤„ç†è¿™äº›æ•°æ®ï¼Œæ¥ç€ï»¿ç”±å¯è§†åŒ–æ™ºèƒ½ä½“åˆ›å»ºç›´è§‚å›¾è¡¨ï¼Œæœ€åç”±æŠ¥å‘Šâ€æ™ºèƒ½ä½“æ•´åˆæ‰€æœ‰å‘ç°ç”Ÿæˆå®Œæ•´æŠ¥å‘Šã€‚

* * *

é™¤äº†ä¸Šé¢è¿™äº›å·¥ä½œæµï»¿å¼€å‘æ¡†æ¶å¤–ï¼Œä¹‹å‰æˆ‘ä»¬è¿˜å­¦ä¹ è¿‡ä¸€ç§å¯è§†â€‹åŒ–çš„æ™ºèƒ½ä½“å·¥ä½œæµå¼€å‘æ–¹æ³• â€”â€” ä½¿ç”¨â€ AI å¤§æ¨¡å‹åº”ç”¨å¼€å‘å¹³å°åˆ›å»ºå·¥ä½œï»¿æµåº”ç”¨ã€‚ç›®å‰å¾ˆå¤šå…¬å¸éƒ½åœ¨ç”¨è¿™ç§æ–¹æ³•æ„å»ºâ€å¤æ‚çš„æ™ºèƒ½ä½“å·¥ä½œæµï¼Œç¡®å®å¾ˆæ–¹ä¾¿~

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/Vrkkn9bVoVFPrYUs.webp" alt="" width="100%" />


### OWL æ¡†æ¶

å‰é¢æåˆ°è¿‡ï»¿ AI æ™ºèƒ½ä½“ä¾èµ–â€‹å·¥å…·è°ƒç”¨èƒ½åŠ›æ¥æ‹“å±•â€èƒ½åŠ›è¾¹ç•Œï¼Œè¿™é‡Œå†ç»™ï»¿å¤§å®¶åˆ†äº«ä¸€ä¸ªå¾ˆå®ç”¨â€çš„å¼€æºé¡¹ç›® OWLã€‚

[OWL (Optimized Workforce Learning)](https://github.com/camel-ai/owl) æ˜¯ç”± CAMEL-AI å›¢é˜Ÿå¼€æºçš„ä¸€æ¬¾é¢å‘ **å¤šæ™ºèƒ½ä½“åä½œä¸çœŸå®ä¸–ç•Œä»»åŠ¡è‡ªåŠ¨åŒ–** çš„å‰æ²¿æ¡†æ¶ã€‚é€šè¿‡ OWLï¼ŒAI æ™ºèƒ½ä½“å¯ä»¥æ‰§è¡Œç»ˆç«¯å‘½ä»¤ã€è®¿é—®ç½‘ç»œèµ„æºã€è¿è¡Œå„ç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç ã€ä½¿ç”¨å„ç§å¼€å‘å·¥å…·ç­‰ç­‰ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/8wp3n7kYmAKEO4cO.webp" alt="" width="100%" />


å®ƒçš„ä¸»è¦ç‰¹ç‚¹ï¼š

*   å¤šæ™ºèƒ½ä½“åä½œï¼šOWL æ”¯æŒå¤šä¸ªæ™ºèƒ½ä½“ä¹‹é—´çš„åŠ¨æ€äº¤äº’ä¸åä½œï¼Œèƒ½å¤Ÿæ¨¡æ‹ŸçœŸå®å›¢é˜Ÿåä½œåœºæ™¯ï¼Œé€‚åˆè§£å†³éœ€è¦å¤šè§’è‰²ã€å¤šæŠ€èƒ½é…åˆçš„å¤æ‚ä»»åŠ¡ã€‚

*   ä¸°å¯Œçš„å·¥å…·é›†æˆï¼šå†…ç½®äº†æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€ä»£ç æ‰§è¡Œã€æ–‡æ¡£å¤„ç†ã€éŸ³è§†é¢‘åˆ†æã€æœç´¢å¼•æ“ç­‰å¤šç§å·¥å…·åŒ…ï¼Œæ”¯æŒå¤šæ¨¡æ€ä»»åŠ¡ï¼ˆå¦‚ç½‘é¡µæ“ä½œã€å›¾ç‰‡/è§†é¢‘/éŸ³é¢‘åˆ†æç­‰ï¼‰ã€‚

*   MCP åè®®æ”¯æŒï¼šé€šè¿‡ MCPï¼ŒOWL èƒ½å¤Ÿä¸å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºæ ‡å‡†åŒ–å¯¹æ¥ï¼Œæå¤§æ‰©å±•äº†æ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¹ç•Œã€‚

*   å¯å®šåˆ¶ä¸æ˜“ç”¨æ€§ï¼šç”¨æˆ·å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚çµæ´»é…ç½®å’Œç»„åˆæ‰€éœ€å·¥å…·ï¼Œä¼˜åŒ–æ€§èƒ½å’Œèµ„æºæ¶ˆè€—ã€‚

*   Web å¯è§†åŒ–ç•Œé¢ï¼šæä¾›åŸºäº Gradio çš„æœ¬åœ° Web UIï¼Œæ”¯æŒæ¨¡å‹é€‰æ‹©ã€ç¯å¢ƒå˜é‡ç®¡ç†ã€äº¤äº’å†å²æŸ¥çœ‹ç­‰åŠŸèƒ½ï¼Œæ–¹ä¾¿å¼€å‘å’Œè°ƒè¯•ã€‚


å…¶å® OWLï»¿ çš„æœ¬è´¨å°±æ˜¯åˆ©ç”¨ AI â€‹æ¥å¢å¼ºä¼ ç»Ÿçš„è‡ªåŠ¨åŒ–åŠå…¬åœºâ€æ™¯ï¼Œåƒè‡ªåŠ¨åŒ–æ•°æ®åˆ†æå’Œå¤„ï»¿ç†ã€è‡ªåŠ¨åŒ–ç½‘é¡µä¿¡æ¯æ£€ç´¢ï¼Œâ€éƒ½èƒ½å¤Ÿç”¨ OWL è½»æ¾å®Œæˆã€‚

ä¸‹å›¾æ˜¯å®˜æ–¹ï»¿ä»‹ç»çš„ Demoï¼ŒOâ€‹WL å¯ä»¥è‡ªåŠ¨æ‰“å¼€æˆ‘â€ä»¬çš„æµè§ˆå™¨è®¿é—®ç½‘é¡µï¼Œï»¿æ‰§è¡Œæ»šåŠ¨ã€ç‚¹å‡»ã€æ‰“å­—â€æ“ä½œï¼Œå¹¶ä¸”å®æ—¶æŠ“å–ç½‘é¡µä¿¡æ¯ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/Kh7sDt9F7j00Pbs0.webp" alt="ã€" width="100%" />


### A2A åè®®


#### ä»€ä¹ˆæ˜¯ A2A åè®®ï¼Ÿ

A2Aï¼ˆAgent to Agentï¼‰ä¹Ÿæ˜¯æœ€è¿‘å¾ˆçƒ­é—¨çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç®€å•æ¥è¯´ï¼Œ[A2A åè®®](https://google.github.io/A2A/) å°±æ˜¯ä¸º â€œæ™ºèƒ½ä½“ä¹‹é—´å¦‚ä½•ç›´æ¥äº¤æµå’Œåä½œâ€ åˆ¶å®šçš„ä¸€å¥—æ ‡å‡†ã€‚

A2A åè®®çš„æ ¸å¿ƒï¼Œæ˜¯è®©æ¯ï»¿ä¸ªæ™ºèƒ½ä½“éƒ½èƒ½åƒ â€œç½‘ç»œèŠ‚ç‚¹â€ ä¸€æ ·ï¼Œæ‹¥æœ‰è‡ªå·±çš„èº«ä»½â€‹ã€èƒ½åŠ›æè¿°å’Œé€šä¿¡æ¥å£ã€‚å®ƒä¸ä»…è§„å®šäº†æ¶ˆæ¯çš„æ ¼å¼å’Œä¼ é€’â€æ–¹å¼ï¼Œè¿˜åŒ…æ‹¬äº†èº«ä»½è®¤è¯ã€èƒ½åŠ›å‘ç°ã€ä»»åŠ¡å§”æ‰˜ã€ç»“æœå›ä¼ ï»¿ç­‰æœºåˆ¶ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ™ºèƒ½ä½“ä¹‹é—´å°±å¯ä»¥åƒäººç±»å›¢é˜Ÿä¸€æ ·â€ï¼Œäº’ç›¸æ‰“æ‹›å‘¼ã€è¯¢é—®å¯¹æ–¹èƒ½åšä»€ä¹ˆã€è¯·æ±‚ååŠ©ã€‚

å¯ä»¥æŠŠ A2A ç±»æ¯”ä¸ºæ™ºèƒ½ä½“ä¸–ï»¿ç•Œé‡Œçš„ HTTPåè®®ï¼ŒHTTP åè®®è®©å…¨çƒä¸åŒæœåŠ¡å™¨å’Œç”µè„‘ä¹‹â€‹é—´èƒ½å¤Ÿäº¤æ¢æ•°æ®ï¼ŒA2A åè®®åˆ™æ˜¯è®©ä¸åŒå‚å•†ã€ä¸åŒå¹³å°ã€ä¸åŒèƒ½â€åŠ›çš„æ™ºèƒ½ä½“èƒ½å¤Ÿåƒå›¢é˜Ÿæˆå‘˜ä¸€æ ·äº’ç›¸ç†è§£ã€åä½œå’Œåˆ†å·¥ã€‚å¦‚æœè¯´ Hï»¿TTP åè®®è®©äº’è”ç½‘æˆä¸ºäº†ä¸€ä¸ªå¼€æ”¾ã€äº’è”çš„ä¸–ç•Œï¼Œé‚£ä¹ˆ A2Aâ€ åè®®åˆ™è®©æ™ºèƒ½ä½“ä¸–ç•Œå˜å¾—å¼€æ”¾ã€åä½œå’Œé«˜æ•ˆã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/PcO9jKM6WidOL7vy.webp" alt="" width="100%" />



#### A2A åè®®çš„åº”ç”¨åœºæ™¯

A2A åè®®çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæ€»ç»“ä¸‹æ¥ 4 ä¸ªå­—å°±æ˜¯ **å¼€æ”¾äº’è”**ã€‚æ¯”å¦‚åœ¨è‡ªåŠ¨é©¾é©¶é¢†åŸŸï¼Œä¸åŒè½¦è¾†çš„æ™ºèƒ½ä½“å¯ä»¥å®æ—¶äº¤æ¢è·¯å†µä¿¡æ¯ï¼ŒååŒé¿éšœå’Œè§„åˆ’è·¯çº¿ï¼›åœ¨åˆ¶é€ è½¦é—´ï¼Œç”Ÿäº§çº¿ä¸Šçš„å„ç±»æœºå™¨äººæ™ºèƒ½ä½“å¯ä»¥æ ¹æ®ä»»åŠ¡åŠ¨æ€åˆ†å·¥ï¼Œäº’ç›¸è¡¥ä½ï¼›åœ¨é‡‘èé£æ§ã€æ™ºèƒ½å®¢æœç­‰åœºæ™¯ï¼Œä¸åŒçš„æ™ºèƒ½ä½“å¯ä»¥æ ¹æ®è‡ªèº«ä¸“é•¿åä½œå¤„ç†å¤æ‚ä¸šåŠ¡æµç¨‹ã€‚

æˆ‘ä»¬è¿˜å¯ä»¥å¤§èƒ†æƒ³è±¡ï»¿ï¼Œæœªæ¥å¼€å‘è€…å¯ä»¥åƒè°ƒç”¨äº‘æœåŠ¡ä¸€æ ·ï¼Œâ€‹æŒ‰éœ€ç§Ÿç”¨æˆ–ç»„åˆä¸åŒçš„æ™ºèƒ½ä½“æœåŠ¡ï¼Œç”šâ€è‡³å®ç°æ™ºèƒ½ä½“ä¹‹é—´çš„è‡ªåŠ¨äº¤æ˜“å’Œç»“ç®—ã€‚ï»¿ç›®å‰å…¶å®å°±æœ‰å¾ˆå¤šæ™ºèƒ½ä½“å¹³å°ï¼Œåªä¸è¿‡â€æ™ºèƒ½ä½“ä¹‹é—´çš„è¿æ¥åä½œç”šå°‘ã€‚

#### å’Œ MCP åè®®çš„åŒºåˆ«

è™½ç„¶ A2ï»¿A å’Œ MCP éƒ½â€‹ç®—æ˜¯åè®®ï¼ˆæˆ–è€…æ ‡å‡†â€ï¼‰ï¼Œä½†äºŒè€…å­˜åœ¨æœ¬è´¨ä¸Šï»¿çš„åŒºåˆ«ã€‚

MCP åè®®æ˜¯ **æ™ºèƒ½ä½“å’Œå¤–éƒ¨å·¥å…·ä¹‹é—´çš„æ ‡å‡†**ï¼Œå®ƒè§„å®šäº†æ™ºèƒ½ä½“å¦‚ä½•å®‰å…¨ã€è§„èŒƒåœ°è°ƒç”¨å¤–éƒ¨çš„æ•°æ®åº“ã€æœç´¢å¼•æ“ã€ä»£ç æ‰§è¡Œç­‰å·¥å…·èµ„æºã€‚ä½ å¯ä»¥æŠŠ MCP ç†è§£ä¸º â€œæ™ºèƒ½ä½“-å·¥å…·â€ çš„ HTTP åè®®ã€‚

è€Œ A2A åè®®åˆ™æ˜¯ **æ™ºèƒ½ä½“ä¹‹é—´çš„é€šä¿¡åè®®**ã€‚å®ƒæ›´åƒæ˜¯è®©ä¸åŒçš„ AI è§’è‰²ä¹‹é—´å¯ä»¥ç›´æ¥å¯¹è¯ã€åä½œå’Œåˆ†å·¥ã€‚

ä»å®‰å…¨è§’åº¦ï»¿çœ‹ï¼ŒMCP å’Œ Aâ€‹2A å¤„ç†çš„æ˜¯ä¸åŒâ€å±‚é¢çš„å®‰å…¨é—®é¢˜ï¼š

*   MCP çš„å®‰å…¨å…³æ³¨ç‚¹ï¼šä¸»è¦é›†ä¸­åœ¨å•ä¸ªæ™ºèƒ½ä½“ä¸å·¥å…·ä¹‹é—´çš„å®‰å…¨äº¤äº’ï¼Œä¸»è¦é˜²èŒƒçš„æ˜¯å·¥å…·æ»¥ç”¨å’Œæç¤ºè¯æ³¨å…¥æ”»å‡»ã€‚

*   A2A çš„å®‰å…¨å…³æ³¨ç‚¹ï¼šæ›´å…³æ³¨æ™ºèƒ½ä½“ç½‘ç»œä¸­çš„èº«ä»½è®¤è¯ã€æˆæƒå’Œä¿¡ä»»é“¾ã€‚A2A éœ€è¦è§£å†³â€œæˆ‘æ€ä¹ˆçŸ¥é“æˆ‘åœ¨å’Œè°é€šä¿¡â€ã€â€œè¿™ä¸ªæ™ºèƒ½ä½“æœ‰æƒé™è¯·æ±‚è¿™é¡¹ä»»åŠ¡å—â€ã€â€œå¦‚ä½•é˜²æ­¢æ¶æ„æ™ºèƒ½ä½“çªƒå–æˆ–ç¯¡æ”¹ä»»åŠ¡æ•°æ®â€ ç­‰é—®é¢˜ã€‚ï¼ˆè¿™äº›é—®é¢˜ä¹Ÿæ˜¯ HTTP åè®®éœ€è¦è€ƒè™‘çš„ï¼‰


æ˜¾ç„¶ï¼ŒA2ï»¿A é¢ä¸´çš„å®‰å…¨æŒ‘æˆ˜â€‹æ›´åŠ å¤æ‚ï¼Œå› ä¸ºå®ƒå¤„â€ç†çš„æ˜¯è·¨ç½‘ç»œã€è·¨å¹³ï»¿å°ã€å¤šæ–¹åä½œçš„åœºæ™¯â€ã€‚

å¯¹äºä¸€ä¸ªæˆç†Ÿçš„ï»¿æ™ºèƒ½ä½“ç³»ç»Ÿï¼Œå¯èƒ½ä¼šåŒæ—¶è¿ç”¨â€‹ MCP å’Œ A2Aï¼ŒMCâ€P è´Ÿè´£æŸä¸ªæ™ºèƒ½ä½“å†…éƒ¨è°ƒç”¨ï»¿å·¥å…·å®Œæˆä»»åŠ¡ï¼ŒA2A è´Ÿè´£â€æ™ºèƒ½ä½“ä¹‹é—´ååŒå®Œæˆä»»åŠ¡ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/7t0N8BatRyAI6x6q.webp" alt="" width="100%" />


ç›®å‰ A2A åè®®çš„è½åœ°å¹¶ä¸æˆç†Ÿï¼Œæš‚æ—¶å¤§å®¶ä¹Ÿä¸å¿…å…³æ³¨å¦‚ä½•è¿›è¡Œ A2A çš„å¼€å‘ï¼Œäº†è§£å®ƒæ˜¯ä»€ä¹ˆã€æœ‰ä»€ä¹ˆç”¨å°±è¶³å¤Ÿäº†ã€‚æ„Ÿå…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥é˜…è¯» [è¿™ç¯‡æ–‡ç« ](https://mp.weixin.qq.com/s/XbrsS2SatIV-6hXc5yj_Wg) æ¥äº†è§£ A2A åè®®çš„å®ç°ç»†èŠ‚å’Œäº¤äº’æµç¨‹ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/jb0lISDWXcprdx2x.webp" alt="" width="100%" />


æ‰©å±•æ€è·¯
----

1ï¼‰ç»™æ™ºèƒ½ï»¿ä½“æ·»åŠ å¾ªç¯æ£€æµ‹å’Œå¤„â€‹ç†æœºåˆ¶ï¼Œé˜²æ­¢æ™ºèƒ½ä½“â€é™·å…¥æ— é™å¾ªç¯ã€‚

å¯ä»¥å‚è€ƒ OpenManus æºç å®ç°ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```java
private int duplicateThreshold = 2;

/**  
 * å¤„ç†é™·å…¥å¾ªç¯çš„çŠ¶æ€  
 */
protected void handleStuckState() {
String stuckPrompt = "è§‚å¯Ÿåˆ°é‡å¤å“åº”ã€‚è€ƒè™‘æ–°ç­–ç•¥ï¼Œé¿å…é‡å¤å·²å°è¯•è¿‡çš„æ— æ•ˆè·¯å¾„ã€‚";
this.nextStepPrompt = stuckPrompt + "\n" + (this.nextStepPrompt != null ? this.nextStepPrompt : "");
System.out.println("Agent detected stuck state. Added prompt: " + stuckPrompt);
}

/**  
 * æ£€æŸ¥ä»£ç†æ˜¯å¦é™·å…¥å¾ªç¯  
 *  
 * @return æ˜¯å¦é™·å…¥å¾ªç¯  
 */
protected boolean isStuck() {
List<Message> messages = this.memory.getMessages();
if (messages.size() < 2) {
return false;
}

Message lastMessage = messages.get(messages.size() - 1);
if (lastMessage.getContent() == null || lastMessage.getContent().isEmpty()) {
return false;
}

// è®¡ç®—é‡å¤å†…å®¹å‡ºç°æ¬¡æ•°
int duplicateCount = 0;
for (int i = messages.size() - 2; i >= 0; i--) {
Message msg = messages.get(i);
if (msg.getRole() == Role.ASSISTANT &&
lastMessage.getContent().equals(msg.getContent())) {
duplicateCount++;
}
}

return duplicateCount >= this.duplicateThreshold;
}

// æ¯ä¸€æ­¥ step æ‰§è¡Œå®Œéƒ½è¦æ£€æŸ¥æ˜¯å¦é™·å…¥å¾ªç¯  
if (isStuck()) {
handleStuckState();
}
```

2ï¼‰æ™ºèƒ½ä½“ï»¿æ”¯æŒäº¤äº’å¼æ‰§è¡Œï¼Œå¯â€‹ä»¥å‘ç”¨æˆ·è¯¢é—®ä¿¡æ¯æˆ–â€è·å–åé¦ˆï¼Œä»è€Œä¼˜åŒ–ï»¿ä»»åŠ¡çš„å®Œæˆæ•ˆæœã€‚

å®ç°æ€è·¯å¯ä»¥ï»¿å‚è€ƒ OpenManuâ€‹sï¼Œä¸“é—¨å®šä¹‰ä¸€ä¸ª Asâ€kHuman å·¥å…·ï¼Œè®©ï»¿ AI è‡ªä¸»å†³å®šä»€ä¹ˆæ—¶â€å€™éœ€è¦å¯»æ±‚äººç±»å¸®åŠ©ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/tJHzvM9pmfVQhmsC.webp" alt="" width="100%" />


å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ç¼–å†™ Prompt å®ç°ï¼Œæ¯”å¦‚ Prompt ä¸­æåˆ° â€œå¦‚æœä½ è®¤ä¸ºéœ€è¦å‘äººç±»å¯»æ±‚å¸®åŠ©ï¼Œè¾“å‡ºç»“æœä¸­éœ€è¦åŒ…å« [ASK_USER]{å¯»æ±‚å¸®åŠ©çš„å…·ä½“é—®é¢˜}â€ï¼Œå¹¶ä¸”æ£€æŸ¥æ¯ä¸€æ¡ AI ç»™å‡ºçš„æ¶ˆæ¯ï¼Œå¦‚æœåŒ…å«äº† ASK_USER æ ‡è®°ï¼Œå°±é€šè¿‡ç³»ç»Ÿæ§åˆ¶å°å’Œç”¨æˆ·äº¤äº’ã€‚

ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```java
public boolean think() {
boolean shouldAct = super.think();

// è·å–æœ€æ–°çš„åŠ©æ‰‹æ¶ˆæ¯
Message lastMessage = getMessageList().get(getMessageList().size() - 1);
if (lastMessage instanceof AssistantMessage) {
String content = lastMessage.getContent();

// æ£€æŸ¥æ˜¯å¦åŒ…å«å‘ç”¨æˆ·è¯¢é—®çš„æ ‡è®°
if (content.contains("[ASK_USER]")) {
// æå–é—®é¢˜
String question = content.substring(content.indexOf("[ASK_USER]") + 10);

// å‘ç”¨æˆ·è¾“å‡ºé—®é¢˜
System.out.println("æ™ºèƒ½ä½“éœ€è¦ä½ çš„å¸®åŠ©: " + question);

// è·å–ç”¨æˆ·è¾“å…¥
Scanner scanner = new Scanner(System.in);
String userAnswer = scanner.nextLine();

// æ·»åŠ ç”¨æˆ·å›ç­”åˆ°æ¶ˆæ¯åˆ—è¡¨
UserMessage userResponse = new UserMessage("ç”¨æˆ·å›ç­”: " + userAnswer);
getMessageList().add(userResponse);

// éœ€è¦ç»§ç»­æ€è€ƒ
return true;
}
}

return shouldAct;
}
```

3ï¼‰å¼€å‘æ”¯æŒ MCP åè®®çš„è¶…çº§æ™ºèƒ½ä½“

æ€è·¯ï¼šå…¶å®åˆ©ï»¿ç”¨ Spring AIï¼Œâ€‹åªéœ€è¦æŠŠ MCP æœåŠ¡ä¸­â€çš„å·¥å…·æå–å‡ºæ¥å˜æˆå·¥å…·åˆ—ï»¿è¡¨ï¼Œå°±å¯ä»¥å¤ç”¨å·²æœ‰çš„ Tâ€oolCallAgent äº†

4ï¼‰è‡ªè¡Œå¼€ï»¿å‘ä¸€ä¸ªç‰¹å®šé¢†åŸŸçš„è¶…â€‹çº§æ™ºèƒ½ä½“ï¼Œå¯ä»¥ç›´æ¥â€ç»§æ‰¿ ToolCaï»¿llAgent å®â€ç°

5ï¼‰å‚è€ƒ OpenManus çš„æºç ï¼Œå®ç°æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ â€œè§„åˆ’å¹¶æ‰§è¡Œâ€ æ¨¡å¼çš„æ™ºèƒ½ä½“å·¥ä½œæµï¼ˆå‚è€ƒ `flow/planning.py`ï¼‰

æœ¬èŠ‚ä½œä¸š
----

1ï¼‰å®Œæˆ AI è¶…çº§æ™ºèƒ½ä½“çš„å¼€å‘

2ï¼‰ç†è§£ ï»¿AI è¶…çº§æ™ºèƒ½ä½“çš„â€‹å®ç°åŸç†å’Œæ¶æ„è®¾è®¡â€ï¼Œè¦æ±‚èƒ½å¤Ÿå£è¿°è®²æ¸…ï»¿æ¥š

3ï¼‰å°è¯•è‡ªï»¿ä¸»é˜…è¯» OpenMaâ€‹nus çš„æºç ï¼Œæ€è€ƒâ€å¦‚ä½•è¿›ä¸€æ­¥ä¼˜åŒ–æˆ‘ä»¬çš„ï»¿ç¨‹åºï¼Œå»ºè®®å¤šåˆ©ç”¨ Aâ€I å·¥å…·è¾…åŠ©å­¦ä¹ ç†è§£b:T2df0,ä¸€ã€é¡¹ç›®ä»‹ç»
------

> è§†é¢‘ä»‹ç»ï¼šhttps://www.bilibili.com/video/BV1UoLezKEbm

è¿™æ˜¯ä¸€å¥—ä»¥ AI å¼€å‘å®æˆ˜ä¸ºæ ¸å¿ƒçš„é¡¹ç›®æ•™ç¨‹ï¼Œå°†é€šè¿‡å¼€å‘ **AI æ‹çˆ±å¤§å¸ˆåº”ç”¨ + æ‹¥æœ‰è‡ªä¸»è§„åˆ’èƒ½åŠ›çš„è¶…çº§æ™ºèƒ½ä½“**ï¼Œå¸¦å¤§å®¶æŒæ¡æ–°æ—¶ä»£ç¨‹åºå‘˜å¿…çŸ¥å¿…ä¼šçš„ AI æ ¸å¿ƒæ¦‚å¿µã€AI å®ç”¨å·¥å…·ã€AI ç¼–ç¨‹æŠ€æœ¯ã€AI æ¡†æ¶åŸç†ã€AI è°ƒä¼˜æŠ€å·§ï¼Œå¤§å¹…å¢åŠ æ±‚èŒçš„ç«äº‰åŠ›ï¼

![](https://pic.code-nav.cn/course_picture/1601072287388278786/tusZgfaZ3diXWP4e.webp)

AI æ‹çˆ±å¤§å¸ˆåº”ç”¨å¯ä»¥ä¾èµ– AI å¤§æ¨¡å‹è§£å†³ç”¨æˆ·çš„æƒ…æ„Ÿé—®é¢˜ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ã€åŸºäºè‡ªå®šä¹‰çŸ¥è¯†åº“è¿›è¡Œé—®ç­”ã€è‡ªä¸»è°ƒç”¨å·¥å…·å’Œ MCP æœåŠ¡å®Œæˆä»»åŠ¡ï¼Œæ¯”å¦‚è°ƒç”¨åœ°å›¾æœåŠ¡è·å–é™„è¿‘åœ°ç‚¹å¹¶åˆ¶å®šçº¦ä¼šè®¡åˆ’ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/Km70yqctawJBbZdq.webp" alt="" width="100%" />


æ­¤å¤–ï¼Œè¿˜ä¼šæ‰‹æŠŠæ‰‹å¸¦å¤§å®¶å®ŒæˆåŸºäº ReAct æ¨¡å¼çš„è‡ªä¸»è§„åˆ’æ™ºèƒ½ä½“ YuManusï¼Œå¯ä»¥åˆ©ç”¨ç½‘é¡µæœç´¢ã€èµ„æºä¸‹è½½å’Œ PDF ç”Ÿæˆå·¥å…·ï¼Œå¸®ç”¨æˆ·åˆ¶å®šå®Œæ•´çš„çº¦ä¼šè®¡åˆ’å¹¶ç”Ÿæˆæ–‡æ¡£ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/KzsXzr3E8WPsfpwp.webp" alt="" width="100%" />


å½“ç„¶ï¼Œå­¦ä¼šè¿™ä¸ªé¡¹ç›®åï¼Œä½ ä¸ä»…èƒ½å¼€å‘ AI æ‹çˆ±å¤§å¸ˆï¼Œè€Œæ˜¯èƒ½çµæ´»å¼€å‘å„ç§å¤æ‚çš„ AI åº”ç”¨ï¼Œå°½æƒ…å‘æŒ¥è‡ªå·±çš„æƒ³è±¡åŠ›å§ï¼

äºŒã€é¡¹ç›®ä¼˜åŠ¿
------

### é¡¹ç›®æ”¶è·

æœ¬é¡¹ç›®é€‰é¢˜æ–°é¢–ã€ä¸šåŠ¡çœŸå®ï¼ŒåŒºåˆ«äºå¢åˆ æ”¹æŸ¥çš„ â€œçƒ‚å¤§è¡—â€ é¡¹ç›®ï¼Œé±¼çš®ä¼šå¸¦ä½ å®æˆ˜å¤§é‡æ–°æŠ€æœ¯å’Œä¼ä¸šåº”ç”¨åœºæ™¯ï¼Œç”¨ä¸€å¥—å®æˆ˜æ•™ç¨‹å°†ç¨‹åºå‘˜å¿…çŸ¥å¿…ä¼šçš„ **AI æŠ€æœ¯ä¸€ç½‘æ‰“å°½**ï¼Œå¸®ä½ æˆä¸º AI æ—¶ä»£ä¼ä¸šçš„é¦™é¥½é¥½ï¼Œç»™ä½ çš„ç®€å†å’Œæ±‚èŒå¤§å¹…å¢åŠ ç«äº‰åŠ›ã€‚

é±¼çš®ç»™å¤§å®¶è®²çš„éƒ½æ˜¯ **é€šç”¨çš„é¡¹ç›®å¼€å‘æ–¹æ³•å’Œæ¶æ„è®¾è®¡å¥—è·¯**ï¼Œä»è¿™ä¸ªé¡¹ç›®ä¸­ä½ å°†å­¦åˆ°ï¼š

- ä¸»æµ AI åº”ç”¨å¹³å°çš„ä½¿ç”¨
- AI å¤§æ¨¡å‹çš„ 4 ç§æ¥å…¥æ–¹å¼
- AI å¼€å‘æ¡†æ¶ï¼ˆSpring AI + LangChain4jï¼‰
- AI å¤§æ¨¡å‹æœ¬åœ°éƒ¨ç½²
- Prompt å·¥ç¨‹å’Œä¼˜åŒ–æŠ€å·§
- Spring AI æ ¸å¿ƒç‰¹æ€§ï¼šå¦‚è‡ªå®šä¹‰ Advisorã€å¯¹è¯è®°å¿†ã€ç»“æ„åŒ–è¾“å‡º
- RAG çŸ¥è¯†åº“å®æˆ˜ã€åŸç†å’Œè°ƒä¼˜æŠ€å·§
- PgVector å‘é‡æ•°æ®åº“ + äº‘æ•°æ®åº“æœåŠ¡
- Tool Calling å·¥å…·è°ƒç”¨å®æˆ˜åŠåŸç†
- MCP æ¨¡å‹ä¸Šä¸‹æ–‡åè®®å’ŒæœåŠ¡å¼€å‘
- AI æ™ºèƒ½ä½“ Manus åŸç†å’Œè‡ªä¸»å¼€å‘
- AI æœåŠ¡åŒ–å’Œ Serverless éƒ¨ç½²ä¸Šçº¿
- å„ç§æ–°æ¦‚å¿µï¼šå¦‚å¤šæ¨¡æ€ã€æ™ºèƒ½ä½“å·¥ä½œæµã€A2A åè®®ã€å¤§æ¨¡å‹è¯„ä¼°ç­‰

ä¸¾ä¸ªä¾‹å­ï¼ŒRAG æ ¸å¿ƒç‰¹æ€§å®æˆ˜åŠå…¨é“¾è·¯è°ƒä¼˜ï¼š

![](https://pic.code-nav.cn/course_picture/1601072287388278786/HmtDpUcqNyKWhsjR.webp)

é¡¹ç›®è¿˜æœ‰å…¶ä»–ä¼˜åŠ¿ï¼š

*   AI äº‘å¹³å°å’Œç¼–ç¨‹åŒç«¯å®æˆ˜ï¼Œä¸ä»…ä¼šç”¨ AI æœåŠ¡ï¼Œè¿˜ä¼šè‡ªå·±å†™ï¼
*   åŸºäºå®˜æ–¹æ–‡æ¡£è®²è§£æœ€æ–°çš„ AI æŠ€æœ¯ï¼Œç»†è‡´å…¥å¾®ï¼Œæ‰‹æ’•æ–‡æ¡£å’Œæºç ï¼
*   åˆ†äº«å¤§é‡ AI æ‰©å±•çŸ¥è¯†å’Œç¼–ç¨‹æŠ€å·§ï¼ŒæŒæ¡æœ€ä½³å®è·µï¼

é±¼çš®å¸¦ä½ æ‰‹æ’•å¼€æºæ¡†æ¶ OpenManus çš„æºç ï¼š

![](https://pic.code-nav.cn/course_picture/1601072287388278786/j0sqFFUWmuO6MHDr.webp)

æ­¤å¤–ï¼Œè¿˜èƒ½å­¦ä¼šå¾ˆå¤šä½œå›¾ã€æ€è€ƒé—®é¢˜ã€å¯¹æ¯”æ–¹æ¡ˆçš„æ–¹æ³•ï¼Œæå‡æ’æŸ¥é—®é¢˜ã€è‡ªä¸»è§£å†³ Bug çš„èƒ½åŠ›ã€‚

### é±¼çš®ç³»åˆ—é¡¹ç›®ä¼˜åŠ¿

é±¼çš®åŸåˆ›é¡¹ç›®ç³»åˆ—ä»¥ **å®æˆ˜** ä¸ºä¸»ï¼Œç”¨ **å…¨ç¨‹ç›´æ’­** çš„æ–¹å¼ï¼Œ**ä» 0 åˆ° 1** å¸¦å¤§å®¶å­¦ä¹ æŠ€æœ¯çŸ¥è¯†ï¼Œå¹¶ç«‹å³å®è·µè¿ç”¨åˆ°é¡¹ç›®ä¸­ï¼Œåšåˆ°å­¦ä»¥è‡´ç”¨ã€‚

æ­¤å¤–ï¼Œè¿˜æä¾›å¦‚ä¸‹æœåŠ¡ï¼š

*   è¯¦ç»†çš„æ–‡å­—æ•™ç¨‹æˆ–ç›´æ’­ç¬”è®°
*   å®Œæ•´çš„é¡¹ç›®æºç 
*   1 å¯¹ 1 ç­”ç–‘è§£æƒ‘
*   ä¸“å±é¡¹ç›®äº¤æµç¾¤
*   â­ï¸ ç°æˆçš„ç®€å†å†™æ³•ï¼ˆç›´æ¥å†™æ»¡ç®€å†ï¼‰
*   â­ï¸ é¡¹ç›®çš„æ‰©å±•æ€è·¯ï¼ˆæ‹‰å¼€å’Œå…¶ä»–äººçš„å·®è·ï¼‰
*   â­ï¸ é¡¹ç›®ç›¸å…³é¢è¯•é¢˜ã€é¢˜è§£å’ŒçœŸå®é¢ç»ï¼ˆæå‰å‡†å¤‡ï¼Œé¢è¯•ä¸æ‡µé€¼ï¼‰
*   â­ï¸ å‰ç«¯ + Java åç«¯ä¸‡ç”¨é¡¹ç›®æ¨¡æ¿ï¼ˆå¿«é€Ÿåˆ›å»ºé¡¹ç›®ï¼‰

æ¯”èµ·çœ‹ç½‘ä¸Šçš„æ•™ç¨‹å­¦ä¹ ï¼Œé±¼çš®é¡¹ç›®ç³»åˆ—çš„ä¼˜åŠ¿ï¼šä»å­¦çŸ¥è¯† => å®è·µé¡¹ç›® => å¤ä¹ ç¬”è®° => é¡¹ç›®ç­”ç–‘ => ç®€å†å†™æ³• => é¢è¯•é¢˜è§£çš„ä¸€æ¡é¾™æœåŠ¡

ä»éœ€æ±‚åˆ†æã€æŠ€æœ¯é€‰å‹ã€é¡¹ç›®è®¾è®¡ã€é¡¹ç›®åˆå§‹åŒ–ã€Demo ç¼–å†™ã€å‰åç«¯å¼€å‘å®ç°ã€é¡¹ç›®ä¼˜åŒ–ã€éƒ¨ç½²ä¸Šçº¿ç­‰ï¼Œæ¯ä¸ªç¯èŠ‚æˆ‘éƒ½ **ä»ç†è®ºåˆ°å®è·µ** ç»™å¤§å®¶è®²çš„æ˜æ˜ç™½ç™½ã€æ¯ä¸ªç»†èŠ‚éƒ½ä¸æ”¾è¿‡ï¼

| å¯¹æ¯”ç»´åº¦ | è·Ÿå­¦é±¼çš®é¡¹ç›® | è‡ªå­¦ç½‘ä¸Šå…è´¹é¡¹ç›® | â­ï¸ é±¼çš®é¡¹ç›®ä¼˜åŠ¿ |
| --- | --- | --- | --- |
| é¡¹ç›®é€‰é¢˜ | âœ… é€‰é¢˜æ–°é¢–ï¼Œåˆ»æ„é¿å¼€ç½‘ä¸Šçƒ­é—¨é¡¹ç›® | ä¼ ç»Ÿé¡¹ç›®åœºæ™¯ï¼ˆåšå®¢ã€å•†åŸã€ç®¡ç†ç³»ç»Ÿï¼‰ | å¢åŠ åŒºåˆ†åº¦ï¼Œæé«˜ç®€å†é€šè¿‡ç‡
å­¦ä¹ äººæ•° | âœ… å°‘ï¼Œä¸å®¹æ˜“æ’è½¦ | ç™¾ä¸‡ä»¥ä¸Šï¼Œçƒ‚å¤§è¡— | å¢åŠ åŒºåˆ†åº¦ï¼Œæé«˜ç®€å†é€šè¿‡ç‡
æ•™å­¦æ–¹å¼ | âœ… å…¨ç¨‹ç›´æ’­ï¼Œå¸¦ä½ æ•²æ¯ä¸€è¡Œä»£ç ã€å¸¦ä½ è¸©å‘å’Œè§£å†³ Bugï¼Œä¸æ¼è¿‡æ¯ä¸€ä¸ªç»†èŠ‚ | å½•åˆ¶è¯¾ç¨‹ï¼Œè§†é¢‘è™½ç„¶çœ‹èµ·æ¥ç®€çŸ­ã€ä¸€å¸†é£é¡ºï¼Œä½†ä½ é‡åˆ°é”™è¯¯æ— ä»ä¸‹æ‰‹ | é™ä½å­¦ä¹ é—¨æ§›ï¼Œå‡å°‘å­¦ä¹ æ—¶é•¿
ç›´æ’­ç¬”è®° | âœ… è¯¦ç»†çš„å®˜æ–¹ç¬”è®° + ç²¾é€‰å­¦å‘˜ä¼˜è´¨ç¬”è®° | æœ‰ç¬”è®°ï¼Œä½†æœªç»ç­›é€‰ | å­¦åˆ°æ›´å¤šçŸ¥è¯†ç»†èŠ‚
è§†é¢‘å†…å®¹ | âœ… é¡¹ç›®æ•™ç¨‹ + ç»éªŒåˆ†äº« | é¡¹ç›®æ•™ç¨‹ | å­¦åˆ°æ›´å¤šç¼–ç¨‹ç»éªŒ
é¡¹ç›®æºç  | âœ… å®Œæ•´æºç ä»“åº“ + æ¯ç« çš„æäº¤è®°å½• + å®šæœŸæ›´æ–° | åªæœ‰ä»£ç åŒ…ã€ä¸æ›´æ–° | èŠ‚çœæ—¶é—´ï¼Œé¿å…è¸©å‘
é¡¹ç›®ç­”ç–‘ | âœ… å„é¡¹ç›®äº¤æµç¾¤ + ç­”ç–‘è§£æƒ‘ + å¸¸è§é—®é¢˜æ•´ç† | æ— å…è´¹çš„ç­”ç–‘æœåŠ¡ï¼Œé‡åˆ°é—®é¢˜è‡ªè¡Œè§£å†³ | èŠ‚çœæ—¶é—´
ç®€å†å†™æ³• | âœ… ç°æˆçš„ç®€å†å†™æ³• | æ—  | èŠ‚çœæ—¶é—´ã€æé«˜ç®€å†é€šè¿‡ç‡
é¡¹ç›®æ‰©å±• | âœ… ç»™å‡ºæ‰©å±•æ€è·¯ + å­¦å‘˜ä½œå“å…±äº« | æ—  | å¼€æ‹“æ€è·¯ã€æ‹‰å¼€å’Œå…¶ä»–äººçš„å·®è·
é¡¹ç›®é¢è¯• | âœ… é¡¹ç›®ç›¸å…³é¢è¯•é¢˜ã€é¢˜è§£å’ŒçœŸå®é¢ç» | æ—  | æå‰å‡†å¤‡ï¼Œé¢è¯•ä¸æ‡µé€¼ |

ç¼–ç¨‹å¯¼èˆªå·²æœ‰ **10 å¤šå¥—é¡¹ç›®æ•™ç¨‹ï¼**æ¯ä¸ªé¡¹ç›®çš„å­¦ä¹ é‡ç‚¹ä¸åŒï¼Œå‡ ä¹å…¨éƒ½æ˜¯å‰ç«¯ + åç«¯çš„ **å…¨æ ˆé¡¹ç›®** ã€‚

è¯¦ç»†è¯·è§ï¼š[https://codefather.cn/course](https://www.codefather.cn/course)ï¼ˆåœ¨è¯¥é¡µé¢å³ä¾§æœ‰æ•™ç¨‹æ¨èå’Œå­¦ä¹ å»ºè®®ï¼‰

å¾€æœŸé¡¹ç›®ä»‹ç»è§†é¢‘ï¼š[https://bilibili.com/video/BV1YvmbYbEgS](https://www.bilibili.com/video/BV1YvmbYbEgS/)

ä¸‰ã€é¡¹ç›®åŠŸèƒ½æ¢³ç†
--------

é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†å¼€å‘ä¸€ä¸ª AI æ‹çˆ±å¤§å¸ˆåº”ç”¨ã€ä¸€ä¸ªæ‹¥æœ‰è‡ªä¸»è§„åˆ’èƒ½åŠ›çš„è¶…çº§æ™ºèƒ½ä½“ï¼Œä»¥åŠä¸€ç³»åˆ—å·¥å…·å’Œ MCP æœåŠ¡ã€‚

å…·ä½“éœ€æ±‚å¦‚ä¸‹ï¼š

*   AI æ‹çˆ±å¤§å¸ˆåº”ç”¨ï¼šç”¨æˆ·åœ¨æ‹çˆ±è¿‡ç¨‹ä¸­éš¾å…é‡åˆ°å„ç§éš¾é¢˜ï¼Œè®© AI ä¸ºç”¨æˆ·æä¾›è´´å¿ƒæƒ…æ„ŸæŒ‡å¯¼ã€‚æ”¯æŒå¤šè½®å¯¹è¯ã€å¯¹è¯è®°å¿†æŒä¹…åŒ–ã€RAG çŸ¥è¯†åº“æ£€ç´¢ã€å·¥å…·è°ƒç”¨ã€MCP æœåŠ¡è°ƒç”¨ã€‚
*   AI è¶…çº§æ™ºèƒ½ä½“ï¼šå¯ä»¥æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚ï¼Œè‡ªä¸»æ¨ç†å’Œè¡ŒåŠ¨ï¼Œç›´åˆ°å®Œæˆç›®æ ‡ã€‚
*   æä¾›ç»™ AI çš„å·¥å…·ï¼šåŒ…æ‹¬è”ç½‘æœç´¢ã€æ–‡ä»¶æ“ä½œã€ç½‘é¡µæŠ“å–ã€èµ„æºä¸‹è½½ã€ç»ˆç«¯æ“ä½œã€PDF ç”Ÿæˆã€‚
*   AI MCP æœåŠ¡ï¼šå¯ä»¥ä»ç‰¹å®šç½‘ç«™æœç´¢å›¾ç‰‡ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/s7NKJ2QAUEFDeczw.webp)

å››ã€æŠ€æœ¯é€‰å‹
------

é¡¹ç›®ä»¥ Spring AI å¼€å‘æ¡†æ¶å®æˆ˜ä¸ºæ ¸å¿ƒï¼Œæ¶‰åŠåˆ°å¤šç§ä¸»æµ AI å®¢æˆ·ç«¯å’Œå·¥å…·åº“çš„è¿ç”¨ã€‚

- Java 21 + Spring Boot 3 æ¡†æ¶
- â­ï¸ Spring AI + LangChain4j
- â­ï¸ RAG çŸ¥è¯†åº“
- â­ï¸ PGvector å‘é‡æ•°æ®åº“
- â­ Tool Calling å·¥å…·è°ƒç”¨
- â­ï¸ MCP æ¨¡å‹ä¸Šä¸‹æ–‡åè®®
- â­ï¸ ReAct Agent æ™ºèƒ½ä½“æ„å»º
- â­ï¸ Serverless è®¡ç®—æœåŠ¡
- â­ï¸ AI å¤§æ¨¡å‹å¼€å‘å¹³å°ç™¾ç‚¼
- â­ï¸ Cursor AI ä»£ç ç”Ÿæˆ
- â­ï¸ SSE å¼‚æ­¥æ¨é€
- ç¬¬ä¸‰æ–¹æ¥å£ï¼šå¦‚ SearchAPI / Pexels API
- Ollama å¤§æ¨¡å‹éƒ¨ç½²
- å·¥å…·åº“å¦‚ï¼šKryo é«˜æ€§èƒ½åºåˆ—åŒ– + Jsoup ç½‘é¡µæŠ“å– + iText PDF ç”Ÿæˆ + Knife4j æ¥å£æ–‡æ¡£


![](https://pic.code-nav.cn/course_picture/1608440217629360130/4ZHiiBYScGzqlhrJ.webp "RAG æ ¸å¿ƒç‰¹æ€§å®æˆ˜")

äº”ã€æ¶æ„è®¾è®¡
------

ä»å®¢æˆ·ç«¯å‘é€è¯·æ±‚å¼€å§‹ï¼Œè‡ªä¸Šè€Œä¸‹ç»è¿‡ä¸€ç³»åˆ—å¤„ç†ï¼Œæœ€ç»ˆå¾—åˆ°å“åº”ç»“æœã€‚æ¶æ„å›¾å¦‚ä¸‹ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/ObqFdEyvrFaiVY3m.webp "null")

å…­ã€å‡†å¤‡å·¥ä½œ
------

### AI åŸºç¡€çŸ¥è¯†

è¯·å…ˆè§‚çœ‹ã€Šç¨‹åºå‘˜é±¼çš® AI æŒ‡å—ã€‹ï¼Œäº†è§£ AI åŸºç¡€çŸ¥è¯†å’Œå­¦ä¹ è·¯çº¿ï¼Œåç»­åœ¨é¡¹ç›®ä¸­å®æˆ˜æ—¶ä¼šæœ‰ä¸ªå¤§è‡´çš„å°è±¡ï¼Œä¾¿äºå­¦ä¹ ç†è§£ã€‚

â­ï¸ æ¨èè§‚çœ‹è§†é¢‘ç‰ˆï¼š[https://www.bilibili.com/video/BV1i9Z8YhEja](https://www.bilibili.com/video/BV1i9Z8YhEja/)

æ–‡å­—ç‰ˆï¼š[https://www.codefather.cn/course/1907378983347892226](https://www.codefather.cn/course/1907378983347892226)

### æ–°å»ºä»£ç ä»“åº“

åˆ©ç”¨ GitHub æ­å»ºå¼€æºä»£ç ä»“åº“ï¼Œç‚¹ star çš„éƒ½æ˜¯ç²¾ç¥è‚¡ä¸œ

ä»£ç ä»“åº“ï¼š[https://github.com/liyupi/yu-ai-agent](https://github.com/liyupi/yu-ai-agent)

### AI å­¦ä¹ èµ„æº

å»ºè®®å¤§å®¶åœ¨å­¦ä¹  AI é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼ŒæŒç»­é˜…è¯» AI å¤§æ¨¡å‹ç›¸å…³çš„é¢è¯•é¢˜ï¼Œå·©å›ºçŸ¥è¯†ç‚¹ã€‚è¿™å—é±¼çš®å·²ç»å¸®å¤§å®¶æ‹¿æäº†ï¼Œæˆ‘ä»¬çš„ç¨‹åºå‘˜é¢è¯•åˆ·é¢˜ç¥å™¨é¢è¯•é¸­æäº†ä¸ª [AI å¤§æ¨¡å‹é¢è¯•é¢˜åº“](https://www.mianshiya.com/bank/1906189461556076546)ï¼Œå»ºè®®æ²¡äº‹å°±é˜…è¯»ä¸€äº›é¢˜ç›®æ¥å­¦ä¹ å­¦ä¹ ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/FkB81WCudfqaC00P.webp)

è€Œä¸”ç”±äº AI æŠ€æœ¯æ—¥æ–°æœˆå¼‚ï¼Œå»ºè®®å¤§å®¶å¹³æ—¶å¤šå…³æ³¨ AI ç›¸å…³çš„èµ„è®¯åŠ¨æ€ï¼Œæ¯”å¦‚ [é±¼çš®å¼€æºçš„ AI çŸ¥è¯†åº“](https://github.com/liyupi/ai-guide)ï¼Œæ±‡æ€»äº†çƒ­é—¨çš„ AI å¤§æ¨¡å‹å’Œå·¥å…·ï¼Œæ¯”å¦‚ Deepseek ä½¿ç”¨æŒ‡å—ã€æç¤ºè¯æŠ€å·§åˆ†äº«ã€çŸ¥è¯†å¹²è´§ã€åº”ç”¨åœºæ™¯ã€AI å˜ç°ã€è¡Œä¸šèµ„è®¯ã€æ•™ç¨‹èµ„æºç­‰ä¸€ç³»åˆ—å†…å®¹ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŒæ¡ AI æŠ€æœ¯ï¼Œèµ°åœ¨æ—¶ä»£å‰æ²¿ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/xKcJrlWaXE7Xynib.webp)

ä¸ƒã€å­¦ä¹ å¤§çº²
------

ç¬¬ 1 æœŸï¼šé¡¹ç›®æ€»è§ˆ

*   é¡¹ç›®ä»‹ç»
*   é¡¹ç›®ä¼˜åŠ¿
*   é¡¹ç›®åŠŸèƒ½æ¢³ç†
*   æŠ€æœ¯é€‰å‹
*   æ¶æ„è®¾è®¡
*   AI å­¦ä¹ è·¯çº¿

*   AI åº”ç”¨å¹³å°çš„ä½¿ç”¨ï¼ˆDifyï¼‰
*   AI å¸¸ç”¨å·¥å…·
*   AI ç¼–ç¨‹æŠ€å·§
*   AI ç¼–ç¨‹æŠ€æœ¯

*   å­¦ä¹ å¤§çº²

ç¬¬ 2 æœŸï¼šAI å¤§æ¨¡å‹æ¥å…¥

*   AI å¤§æ¨¡å‹æ¦‚å¿µ
*   æ¥å…¥ AI å¤§æ¨¡å‹ï¼ˆ3 ç§æ–¹å¼ï¼‰
*   åç«¯é¡¹ç›®åˆå§‹åŒ–
*   ç¨‹åºè°ƒç”¨ AI å¤§æ¨¡å‹ï¼ˆ4 ç§æ–¹å¼ï¼‰
*   æœ¬åœ°éƒ¨ç½² AI å¤§æ¨¡å‹
*   Spring AI è°ƒç”¨æœ¬åœ°å¤§æ¨¡å‹


ç¬¬ 3 æœŸï¼šAI åº”ç”¨å¼€å‘

*   Prompt å·¥ç¨‹æ¦‚å¿µ
*   Prompt ä¼˜åŒ–æŠ€å·§
*   AI æ‹çˆ±å¤§å¸ˆåº”ç”¨éœ€æ±‚åˆ†æ
*   AI æ‹çˆ±å¤§å¸ˆåº”ç”¨æ–¹æ¡ˆè®¾è®¡
*   Spring AI ChatClient / Advisor / ChatMemory ç‰¹æ€§
*   å¤šè½®å¯¹è¯ AI åº”ç”¨å¼€å‘
*   Spring AI è‡ªå®šä¹‰ Advisor
*   Spring AI ç»“æ„åŒ–è¾“å‡º - æ‹çˆ±æŠ¥å‘ŠåŠŸèƒ½
*   Spring AI å¯¹è¯è®°å¿†æŒä¹…åŒ–
*   Spring AI Prompt æ¨¡æ¿ç‰¹æ€§
*   å¤šæ¨¡æ€æ¦‚å¿µå’Œå¼€å‘

ç¬¬ 4 æœŸï¼šRAG çŸ¥è¯†åº“åŸºç¡€

*   AI æ‹çˆ±çŸ¥è¯†é—®ç­”éœ€æ±‚åˆ†æ
*   RAG æ¦‚å¿µï¼ˆé‡ç‚¹ç†è§£æ ¸å¿ƒæ­¥éª¤ï¼‰
*   RAG å®æˆ˜ï¼šSpring AI + æœ¬åœ°çŸ¥è¯†åº“
*   RAG å®æˆ˜ï¼šSpring AI + äº‘çŸ¥è¯†åº“æœåŠ¡

ç¬¬ 5 æœŸï¼šRAG çŸ¥è¯†åº“è¿›é˜¶

*   RAG æ ¸å¿ƒç‰¹æ€§

*   æ–‡æ¡£æ”¶é›†å’Œåˆ‡å‰²ï¼ˆETLï¼‰
*   å‘é‡è½¬æ¢å’Œå­˜å‚¨ï¼ˆå‘é‡æ•°æ®åº“ï¼‰
*   æ–‡æ¡£è¿‡æ»¤å’Œæ£€ç´¢ï¼ˆæ–‡æ¡£æ£€ç´¢å™¨ï¼‰
*   æŸ¥è¯¢å¢å¼ºå’Œå…³è”ï¼ˆä¸Šä¸‹æ–‡æŸ¥è¯¢å¢å¼ºå™¨ï¼‰

*   RAG æœ€ä½³å®è·µå’Œè°ƒä¼˜
*   æ£€ç´¢ç­–ç•¥
*   å¤§æ¨¡å‹å¹»è§‰

ç¬¬ 6 æœŸï¼šå·¥å…·è°ƒç”¨

*   å·¥å…·æ¦‚å¿µ
*   Spring AI å·¥å…·å¼€å‘
*   ä¸»æµå·¥å…·å¼€å‘

*   æ–‡ä»¶æ“ä½œ
*   è”ç½‘æœç´¢
*   ç½‘é¡µæŠ“å–
*   ç»ˆç«¯æ“ä½œ
*   èµ„æºä¸‹è½½
*   PDF ç”Ÿæˆ

*   å·¥å…·è¿›é˜¶çŸ¥è¯†ï¼ˆåŸç†å’Œé«˜çº§ç‰¹æ€§ï¼‰

ç¬¬ 7 æœŸï¼šMCP

*   MCP æ¦‚å¿µ
*   ä½¿ç”¨ MCPï¼ˆ3 ç§æ–¹å¼ï¼‰
*   Spring AI MCP å¼€å‘æ¨¡å¼
*   Spring AI MCP å¼€å‘å®æˆ˜ - å›¾ç‰‡æœç´¢ MCP
*   MCP å¼€å‘æœ€ä½³å®è·µ
*   éƒ¨ç½² MCP
*   MCP å®‰å…¨é—®é¢˜

ç¬¬ 8 æœŸï¼šAI æ™ºèƒ½ä½“æ„å»º

*   AI æ™ºèƒ½ä½“æ¦‚å¿µ
*   æ™ºèƒ½ä½“å®ç°å…³é”®
*   ä½¿ç”¨ AI æ™ºèƒ½ä½“ï¼ˆ2 ç§æ–¹å¼ï¼‰
*   è‡ªä¸»è§„åˆ’æ™ºèƒ½ä½“ä»‹ç»
*   OpenManus å®ç°åŸç†
*   è‡ªä¸»å®ç° Manus æ™ºèƒ½ä½“
*   æ™ºèƒ½ä½“å·¥ä½œæµ

ç¬¬ 9 æœŸï¼šAI æœåŠ¡åŒ–

*   AI åº”ç”¨æ¥å£å¼€å‘ï¼ˆSSEï¼‰
*   AI æ™ºèƒ½ä½“æ¥å£å¼€å‘
*   AI ç”Ÿæˆå‰ç«¯ä»£ç 
*   AI æœåŠ¡ Serverless éƒ¨ç½²e:T130e8,æœ¬èŠ‚é‡ç‚¹
----

å­¦ä¹  AI æ™ºèƒ½ä½“çš„æ¦‚ï»¿å¿µå’Œæ„å»ºæ–¹æ³•ï¼ŒæŒæ¡å¦‚ä½•å®ç°å…·æœ‰è‡ªä¸»å†³ç­–èƒ½åŠ›çš„â€‹ AI ç³»ç»Ÿã€‚é€šè¿‡ CoT æ€ç»´é“¾ã€ReAcâ€t æ¨¡å¼ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œæ·±å…¥ç†è§£æ™ºèƒ½ä½“çš„å·¥ä½œåŸç†ï»¿ï¼Œå¹¶å‚è€ƒ OpenManus å¼€æºæ¡†æ¶å®æˆ˜å¼€â€å‘èƒ½å¤Ÿè‡ªä¸»è§„åˆ’æ‰§è¡Œä»»åŠ¡çš„ AI æ™ºèƒ½ä½“ã€‚

å…·ä½“å†…å®¹åŒ…æ‹¬ï¼š

*   AI æ™ºèƒ½ä½“æ¦‚å¿µä¸ç‰¹ç‚¹

*   æ™ºèƒ½ä½“å®ç°å…³é”®æŠ€æœ¯

*   ä½¿ç”¨ AI æ™ºèƒ½ä½“çš„å¤šç§æ–¹å¼

*   OpenManus å®ç°åŸç†

*   è‡ªä¸»å®ç° Manus æ™ºèƒ½ä½“

*   æ™ºèƒ½ä½“å·¥ä½œæµç¼–æ’

*   A2A åè®®


ä¸€ã€ä»€ä¹ˆæ˜¯æ™ºèƒ½ä½“ï¼Ÿ
---------

æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæ„ŸçŸ¥ç¯å¢ƒã€è¿›è¡Œæ¨ç†ã€åˆ¶å®šè®¡åˆ’ã€åšå‡ºå†³ç­–å¹¶è‡ªä¸»é‡‡å–è¡ŒåŠ¨ä»¥å®ç°ç‰¹å®šç›®æ ‡çš„ AI ç³»ç»Ÿã€‚å®ƒä»¥å¤§è¯­è¨€æ¨¡å‹ä¸ºæ ¸å¿ƒï¼Œé›†æˆ **è®°å¿†ã€çŸ¥è¯†åº“å’Œå·¥å…·** ç­‰èƒ½åŠ›ä¸ºä¸€ä½“ï¼Œæ„é€ äº†å®Œæ•´çš„å†³ç­–èƒ½åŠ›ã€æ‰§è¡Œèƒ½åŠ›å’Œè®°å¿†èƒ½åŠ›ï¼Œå°±åƒä¸€ä¸ªæœ‰ä¸»è§‚èƒ½åŠ¨æ€§çš„äººç±»ä¸€æ ·ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/2lxYItZML09s2igb.webp" alt="" width="566px" />


ä¸æ™®é€šçš„ AI å¤§æ¨¡å‹ä¸åŒï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿï¼š

1.  æ„ŸçŸ¥ç¯å¢ƒï¼šé€šè¿‡å„ç§è¾“å…¥æ¸ é“è·å–ä¿¡æ¯ï¼ˆå¤šæ¨¡æ€ï¼‰ï¼Œç†è§£ç”¨æˆ·éœ€æ±‚å’Œç¯å¢ƒçŠ¶æ€

2.  è‡ªä¸»è§„åˆ’ä»»åŠ¡æ­¥éª¤ï¼šå°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å­ä»»åŠ¡ï¼Œå¹¶è®¾è®¡æ‰§è¡Œé¡ºåº

3.  ä¸»åŠ¨è°ƒç”¨å·¥å…·å®Œæˆä»»åŠ¡ï¼šæ ¹æ®éœ€è¦é€‰æ‹©å¹¶ä½¿ç”¨å„ç§å¤–éƒ¨å·¥å…·å’Œ APIï¼Œæ‰©å±•è‡ªèº«èƒ½åŠ›è¾¹ç•Œ

4.  è¿›è¡Œå¤šæ­¥æ¨ç†ï¼šé€šè¿‡æ€ç»´é“¾ï¼ˆChain of Thoughtï¼‰é€æ­¥åˆ†æé—®é¢˜å¹¶æ¨å¯¼è§£å†³æ–¹æ¡ˆ

5.  æŒç»­å­¦ä¹ å’Œè®°å¿†è¿‡å»çš„äº¤äº’ï¼šä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ï¼Œåˆ©ç”¨å†å²äº¤äº’æ”¹è¿›å†³ç­–

6.  æ ¹æ®ç¯å¢ƒåé¦ˆè°ƒæ•´è¡Œä¸ºï¼šæ ¹æ®æ‰§è¡Œç»“æœåŠ¨æ€è°ƒæ•´ç­–ç•¥ï¼Œå®ç°é—­ç¯ä¼˜åŒ–


å¤§å¤šæ•°åŒå­¦ï»¿ç¬¬ä¸€æ¬¡æ„Ÿå—åˆ°æ™ºèƒ½ä½“â€‹åº”è¯¥æ˜¯ â€œæ·±åº¦æ€è€ƒâ€â€ åŠŸèƒ½ï¼Œè¿™æ˜¯ Aï»¿I é€æ­¥æ™ºèƒ½åŒ–çš„ä½“â€ç°ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/6iiHrTsygYzTs18M.webp" alt="" width="100%" />



AI ä¼šåƒäººç±»ä¸€æ ·å…ˆæ€è€ƒåå›ç­”ï¼Œè®©ç­”æ¡ˆæ›´å‡†ç¡®ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/rfG1nm0l2Icg4wgO.webp" alt="" width="100%" />


### æ™ºèƒ½ä½“çš„åˆ†ç±»

è·Ÿäººçš„ç”Ÿé•¿ï»¿é˜¶æ®µä¸€æ ·ï¼Œæ™ºèƒ½ä½“ä¹Ÿâ€‹æ˜¯å¯ä»¥ä¸æ–­è¿›åŒ–çš„ã€‚â€æŒ‰ç…§è‡ªä¸»æ€§å’Œè§„åˆ’èƒ½ï»¿åŠ›ï¼Œæ™ºèƒ½ä½“å¯ä»¥åˆ†ä¸ºâ€å‡ ä¸ªå±‚æ¬¡ï¼š

1ï¼‰ååº”å¼æ™ºèƒ½ï»¿ä½“ï¼šä»…æ ¹æ®å½“å‰è¾“å…¥å’Œå›ºå®šè§„åˆ™â€‹åšå‡ºååº”ï¼Œç±»ä¼¼ç®€å•çš„èŠå¤©æœºå™¨â€äººï¼Œæ²¡æœ‰çœŸæ­£çš„è§„åˆ’èƒ½åŠ›ã€‚23ï»¿ å¹´æ—¶çš„å¤§å¤šæ•° AI èŠå¤©æœºâ€å™¨äººåº”ç”¨ï¼Œå‡ ä¹éƒ½æ˜¯ååº”å¼æ™ºèƒ½ä½“ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/YedTUYLHJAUmZfCY.webp" alt="" width="100%" />





2ï¼‰æœ‰é™è§„åˆ’æ™ºèƒ½ä½“ï¼šèƒ½è¿›è¡Œç®€å•åœ°å¤šæ­¥éª¤æ‰§è¡Œï¼Œä½†æ‰§è¡Œè·¯å¾„é€šå¸¸æ˜¯é¢„è®¾çš„æˆ–æœ‰ä¸¥æ ¼é™åˆ¶çš„ã€‚é‰´å®šä¸º â€œèƒ½å¹²äº‹ã€ä½†å¹²ä¸äº†å¤æ‚çš„å¤§äº‹â€ã€‚24 å¹´æµè¡Œçš„å¾ˆå¤šå¯è”ç½‘æœç´¢å†…å®¹ã€è°ƒç”¨çŸ¥è¯†åº“å’Œå·¥å…·çš„ AI åº”ç”¨ï¼Œéƒ½å±äºè¿™ç±»æ™ºèƒ½ä½“ã€‚æ¯”å¦‚ ChatGPT + Pluginsï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/FpaTTBb5urP0pT8z.webp" alt="" width="100%" />


3ï¼‰è‡ªä¸»è§„åˆ’æ™ºèƒ½ä½“ï»¿ï¼šä¹Ÿå«ç›®æ ‡å¯¼å‘æ™ºèƒ½ä½“ï¼Œèƒ½å¤Ÿæ ¹æ®ä»»åŠ¡â€‹ç›®æ ‡è‡ªä¸»åˆ†è§£ä»»åŠ¡ã€åˆ¶å®šè®¡åˆ’ã€é€‰æ‹©å·¥â€å…·å¹¶ä¸€æ­¥æ­¥æ‰§è¡Œï¼Œç›´åˆ°å®Œæˆä»»åŠ¡ã€‚â€‚â€‚ï»¿â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‰â€

æ¯”å¦‚ 25 å¹´åˆå¾ˆç«çš„ Mï»¿anus é¡¹ç›®ï¼Œå®ƒçš„æ ¸å¿ƒäº®ç‚¹åœ¨äºå…¶ â€œè‡ªä¸»æ‰§è¡Œâ€ èƒ½â€‹åŠ›ã€‚æ®å®˜æ–¹ä»‹ç»ï¼ŒManus èƒ½å¤Ÿåœ¨è™šæ‹Ÿæœºä¸­è°ƒç”¨å„â€ç§å·¥å…·ï¼ˆå¦‚ç¼–å†™ä»£ç ã€çˆ¬å–æ•°æ®ï¼‰å®Œæˆä»»åŠ¡ã€‚å…¶åº”ç”¨åœºæ™¯ï»¿è¦†ç›–æ—…è¡Œè§„åˆ’ã€è‚¡ç¥¨åˆ†æã€æ•™è‚²å†…å®¹ç”Ÿæˆç­‰ 40 ä½™ä¸ªâ€é¢†åŸŸï¼Œæ‰€ä»¥åœ¨å½“æ—¶ç»™äº†å¾ˆå¤šäººéœ‡æ’¼æ„Ÿã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/Dd2lPC7JMKUm3wn8.webp" alt="" width="100%" />


ä½†å…¶å®æ—©åœ¨è¿™ä¹‹å‰ï¼Œå°±æœ‰ç±»ä¼¼çš„é¡¹ç›®äº†ï¼Œæ¯”å¦‚ AutoGPTï¼Œæ‰€ä»¥ Manus å¤§ç«çš„åŒæ—¶ä¹Ÿè¢«äººè¯Ÿç—… â€œä¼šè¥é”€è€Œå·²â€ã€‚ç”šè‡³æ²¡éš”å¤šä¹…å°±æœ‰å°å›¢é˜Ÿå¼€æºäº† Manus çš„å¤åˆ»ç‰ˆ â€”â€” [OpenManus](https://github.com/FoundationAgents/OpenManus)ï¼Œè¿™ç±»æ™ºèƒ½ä½“é€šè¿‡ â€œæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿâ€ çš„å¾ªç¯æ¨¡å¼å·¥ä½œï¼Œèƒ½å¤ŸæŒç»­æ¨è¿›ä»»åŠ¡ç›´è‡³å®Œæˆç›®æ ‡ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/0rAwfy7x9i5Ljk3q.webp" alt="" width="100%" />


éœ€è¦æ³¨æ„ï¼Œè‡ªä¸»ï»¿è§„åˆ’èƒ½åŠ›æ˜¯æ™ºèƒ½ä½“å‘å±•çš„é‡è¦â€‹æ–¹å‘ï¼Œä½†å¹¶éæ‰€æœ‰åº”ç”¨åœºæ™¯éƒ½â€éœ€è¦å®Œå…¨çš„è‡ªä¸»è§„åˆ’èƒ½åŠ›ã€‚åœ¨ï»¿æŸäº›åœºæ™¯ä¸­ï¼Œé™åˆ¶æ™ºèƒ½ä½“çš„è‡ªâ€ä¸»æ€§åè€Œèƒ½æé«˜æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚

äºŒã€æ™ºèƒ½ä½“å®ç°å…³é”®æŠ€æœ¯
-----------

åœ¨è‡ªä¸»å¼€å‘ï»¿æ™ºèƒ½ä½“å‰ï¼Œæˆ‘ä»¬è¦å…ˆâ€‹äº†è§£ä¸€ä¸‹æ™ºèƒ½ä½“çš„å…³â€é”®å®ç°æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯ï»¿æ–¹æ¡ˆè®¾è®¡é˜¶æ®µåšçš„äº‹â€æƒ…ã€‚

### CoT æ€ç»´é“¾

CoTï¼ˆChain ofï»¿ Thoughtï¼‰æ€ç»´é“¾æ˜¯ä¸€ç§è®© AI åƒäººç±»ä¸€â€‹æ · â€œæ€è€ƒâ€ çš„æŠ€æœ¯ï¼Œå¸®åŠ© AI åœ¨å¤„ç†å¤æ‚é—®é¢˜â€æ—¶èƒ½å¤ŸæŒ‰æ­¥éª¤æ€è€ƒã€‚å¯¹äºå¤æ‚çš„æ¨ç†ç±»é—®é¢˜ï¼Œå…ˆæ€è€ƒåï»¿æ‰§è¡Œï¼Œæ•ˆæœå¾€å¾€æ›´å¥½ã€‚è€Œä¸”è¿˜å¯ä»¥è®©æ¨¡å‹åœ¨ç”Ÿæˆç­”æ¡ˆæ—¶â€å±•ç¤ºæ¨ç†è¿‡ç¨‹ï¼Œä¾¿äºæˆ‘ä»¬ç†è§£å’Œä¼˜åŒ– AIã€‚

CoT çš„å®ç°æ–¹å¼å…¶å®å¾ˆç®€å•ï»¿ï¼Œå¯ä»¥åœ¨è¾“å…¥ Prompt æ—¶ï¼Œç»™æ¨¡å‹æä¾›é¢å¤–çš„æç¤ºæˆ–â€‹å¼•å¯¼ï¼Œæ¯”å¦‚ â€œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ€è€ƒè¿™ä¸ªé—®é¢˜â€ï¼Œè®©æ¨¡å‹ä»¥é€â€æ­¥æ¨ç†çš„æ–¹å¼ç”Ÿæˆå›ç­”ã€‚è¿˜å¯ä»¥è¿ç”¨ Prompt çš„ä¼˜åŒ–ï»¿æŠ€å·§ few shotï¼Œç»™æ¨¡å‹æä¾›åŒ…å«æ€ç»´é“¾çš„ç¤ºä¾‹é—®é¢˜â€å’Œç­”æ¡ˆï¼Œè®©æ¨¡å‹å­¦ä¹ å¦‚ä½•æ„å»ºè‡ªå·±çš„æ€ç»´é“¾ã€‚

åœ¨ Opeï»¿nManus æ—©æœŸâ€‹ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å®â€ç° CoT çš„ç³»ç»Ÿï»¿æç¤ºè¯ï¼š

```plain
You are an assistant focused on Chain of Thought reasoning. For each question, please follow these steps:

1. Break down the problem: Divide complex problems into smaller, more manageable parts
2. Think step by step: Think through each part in detail, showing your reasoning process
3. Synthesize conclusions: Integrate the thinking from each part into a complete solution
4. Provide an answer: Give a final concise answer

Your response should follow this format:
Thinking: [Detailed thought process, including problem decomposition, reasoning for each step, and analysis]
Answer: [Final answer based on the thought process, clear and concise]

Remember, the thinking process is more important than the final answer, as it demonstrates how you reached your conclusion.
```

æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/OwfJBsuhxeS0lpGn.webp" alt="" width="100%" />

### Agent Loop æ‰§è¡Œå¾ªç¯

Agentï»¿ Loop æ˜¯æ™ºèƒ½ä½“â€‹æœ€æ ¸å¿ƒçš„å·¥ä½œæœºåˆ¶ï¼ŒæŒ‡â€æ™ºèƒ½ä½“åœ¨æ²¡æœ‰ç”¨æˆ·è¾“å…¥ï»¿çš„æƒ…å†µä¸‹ï¼Œè‡ªä¸»é‡å¤æ‰§â€è¡Œæ¨ç†å’Œå·¥å…·è°ƒç”¨çš„è¿‡ç¨‹ã€‚

åœ¨ä¼ ç»Ÿçš„èŠå¤©æ¨¡å‹ä¸­ï¼Œï»¿æ¯æ¬¡ç”¨æˆ·æé—®åï¼ŒAI å›å¤ä¸€æ¬¡å°±ç»“æŸâ€‹äº†ã€‚ä½†åœ¨æ™ºèƒ½ä½“ä¸­ï¼ŒAI å›å¤åå¯èƒ½ä¼šç»§ç»­è‡ªä¸»â€æ‰§è¡Œåç»­åŠ¨ä½œï¼ˆå¦‚è°ƒç”¨å·¥å…·ã€å¤„ç†ç»“æœã€ç»§ç»­ï»¿æ¨ç†ï¼‰ï¼Œå½¢æˆä¸€ä¸ªè‡ªä¸»æ‰§è¡Œçš„å¾ªç¯ï¼Œç›´åˆ°ä»»åŠ¡â€å®Œæˆï¼ˆæˆ–è€…è¶…å‡ºé¢„è®¾çš„æœ€å¤§æ­¥éª¤æ•°ï¼‰ã€‚

Agent Loop çš„å®ç°å¾ˆç®€å•ï¼Œå‚è€ƒä»£ç å¦‚ä¸‹ï¼š

```java
public String execute() {
List<String> results = new ArrayList<>();
while (currentStep < MAX_STEPS && !isFinished) {
currentStep++;
// è¿™é‡Œå®ç°å…·ä½“çš„æ­¥éª¤é€»è¾‘
String stepResult = executeStep();
results.add("æ­¥éª¤ " + currentStep + ": " + stepResult);
}
if (currentStep >= MAX_STEPS) {
results.add("è¾¾åˆ°æœ€å¤§æ­¥éª¤æ•°: " + MAX_STEPS);
}
return String.join("\n", results);
}
```

### ReAct æ¨¡å¼

ReActï¼ˆReasoning + Actingï¼‰æ˜¯ä¸€ç§ç»“åˆæ¨ç†å’Œè¡ŒåŠ¨çš„æ™ºèƒ½ä½“æ¶æ„ï¼Œå®ƒæ¨¡ä»¿äººç±»è§£å†³é—®é¢˜æ—¶ â€æ€è€ƒ - è¡ŒåŠ¨ - è§‚å¯Ÿâ€ çš„å¾ªç¯ï¼Œç›®çš„æ˜¯é€šè¿‡äº¤äº’å¼å†³ç­–è§£å†³å¤æ‚ä»»åŠ¡ï¼Œæ˜¯ç›®å‰æœ€å¸¸ç”¨çš„æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼ä¹‹ä¸€ã€‚

æ ¸å¿ƒæ€æƒ³ï¼š

1.  æ¨ç†ï¼ˆReasonï¼‰ï¼šå°†åŸå§‹é—®é¢˜æ‹†åˆ†ä¸ºå¤šæ­¥éª¤ä»»åŠ¡ï¼Œæ˜ç¡®å½“å‰è¦æ‰§è¡Œçš„æ­¥éª¤ï¼Œæ¯”å¦‚ â€œç¬¬ä¸€æ­¥éœ€è¦æ‰“å¼€ç¼–ç¨‹å¯¼èˆªç½‘ç«™â€ã€‚

2.  è¡ŒåŠ¨ï¼ˆActï¼‰ï¼šè°ƒç”¨å¤–éƒ¨å·¥å…·æ‰§è¡ŒåŠ¨ä½œï¼Œæ¯”å¦‚è°ƒç”¨æœç´¢å¼•æ“ã€æ‰“å¼€æµè§ˆå™¨è®¿é—®ç½‘é¡µç­‰ã€‚

3.  è§‚å¯Ÿï¼ˆObserveï¼‰ï¼šè·å–å·¥å…·è¿”å›çš„ç»“æœï¼Œåé¦ˆç»™æ™ºèƒ½ä½“è¿›è¡Œä¸‹ä¸€æ­¥å†³ç­–ã€‚æ¯”å¦‚å°†æ‰“å¼€çš„ç½‘é¡µä»£ç è¾“å…¥ç»™ AIã€‚

4.  å¾ªç¯è¿­ä»£ï¼šä¸æ–­é‡å¤ä¸Šè¿° 3 ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆæˆ–è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ã€‚


ReAct æµç¨‹å¦‚å›¾ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/O3HENqP1oTHADdfh.webp" alt="" width="100%" />


ç¤ºä¾‹å®ç°ä»£ç ï¼š

```java
void executeReAct(String task) {
String state = "å¼€å§‹";

while (!state.equals("å®Œæˆ")) {
// 1. æ¨ç† (Reason)
String thought = "æ€è€ƒä¸‹ä¸€æ­¥è¡ŒåŠ¨";
System.out.println("æ¨ç†: " + thought);

// 2. è¡ŒåŠ¨ (Act)
String action = "æ‰§è¡Œå…·ä½“æ“ä½œ";
System.out.println("è¡ŒåŠ¨: " + action);

// 3. è§‚å¯Ÿ (Observe)
String observation = "è§‚å¯Ÿæ‰§è¡Œç»“æœ";
System.out.println("è§‚å¯Ÿ: " + observation);

// æ›´æ–°çŠ¶æ€
state = "å®Œæˆ";
}
}
```

### æ‰€éœ€æ”¯æŒç³»ç»Ÿ

é™¤äº†åŸºæœ¬çš„å·¥ä½œæœºåˆ¶å¤–ï¼Œæ™ºèƒ½ä½“çš„å®ç°è¿˜ä¾èµ–äºå¾ˆå¤šæ”¯æŒç³»ç»Ÿã€‚

1ï¼‰é¦–å…ˆæ˜¯ ï»¿AI å¤§æ¨¡å‹ï¼Œè¿™ä¸ªå°±ä¸â€‹å¤šè¯´äº†ï¼Œå¤§æ¨¡å‹æä¾›äº†æ€â€è€ƒã€æ¨ç†å’Œå†³ç­–çš„æ ¸å¿ƒèƒ½ï»¿åŠ›ï¼Œè¶Šå¼ºçš„ AI å¤§æ¨¡â€å‹é€šå¸¸æ‰§è¡Œä»»åŠ¡çš„æ•ˆæœè¶Šå¥½ã€‚

2ï¼‰è®°å¿†ç³»ç»Ÿ

æ™ºèƒ½ä½“éœ€è¦è®°å¿†ç³»ç»Ÿï»¿æ¥å­˜å‚¨å¯¹è¯å†å²ã€ä¸­é—´ç»“æœå’Œæ‰§è¡ŒçŠ¶æ€ï¼Œâ€‹è¿™æ ·å®ƒæ‰èƒ½å¤Ÿè¿›è¡Œè¿ç»­å¯¹è¯å¹¶æ ¹æ®å†å²å¯¹â€è¯åˆ†ææ¥ä¸‹æ¥çš„å·¥ä½œæ­¥éª¤ã€‚ä¹‹å‰æˆ‘ä»¬å­¦ä¹ ï»¿è¿‡å¦‚ä½•ä½¿ç”¨ Spring AI çš„ â€ChatMemory å®ç°å¯¹è¯è®°å¿†ã€‚

3ï¼‰çŸ¥è¯†åº“

å°½ç®¡å¤§è¯­è¨€æ¨¡å‹æ‹¥æœ‰ï»¿ä¸°å¯Œçš„å‚æ•°çŸ¥è¯†ï¼Œä½†é’ˆå¯¹ç‰¹å®šé¢†åŸŸçš„ä¸“â€‹ä¸šçŸ¥è¯†å¾€å¾€éœ€è¦é¢å¤–çš„çŸ¥è¯†åº“æ”¯æŒã€‚ä¹‹â€å‰æˆ‘ä»¬å­¦ä¹ è¿‡ï¼Œé€šè¿‡ RAG æ£€ç´¢å¢ï»¿å¼ºç”Ÿæˆ + å‘é‡æ•°æ®åº“ç­‰æŠ€æœ¯ï¼Œæ™ºèƒ½â€ä½“å¯ä»¥æ£€ç´¢å¹¶åˆ©ç”¨ä¸“ä¸šçŸ¥è¯†å›ç­”é—®é¢˜ã€‚

4ï¼‰å·¥å…·è°ƒç”¨

å·¥å…·æ˜¯æ‰©å±•æ™ºèƒ½ä½“ï»¿èƒ½åŠ›è¾¹ç•Œçš„å…³é”®ï¼Œæ™ºèƒ½ä½“é€šè¿‡å·¥å…·è°ƒâ€‹ç”¨å¯ä»¥è®¿é—®æœç´¢å¼•æ“ã€æ•°æ®åº“ã€APâ€I æ¥å£ç­‰å¤–éƒ¨æœåŠ¡ï¼Œæå¤§åœ°å¢å¼ºäº†ï»¿å…¶è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ã€‚å½“ç„¶ï¼ŒMCâ€P ä¹Ÿå¯ä»¥ç®—æ˜¯å·¥å…·è°ƒç”¨çš„ä¸€ç§ã€‚

ğŸ’¡ è¿™é‡Œåˆ†äº«ä¸€ç§ç‰¹ï»¿æ®Šçš„å·¥å…·è°ƒç”¨ â€”â€” Compute Uâ€‹seï¼Œå®ƒå…è®¸æ™ºèƒ½ä½“ç›´æ¥ä¸è®¡ç®—ç¯å¢ƒäº¤äº’ï¼Œâ€æ¯”å¦‚æ‰§è¡Œä»£ç ã€æ“ä½œæ–‡ä»¶ç³»ç»Ÿç­‰ã€‚ç›®å‰ Cï»¿laude ç­‰å¹³å°å·²æä¾›æ­¤ç±»èƒ½åŠ›ï¼Œæ„Ÿå…´â€è¶£çš„åŒå­¦å¯ä»¥é˜…è¯»ä¸‹é¢çš„èµ„æ–™å­¦ä¹ ï¼š

*   Claude æ”¯æŒ Compute Useï¼š[https://docs.anthropic.com/en/docs/agents-and-tools/computer-use](https://docs.anthropic.com/en/docs/agents-and-tools/computer-use)

*   Compute Use å®ç°ç¤ºä¾‹ï¼š[https://github.com/anthropics/anthropic-quickstarts/tree/main/computer-use-demo](https://github.com/anthropics/anthropic-quickstarts/tree/main/computer-use-demo)

*   Compute Use å¼€æºå®ç°ï¼š[https://github.com/e2b-dev/open-computer-use](https://github.com/e2b-dev/open-computer-use)ã€[https://github.com/showlab/computer_use_ootb](https://github.com/showlab/computer_use_ootb)


ä½¿ç”¨ Comï»¿pute Use åŠŸèƒ½â€‹æ—¶éœ€è¦æ³¨æ„ï¼Œè¿™äº›æ“ä½œä¼šâ€åœ¨æˆ‘ä»¬è‡ªå·±çš„ç³»ç»Ÿä¸Šæ‰§è¡Œï»¿ï¼Œå»ºè®®åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œâ€ï¼Œé˜²æ­¢æ„å¤–æ“ä½œå½±å“å®é™…ç³»ç»Ÿã€‚

ç»¼åˆä¸Šé¢ 4 ç±»ï»¿æŠ€æœ¯ï¼Œå¹¶ä¸”ç»“åˆ CoTã€Agenâ€‹t Loopã€ReAct ç­‰æœºåˆ¶â€ï¼ˆå¯ä»¥æ€»ç§°ä¸º â€œè§„åˆ’æ‰§è¡Œæœºåˆ¶â€ï¼‰ï»¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„å»ºä¸€ä¸ªå®Œæ•´çš„ã€æœ‰è‡ªâ€ä¸»è§„åˆ’èƒ½åŠ›çš„æ™ºèƒ½ä½“ç³»ç»Ÿå•¦ã€‚

ä¸‰ã€ä½¿ç”¨ AI æ™ºèƒ½ä½“
-----------

æœ‰ 3 ç§ï»¿æ–¹å¼å¯ä»¥ä½¿ç”¨ AIâ€‹ æ™ºèƒ½ä½“ï¼Œä¹‹å‰çš„æ•™â€ç¨‹ä¸­å…¶å®æˆ‘ä»¬å·²ç»æœ‰ï»¿æ¥è§¦è¿‡ï¼Œè¿™é‡Œå†å¿«é€Ÿâ€å¤ä¹ ä¸€éã€‚

### 1ã€å¹³å°ä¸­ä½¿ç”¨

è®¸å¤š AIï»¿ å¤§æ¨¡å‹å¼€å‘å¹³å°å·²â€‹ç»æä¾›äº†æ™ºèƒ½ä½“åˆ›å»ºâ€å’Œä½¿ç”¨åŠŸèƒ½ï¼Œæœ€ç®€å•ï»¿çš„æ–¹å¼å°±æ˜¯ç›´æ¥åœ¨è¿™â€äº›å¹³å°ä¸Šåˆ›å»ºå’Œä½¿ç”¨æ™ºèƒ½ä½“ã€‚

æ¯”å¦‚å¯ä»¥åœ¨é˜¿é‡Œäº‘ç™¾ç‚¼ã€Dify ç­‰å¹³å°ä¸Šåˆ›å»ºæ™ºèƒ½ä½“ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/eVX2nDW1aUI74G2v.webp" alt="" width="100%" />


### 2ã€è½¯ä»¶ä¸­ä½¿ç”¨

AI å¼€å‘å·¥å…· Cï»¿ursor å°±é›†æˆäº† AI æ™ºèƒ½ä½“â€‹ï¼Œå¯ä»¥å¸®æˆ‘ä»¬ç”Ÿæˆå®Œæ•´çš„é¡¹ç›®ä»£ç ã€æˆ–â€è€…è§£é‡Šé¡¹ç›®ä»£ç ã€‚é€‰æ‹© Agent ï»¿æ¨¡å¼å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ï¼Œå»ºè®®åŒæ—¶å¼€å¯â€ Thinking æ·±åº¦æ€è€ƒï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/iHP7hQ1srk3SsZ6v.webp" alt="" width="100%" />


è¿è¡Œæ•ˆæœå¦‚å›¾ï¼Œå…¸å‹çš„ CoT + Agent Loop + ReAct æ¨¡å¼ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/xrBhm5QvH506DPSq.webp" alt="" width="100%" />


### 3ã€ç¨‹åºä¸­ä½¿ç”¨

ä¹‹å‰æœ‰è®²è§£è¿‡ï»¿ï¼Œå¦‚æœä½¿ç”¨ AI å¤§æ¨¡â€‹å‹å¼€å‘å¹³å°åˆ›å»ºäº†æ™ºèƒ½ä½“â€ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥é€šè¿‡ Sï»¿DK æˆ– API åœ¨è‡ªâ€å·±çš„ç¨‹åºä¸­è°ƒç”¨æ™ºèƒ½ä½“ã€‚

å½“ç„¶ä¹Ÿå¯ä»¥å®Œå…¨é€šï»¿è¿‡ç¼–ç¨‹è‡ªä¸»å¼€å‘æ™ºèƒ½ä½“ï¼Œä¹‹å‰æˆ‘ä»¬â€‹é€šè¿‡ Spring AI åˆ›å»ºâ€çš„æ‹çˆ±å¤§å¸ˆ APP å°±å·²ç»æ˜¯ä¸ªï»¿æ™ºèƒ½ä½“äº†ï¼ŒåŒ…å«äº†å¤§æ¨¡å‹å†³ç­–ã€è®°â€å¿†èƒ½åŠ›ã€çŸ¥è¯†åº“é›†æˆå’Œå·¥å…·è°ƒç”¨ã€‚

```java
ChatResponse response = chatClient
.prompt()
.user(message)
// è®°å¿†
.advisors(spec -> spec.param(CHAT_MEMORY_CONVERSATION_ID_KEY, chatId)
.param(CHAT_MEMORY_RETRIEVE_SIZE_KEY, 10))
// å¼€å¯æ—¥å¿—ï¼Œä¾¿äºè§‚å¯Ÿæ•ˆæœ
.advisors(new MyLoggerAdvisor())
// çŸ¥è¯†åº“
.advisors(new QuestionAnswerAdvisor(loveAppVectorStore))
// å·¥å…·è°ƒç”¨
.tools(toolCallbackProvider)
.call()
.chatResponse();
```

ä½†æ˜¯ï¼Œè¿™ä¸ªï»¿å®ç°è¿˜ä¸å…·å¤‡å®Œæ•´çš„â€‹è‡ªä¸»è§„åˆ’å’Œæ‰§è¡Œèƒ½åŠ›â€ï¼Œä¸‹é¢æˆ‘ä»¬å°†å­¦ä¹ æ›´ï»¿é«˜çº§çš„è‡ªä¸»è§„åˆ’æ™ºâ€èƒ½ä½“æ¶æ„ã€‚

å››ã€OpenManus å®ç°åŸç†
----------------

åœ¨æˆ‘ä»¬å¼€å‘è¶…çº§æ™ºèƒ½ä½“å‰ï¼Œå¯ä»¥å…ˆå­¦ä¹ ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ã€‚ä¸‹é¢ä»¥ [OpenManus é¡¹ç›®](https://github.com/FoundationAgents/OpenManus) ä¸ºä¾‹ï¼Œé±¼çš®ä¼šå¸¦å¤§å®¶ä» 0 å¼€å§‹é˜…è¯»é¡¹ç›®æºç ï¼Œå­¦åˆ°è¶…çº§æ™ºèƒ½ä½“å®ç°æ–¹å¼çš„åŒæ—¶ï¼Œå¸®åŠ©å¤§å®¶æŒæ¡å¿«é€Ÿå­¦ä¹ å¼€æºé¡¹ç›®çš„æ–¹æ³•ã€‚

ğŸ’¡ å‹æƒ…æç¤ºï¼Œé±¼ï»¿çš®å¸¦å¤§å®¶åˆ†æçš„æºç æ˜¯ 2025 å¹´ â€‹5 æœˆ 16 æ—¥çš„ï¼Œåç»­æºç å¯èƒ½ä¼šæŒâ€ç»­æ›´æ–°ï¼Œé‡ç‚¹åœ¨äºå­¦ä¹ åˆ†ææºç çš„å¥—è·¯ã€‚ï»¿â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€

### å¿«é€Ÿè¿è¡Œ

å­¦ä¹ å¼€æºé¡¹ç›®çš„ç¬¬ä¸€æ­¥æ˜¯é˜…è¯»å®˜æ–¹æä¾›çš„ `README.md` é¡¹ç›®ä»‹ç»æ–‡æ¡£ï¼Œå…ˆæŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œå€Ÿæ­¤ç†Ÿæ‚‰ä¸šåŠ¡æµç¨‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±å•ƒæºç ã€‚

OpenMï»¿anus å®˜æ–¹æä¾›â€‹äº†ä¸€ä¸ª Demo â€è§†é¢‘ï¼Œæˆ‘ä»¬å°±ä¸å¿…å†ï»¿è‡ªå·±æ­å»ºç¯å¢ƒæ¥è·‘é¡¹â€ç›®äº†ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/g5CIwuNVSFKPvYO9.webp" alt="" width="100%" />


ä¸‹é¢è®©æˆ‘ä»¬çœ‹ä¸€ï»¿ä¸ª OpenManus çš„â€‹å¯¹è¯ç¤ºä¾‹ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£å®ƒçš„å·¥ä½œâ€æµç¨‹ã€‚å‡è®¾ç”¨æˆ·è¦å®Œæˆä¸€ï»¿ä¸ªä»»åŠ¡ â€”â€” åœ¨ç¼–ç¨‹å¯¼èˆªç½‘â€ç«™ä¸Šå¯»æ‰¾çƒ­é—¨æ–‡ç« ï¼Œå¯¹è¯å¦‚ä¸‹ï¼š

```plain
ç”¨æˆ·ï¼šå¸®æˆ‘åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™ä¸Šæ‰¾åˆ°æœ€è¿‘çš„å‡ ç¯‡çƒ­é—¨æ–‡ç« 

ç³»ç»Ÿï¼šOpenManus å·²å¯åŠ¨ï¼Œæ­£åœ¨å¤„ç†æ‚¨çš„è¯·æ±‚...

åŠ©æ‰‹ï¼šæˆ‘ä¼šå¸®æ‚¨åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™æŸ¥æ‰¾æœ€è¿‘çš„çƒ­é—¨æ–‡ç« ã€‚è®©æˆ‘å…ˆç”¨æµè§ˆå™¨å·¥å…·è®¿é—®ç¼–ç¨‹å¯¼èˆªç½‘ç«™ã€‚

ç³»ç»Ÿï¼šæ­£åœ¨è°ƒç”¨æµè§ˆå™¨å·¥å…·...

åŠ©æ‰‹ï¼šæˆ‘æˆåŠŸæ‰“å¼€äº†æµè§ˆå™¨å¹¶è®¿é—®äº†ç¼–ç¨‹å¯¼èˆªç½‘ç«™ã€‚ä»ç½‘ç«™å†…å®¹æ¥çœ‹ï¼Œæˆ‘ç°åœ¨éœ€è¦å¯¼èˆªåˆ°çƒ­é—¨æ–‡ç« åŒºåŸŸï¼Œç„¶åæå–è¿™äº›æ–‡ç« çš„ä¿¡æ¯ã€‚

ç³»ç»Ÿï¼šæ­£åœ¨æ‰§è¡Œæµè§ˆå™¨æ“ä½œ...

åŠ©æ‰‹ï¼šæˆ‘å·²åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™æ‰¾åˆ°äº†çƒ­é—¨æ–‡ç« åŒºåŸŸï¼Œä»¥ä¸‹æ˜¯æœ€è¿‘çš„å‡ ç¯‡çƒ­é—¨æ–‡ç« ï¼š

1. ã€ŠSpring Boot å®æˆ˜ï¼šæ„å»ºå¾®æœåŠ¡åº”ç”¨ã€‹- é˜…è¯»é‡ï¼š3200
2. ã€Šå‰ç«¯æ¡†æ¶å¯¹æ¯”ï¼šReact vs Vue vs Angularã€‹- é˜…è¯»é‡ï¼š2850
3. ã€ŠPython æ•°æ®åˆ†æå…¥é—¨ï¼šä» Pandas åˆ°å¯è§†åŒ–ã€‹- é˜…è¯»é‡ï¼š2400
4. ã€ŠDocker å®¹å™¨åŒ–åº”ç”¨éƒ¨ç½²æœ€ä½³å®è·µã€‹- é˜…è¯»é‡ï¼š2150
5. ã€Šç®—æ³•å­¦ä¹ è·¯çº¿ï¼šä»å…¥é—¨åˆ°ç²¾é€šã€‹- é˜…è¯»é‡ï¼š1980

è¿™äº›æ–‡ç« æ˜¯æ ¹æ®ç½‘ç«™æ˜¾ç¤ºçš„é˜…è¯»é‡æ’åºçš„çƒ­é—¨æ–‡ç« ã€‚

ç³»ç»Ÿï¼šæ­£åœ¨è°ƒç”¨ç»ˆæ­¢å·¥å…·...

åŠ©æ‰‹ï¼šå·²å®Œæˆä»»åŠ¡ï¼ŒæˆåŠŸæ‰¾åˆ°ç¼–ç¨‹å¯¼èˆªç½‘ç«™ä¸Šçš„çƒ­é—¨æ–‡ç« ã€‚å¦‚æœæ‚¨å¯¹æŸç¯‡æ–‡ç« æ„Ÿå…´è¶£æˆ–æœ‰å…¶ä»–éœ€æ±‚ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒOpenMaï»¿nus é¦–å…ˆç†è§£ç”¨æˆ·ä»»åŠ¡ï¼Œç„¶åé€‰æ‹©åˆé€‚çš„å·¥å…·ï¼ˆæµè§ˆâ€‹å™¨å·¥å…·ï¼‰æ¥æ‰§è¡Œä»»åŠ¡ï¼Œæœ€åæ•´ç†ä¿¡æ¯å¹¶è¿”å›ç»“æœã€‚æ•´ä¸ªè¿‡â€ç¨‹ä½“ç°äº† ReAct æ¨¡å¼çš„æ ¸å¿ƒè¦ç´ ï¼šæ€è€ƒï¼ˆThiï»¿nkingï¼‰ã€è¡ŒåŠ¨ï¼ˆActionï¼‰å’Œè§‚å¯Ÿï¼ˆObseâ€rvationï¼‰çš„å¾ªç¯ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚

### OpenManus æ•´ä½“æ¶æ„

äº†è§£äº† OpenManus çš„æ ¸å¿ƒåŠŸèƒ½åï¼Œå…ˆ **ä»æ•´ä½“åˆ°å±€éƒ¨** åœ°è§‚å¯Ÿ OpenManus çš„æ¶æ„ï¼Œç®€å•æ¥è¯´å°±æ˜¯çœ‹æ–‡ä»¶å¤¹çš„ç»„ç»‡å½¢å¼ã€æ–‡ä»¶çš„å‘½åè§„åˆ™ã€ä»¥åŠæ–‡ä»¶ä¹‹é—´çš„å…³è”ï¼Œæš‚æ—¶ä¸ç”¨æ·±å…¥æºç ã€‚

#### 1ã€æ•´ä½“æ–‡ä»¶å¤¹ç»„ç»‡å½¢å¼

å…ˆçœ‹æ–‡ä»¶å¤¹çš„ç»„ç»‡å½¢å¼ï¼Œè§åçŸ¥æ„ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/I0SZRLE7IGEc8LI7.webp" alt="" width="100%" />


#### 2ã€agent ç›®å½•

agent ï»¿ç›®å½•æ˜¯ OpenManâ€‹us å®ç°çš„æ ¸å¿ƒï¼Œé‡‡ç”¨â€äº†åˆ†å±‚çš„ä»£ç†æ¶æ„ï¼Œä¸åŒï»¿å±‚æ¬¡çš„ä»£ç†è´Ÿè´£ä¸åŒçš„åŠŸâ€èƒ½ï¼Œè¿™æ ·æ›´åˆ©äºç³»ç»Ÿçš„æ‰©å±•ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/zVLgJbCNr74HZ60U.webp" alt="" width="100%" />


OpenManus çš„ä»£ç†æ¶æ„ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ å±‚ï¼š

*   BaseAgentï¼šæœ€åŸºç¡€çš„ä»£ç†æŠ½è±¡ç±»ï¼Œå®šä¹‰äº†æ‰€æœ‰ä»£ç†çš„åŸºæœ¬çŠ¶æ€ç®¡ç†å’Œæ‰§è¡Œå¾ªç¯

*   ReActAgentï¼šå®ç° ReAct æ¨¡å¼çš„ä»£ç†ï¼Œå…·æœ‰æ€è€ƒï¼ˆThinkï¼‰å’Œè¡ŒåŠ¨ï¼ˆActï¼‰ä¸¤ä¸ªä¸»è¦æ­¥éª¤

*   ToolCallAgentï¼šèƒ½å¤Ÿè°ƒç”¨å·¥å…·çš„ä»£ç†ï¼Œç»§æ‰¿è‡ª ReActAgent å¹¶æ‰©å±•äº†å·¥å…·è°ƒç”¨èƒ½åŠ›

*   Manusï¼šå…·ä½“å®ç°çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œé›†æˆäº†æ‰€æœ‰èƒ½åŠ›å¹¶æ·»åŠ äº†æ›´å¤šä¸“ä¸šå·¥å…·


è¿˜æœ‰æ›´å¤šé€‚ç”¨äºç‰¹å®šé¢†åŸŸï»¿çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œæ¯”å¦‚ DataAnalysisâ€‹ æ•°æ®åˆ†æ Agentã€SWE è½¯ä»¶å¼€å‘å·¥ç¨‹â€å¸ˆ Agentã€MCP æœåŠ¡äº¤äº’ Agentï»¿ã€Browser æµè§ˆå™¨æ“ä½œ Agentï¼Œå®ƒâ€ä»¬éƒ½ç»§æ‰¿äº† ToolCallAgentã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/jLGa0c6lwYRhlaHu.webp" alt="" width="100%" />

#### 3ã€tool ç›®å½•

tool ï»¿ç›®å½•å®šä¹‰äº†å„ç§å„æ ·â€‹çš„å·¥å…·ï¼Œæ¯”å¦‚ç½‘é¡µæœâ€ç´¢ã€æ–‡ä»¶æ“ä½œã€è¯¢æ±‚ï»¿ç”¨æˆ·å¸®åŠ©ã€ä»£ç æ‰§è¡Œâ€å™¨ç­‰ç­‰ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/4Y4PYQA96JFmb7SG.webp" alt="" width="100%" />


#### 4ã€prompt ç›®å½•

prompï»¿t ç›®å½•å®šä¹‰äº†æ•´ä¸ªé¡¹â€‹ç›®ä¸­å¯èƒ½ä¼šç”¨åˆ°çš„æâ€ç¤ºè¯ã€‚ä»ä¸‹å›¾ä¸­æˆ‘ä»¬å¯ä»¥ï»¿çœ‹åˆ°æç¤ºè¯å†™çš„æ¯”è¾ƒä¸“â€ä¸šï¼Œè¿™å—ä¹Ÿæ˜¯æ¯”è¾ƒå€¼å¾—å­¦ä¹ çš„ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/mSVVhH5RubGj1OdW.webp" alt="" width="100%" />


#### 5ã€å…¶ä»–æ”¯æŒ

ä¸ºäº†å®ç°å®Œï»¿æ•´çš„æ™ºèƒ½ä½“åŠŸèƒ½ï¼ŒOâ€‹penManus â€ä¾èµ–ä»¥ä¸‹å…³é”®ç»„ä»¶ï¼š

*   è®°å¿†ç³»ç»Ÿï¼šä½¿ç”¨ Memory ç±»å­˜å‚¨å¯¹è¯å†å²å’Œä¸­é—´çŠ¶æ€

*   LLM å¤§æ¨¡å‹ï¼šé€šè¿‡ LLM ç±»æä¾›æ€è€ƒå’Œå†³ç­–èƒ½åŠ›

*   å·¥å…·ç³»ç»Ÿï¼šæä¾› BaseTool å’Œ ToolCollection ç±»æ‰©å±•æ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¹ç•Œ

*   æµç¨‹æ§åˆ¶ï¼šé€šè¿‡ AgentState å’Œæ‰§è¡Œå¾ªç¯ç®¡ç†çŠ¶æ€è½¬æ¢å’Œä»»åŠ¡æµç¨‹


åœ¨ OpenManus ä¸­ï¼Œè¿™äº›éƒ½æ˜¯è‡ªä¸»å®ç°çš„ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/fAl9ADVfbzUlroaN.webp" alt="" width="100%" />


### AI æ™ºèƒ½ä½“æ ¸å¿ƒå®ç°

äº†è§£æ•´ä½“æ¶æ„åï¼Œæˆ‘ä»¬é‡ç‚¹å­¦ä¹  Agent åˆ†å±‚ä»£ç†æ¶æ„ã€‚

#### 1ã€BaseAgent

BaseAgent æ˜¯æ‰€æœ‰ä»£ç†çš„åŸºç¡€ï¼Œå®šä¹‰äº†ä»£ç†çŠ¶æ€ç®¡ç†å’Œæ‰§è¡Œå¾ªç¯çš„æ ¸å¿ƒé€»è¾‘ã€‚æŸ¥çœ‹ `base.py` æ–‡ä»¶ï¼Œå…³é”®ä»£ç å°±æ˜¯ Agent Loop çš„å®ç°ï¼Œé€šè¿‡ while å®ç°å¾ªç¯ï¼Œå¹¶ä¸”å®šä¹‰äº†æ­»å¾ªç¯æ£€æŸ¥æœºåˆ¶ï¼š

```python
class BaseAgent(BaseModel, ABC):
async def run(self, request: Optional[str] = None) -> str:
"""æ‰§è¡Œä»£ç†çš„ä¸»å¾ªç¯"""
if self.state != AgentState.IDLE:
raise RuntimeError(f"Cannot run agent from state: {self.state}")

if request:
self.update_memory("user", request)

results: List[str] = []
async with self.state_context(AgentState.RUNNING):
while (self.current_step < self.max_steps and
self.state != AgentState.FINISHED):
self.current_step += 1
step_result = await self.step()

# æ£€æŸ¥æ˜¯å¦é™·å…¥å¾ªç¯
if self.is_stuck():
self.handle_stuck_state()

results.append(f"Step {self.current_step}: {step_result}")

if self.current_step >= self.max_steps:
self.current_step = 0
self.state = AgentState.IDLE
results.append(f"Terminated: Reached max steps ({self.max_steps})")

return "\n".join(results) if results else "No steps executed"

@abstractmethod
async def step(self) -> str:
"""æ‰§è¡Œå•æ­¥æ“ä½œï¼Œå¿…é¡»ç”±å­ç±»å®ç°"""
```

è¿™é‡Œå…¶å®ä½¿ï»¿ç”¨äº†æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡â€‹å¼ï¼Œçˆ¶ç±»å®šä¹‰æ‰§è¡Œæµâ€ç¨‹ï¼Œå…·ä½“çš„æ‰§è¡Œæ–¹æ³•ï»¿ï¼ˆstepï¼‰äº¤ç»™â€å­ç±»å®ç°ã€‚

#### 2ã€ReActAgent

ReActAgent å®ç°äº† ReAct æ¨¡å¼ï¼Œå°†ä»£ç†çš„æ‰§è¡Œè¿‡ç¨‹åˆ†ä¸ºæ€è€ƒï¼ˆThinkï¼‰å’Œè¡ŒåŠ¨ï¼ˆActï¼‰ä¸¤ä¸ªå…³é”®æ­¥éª¤ã€‚æŸ¥çœ‹ `react.py` æ–‡ä»¶ï¼š

```python
class ReActAgent(BaseAgent, ABC):
@abstractmethod
async def think(self) -> bool:
"""å¤„ç†å½“å‰çŠ¶æ€å¹¶å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""

@abstractmethod
async def act(self) -> str:
"""æ‰§è¡Œå†³å®šçš„è¡ŒåŠ¨"""

async def step(self) -> str:
"""æ‰§è¡Œå•æ­¥ï¼šæ€è€ƒå’Œè¡ŒåŠ¨"""
should_act = await self.think()
if not should_act:
return "Thinking complete - no action needed"
return await self.act()
```

ä¸Šè¿°ä»£ç åŒæ ·è¿ç”¨ï»¿äº†æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ï¼Œè¿™ç§è®¾è®¡ä½“ç°â€‹äº† ReAct æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³ï¼Œâ€ä¹Ÿå°±æ˜¯ â€œæ€è€ƒ - è¡ŒåŠ¨ - è§‚ï»¿å¯Ÿâ€ çš„å¾ªç¯è¿‡ç¨‹ã€‚ä½†æ˜¯å…·ä½“æ€ä¹ˆæ€â€è€ƒã€æ€ä¹ˆè¡ŒåŠ¨ï¼Œäº¤ç»™å­ç±»å»å®ç°ã€‚

#### 3ã€ToolCallAgent

ToolCallAgent åœ¨ ReAct æ¨¡å¼çš„åŸºç¡€ä¸Šå¢åŠ äº†å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œæ˜¯ OpenManus æœ€é‡è¦çš„ä¸€ä¸ªå±‚æ¬¡ã€‚æŸ¥çœ‹ `toolcall.py` æ–‡ä»¶ï¼Œè™½ç„¶ä»£ç æ¯”è¾ƒå¤æ‚ï¼Œä½†åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯å·¥å…·è°ƒç”¨æœºåˆ¶çš„å…·ä½“å®ç°ï¼š

1.  thinkï¼šå’Œ AI äº¤äº’æ€è€ƒä½¿ç”¨ä»€ä¹ˆå·¥å…·

2.  actï¼šç¨‹åºæ‰§è¡Œå·¥å…·

3.  observeï¼šå°†ç»“æœè¿”å›ç»™ AI


```python
class ToolCallAgent(ReActAgent):
"""èƒ½å¤Ÿæ‰§è¡Œå·¥å…·è°ƒç”¨çš„ä»£ç†ç±»"""

available_tools: ToolCollection = ToolCollection(
CreateChatCompletion(), Terminate()
)
tool_choices: TOOL_CHOICE_TYPE = ToolChoice.AUTO
special_tool_names: List[str] = Field(default_factory=lambda: [Terminate().name])

async def think(self) -> bool:
"""å¤„ç†å½“å‰çŠ¶æ€å¹¶ä½¿ç”¨å·¥å…·å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""
# æ·»åŠ ä¸‹ä¸€æ­¥æç¤ºåˆ°ç”¨æˆ·æ¶ˆæ¯
if self.next_step_prompt:
user_msg = Message.user_message(self.next_step_prompt)
self.messages += [user_msg]

# è¯·æ±‚ LLM é€‰æ‹©å·¥å…·
response = await self.llm.ask_tool(
messages=self.messages,
system_msgs=([Message.system_message(self.system_prompt)]
if self.system_prompt else None),
tools=self.available_tools.to_params(),
tool_choice=self.tool_choices,
)

# å¤„ç†å·¥å…·è°ƒç”¨
self.tool_calls = tool_calls = (
response.tool_calls if response and response.tool_calls else []
)
content = response.content if response and response.content else ""

# æ·»åŠ åŠ©æ‰‹æ¶ˆæ¯åˆ°è®°å¿†
assistant_msg = (
Message.from_tool_calls(content=content, tool_calls=self.tool_calls)
if self.tool_calls
else Message.assistant_message(content)
)
self.memory.add_message(assistant_msg)

# å†³å®šæ˜¯å¦åº”è¯¥æ‰§è¡Œè¡ŒåŠ¨
return bool(self.tool_calls or content)

async def act(self) -> str:
"""æ‰§è¡Œå·¥å…·è°ƒç”¨å¹¶å¤„ç†ç»“æœ"""
if not self.tool_calls:
# è¿”å›æœ€åä¸€æ¡æ¶ˆæ¯å†…å®¹ï¼Œå¦‚æœæ²¡æœ‰å·¥å…·è°ƒç”¨
return self.messages[-1].content or "No content or commands to execute"

results = []
for command in self.tool_calls:
# æ‰§è¡Œå·¥å…·
result = await self.execute_tool(command)

# è®°å½•å·¥å…·å“åº”åˆ°è®°å¿†
tool_msg = Message.tool_message(
content=result,
tool_call_id=command.id,
name=command.function.name,
base64_image=self._current_base64_image,
)
self.memory.add_message(tool_msg)
results.append(result)

return "\n\n".join(results)
```

#### 4ã€Manus

Manus ç±»æ˜¯ OpenManus çš„æ ¸å¿ƒæ™ºèƒ½ä½“å®ä¾‹ï¼Œé›†æˆäº†å„ç§å·¥å…·å’Œèƒ½åŠ›ã€‚æŸ¥çœ‹ `manus.py` æ–‡ä»¶ï¼š

```python
class Manus(ToolCallAgent):
"""å¤šåŠŸèƒ½é€šç”¨æ™ºèƒ½ä½“ï¼Œæ”¯æŒæœ¬åœ°å’Œ MCP å·¥å…·"""

name: str = "Manus"
description: str = "A versatile agent that can solve various tasks using multiple tools"

# æ·»åŠ å„ç§é€šç”¨å·¥å…·åˆ°å·¥å…·é›†åˆ
available_tools: ToolCollection = Field(
default_factory=lambda: ToolCollection(
PythonExecute(),
BrowserUseTool(),
StrReplaceEditor(),
AskHuman(),
Terminate(),
)
)
```

#### MCP å®¢æˆ·ç«¯ç”¨äºè¿œç¨‹å·¥å…·è®¿é—®
mcp_clients: MCPClients = Field(default_factory=MCPClients)

```
@classmethod
async def create(cls, **kwargs) -> "Manus":
"""å·¥å‚æ–¹æ³•åˆ›å»ºå¹¶åˆå§‹åŒ– Manus å®ä¾‹"""
instance = cls(**kwargs)
await instance.initialize_mcp_servers()
instance._initialized = True
return instance

async def think(self) -> bool:
"""å¤„ç†å½“å‰çŠ¶æ€å¹¶æ ¹æ®ä¸Šä¸‹æ–‡å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""
if not self._initialized:
await self.initialize_mcp_servers()
self._initialized = True

# ä¸ºæµè§ˆå™¨å·¥å…·æ·»åŠ ç‰¹æ®Šä¸Šä¸‹æ–‡
original_prompt = self.next_step_prompt
browser_in_use = self._check_browser_in_use()

if browser_in_use:
self.next_step_prompt = (
await self.browser_context_helper.format_next_step_prompt()
)

result = await super().think()

# æ¢å¤åŸå§‹æç¤º
self.next_step_prompt = original_prompt

return result
```


### å…³é”®å®ç°ç»†èŠ‚

å­¦å®Œäº†è¶…çº§ï»¿æ™ºèƒ½ä½“çš„æ ¸å¿ƒå®ç°åâ€‹ï¼Œæˆ‘ä»¬å†å­¦ä¹ ä¸€äº›é¡¹â€ç›®ä¸­æ¯”è¾ƒå¾®å¦™çš„å®ç°ï»¿ç»†èŠ‚ï¼Œå¯¹æˆ‘ä»¬è‡ªå·±å¼€â€å‘é¡¹ç›®ä¹Ÿä¼šå¾ˆæœ‰å¸®åŠ©ã€‚

#### 1ã€å·¥å…·ç³»ç»Ÿè®¾è®¡

1ï¼‰å·¥å…·æŠ½è±¡å±‚ BaseTool

æ‰€æœ‰å·¥å…·å‡ç»§æ‰¿è‡ª `BaseTool` æŠ½è±¡åŸºç±»ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£å’Œè¡Œä¸ºï¼š

```python
class BaseTool(ABC, BaseModel):
name: str
description: str
parameters: Optional[dict] = None

async def __call__(self, **kwargs) -> Any:
"""ä½¿ç”¨ç»™å®šå‚æ•°æ‰§è¡Œå·¥å…·"""
return await self.execute(**kwargs)

@abstractmethod
async def execute(self, **kwargs) -> Any:
"""æ‰§è¡Œå·¥å…·çš„å…·ä½“é€»è¾‘ï¼Œç”±å­ç±»å®ç°"""

def to_param(self) -> Dict:
"""å°†å·¥å…·è½¬æ¢ä¸ºå‡½æ•°è°ƒç”¨æ ¼å¼"""
return {
"type": "function",
"function": {
"name": self.name,
"description": self.description,
"parameters": self.parameters,
},
}
```

è¿™ç§è®¾è®¡ä½¿ï»¿å¾—æ¯ä¸ªå·¥å…·éƒ½æœ‰ç»Ÿä¸€â€‹çš„è°ƒç”¨æ–¹å¼ï¼ŒåŒæ—¶å…·â€æœ‰è§„èŒƒåŒ–çš„å‚æ•°æè¿°ï»¿ï¼Œä¾¿äº LLM ç†â€è§£å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ã€‚

2ï¼‰ç»ˆæ­¢å·¥å…· Terminate

Termiï»¿nate å·¥å…·æ˜¯ä¸€ä¸ªâ€‹ç‰¹æ®Šçš„å·¥å…·ï¼Œå…è®¸æ™ºèƒ½â€ä½“é€šè¿‡ AI å¤§æ¨¡å‹ï»¿è‡ªä¸»å†³å®šä½•æ—¶ç»“æŸä»»åŠ¡â€ï¼Œé¿å…æ— é™å¾ªç¯æˆ–è€…è¿‡æ—©ç»“æŸã€‚

```python
class Terminate(BaseTool):
name: str = "terminate"
description: str = """Terminate the interaction when the request is met OR
if the assistant cannot proceed further with the task.
When you have finished all the tasks, call this tool to end the work."""

parameters: dict = {
"type": "object",
"properties": {
"status": {
"type": "string",
"description": "The finish status of the interaction.",
"enum": ["success", "failure"],
}
},
"required": ["status"],
}

async def execute(self, status: str) -> str:
"""å®Œæˆå½“å‰æ‰§è¡Œ"""
return f"The interaction has been completed with status: {status}"
```

åœ¨ agent æºç ä¸­ï¼Œæœ‰ä¸€ä¸ª `special_tool_names` å˜é‡ï¼Œç”¨äºæŒ‡å®šç»ˆæ­¢å·¥å…·ç­‰ç‰¹æ®Šå·¥å…·ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/RWPVeFwadBJ45CLN.webp" alt="img" width="100%" />


åœ¨ `toolcall.py` æºç ä¸­ï¼Œå¯¹ç‰¹æ®Šå·¥å…·è¿›è¡Œå¤„ç†ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/jXWZyr42lvDJd3xg.webp" alt="img" width="100%" />



3ï¼‰è¯¢é—®å·¥å…· AskHuman

AskHumaï»¿n å·¥å…·å…è®¸æ™ºèƒ½ä½“åœ¨é‡åˆ°æ— â€‹æ³•è‡ªä¸»è§£å†³çš„é—®é¢˜æ—¶å‘äººç±»å¯»â€æ±‚å¸®åŠ©ï¼Œä¹Ÿå°±æ˜¯ç»™ç”¨æˆ·ä¸€ä¸ªè¾“ï»¿å…¥æ¡†ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°å¹²é¢„â€æ™ºèƒ½ä½“å®Œæˆä»»åŠ¡çš„è¿‡ç¨‹ã€‚

```python
class AskHuman(BaseTool):
"""Add a tool to ask human for help."""

name: str = "ask_human"
description: str = "Use this tool to ask human for help."
parameters: str = {
"type": "object",
"properties": {
"inquire": {
"type": "string",
"description": "The question you want to ask human.",
}
},
"required": ["inquire"],
}

async def execute(self, inquire: str) -> str:
return input(f"""Bot: {inquire}\n\nYou: """).strip()
```

è¿™ä¸ªå·¥å…·å®ï»¿ç°è™½ç„¶ç®€å•ï¼Œä½†æå¤§â€‹åœ°æå‡äº†æ™ºèƒ½ä½“çš„å®â€ç”¨æ€§å’Œå®‰å…¨æ€§ã€‚

4ï¼‰å·¥å…·é›†åˆ ToolCollection

OpenMï»¿anus è®¾è®¡äº† Tâ€‹oolCollectâ€ion ç±»æ¥ç®¡ç†å¤šä¸ªï»¿å·¥å…·å®ä¾‹ï¼Œæä¾›ç»Ÿä¸€çš„â€å·¥å…·æ³¨å†Œå’Œæ‰§è¡Œæ¥å£ï¼š

```python
class ToolCollection:
"""A collection of defined tools."""

def __init__(self, *tools: BaseTool):
self.tools = tools
self.tool_map = {tool.name: tool for tool in tools}

def to_params(self) -> List[Dict[str, Any]]:
return [tool.to_param() for tool in self.tools]

async def execute(self, *, name: str, tool_input: Dict[str, Any] = None) -> ToolResult:
tool = self.tool_map.get(name)
if not tool:
return ToolFailure(error=f"Tool {name} is invalid")
try:
result = await tool(**tool_input)
return result
except ToolError as e:
return ToolFailure(error=e.message)

def add_tools(self, *tools: BaseTool):
"""Add multiple tools to the collection."""
for tool in tools:
self.add_tool(tool)
return self
```

è¿™ç§è®¾è®¡ä½¿å¾— Oï»¿penManus å¯ä»¥çµæ´»åœ°æ·»â€‹åŠ ã€ç§»é™¤å’Œç®¡ç†å·¥å…·ï¼Œå®ç°äº†å·¥å…·â€ç³»ç»Ÿçš„å¯æ’æ‹”æ€§ã€‚æˆ‘ä»¬ä¹‹å‰åˆ©ç”¨ ï»¿Spring AI å¼€å‘å·¥å…·è°ƒâ€ç”¨æ—¶ï¼Œä¹Ÿå†™äº†ä¸ªç±»ä¼¼çš„å·¥å…·æ³¨å†Œç±»ã€‚

#### 2ã€MCP åè®®æ”¯æŒ

1ï¼‰MCP ä¸å·¥å…·ç³»ç»Ÿçš„é›†æˆ

è¿˜è®°å¾—ä¹ˆï¼Œä¹‹å‰é±¼çš®åœ¨æ•™ç¨‹ä¸­æåˆ°è¿‡ â€œMCP çš„æœ¬è´¨å°±æ˜¯å·¥å…·è°ƒç”¨â€ï¼ŒOpenManus çš„å®ç°ä¹Ÿæ˜¯éµå¾ªäº†è¿™ä¸€æ€æƒ³ã€‚é€šè¿‡ `MCPClients` ç±»ï¼ˆç»§æ‰¿è‡ª ToolCollectionï¼‰å°† MCP æœåŠ¡é›†æˆåˆ°ç°æœ‰å·¥å…·ç³»ç»Ÿä¸­ã€‚æŸ¥çœ‹ `tool/mcp.py` çš„æºç ï¼š

```python
class MCPClients(ToolCollection):
"""
A collection of tools that connects to multiple MCP servers and manages available tools through the Model Context Protocol.
"""

sessions: Dict[str, ClientSession] = {}
exit_stacks: Dict[str, AsyncExitStack] = {}
description: str = "MCP client tools for server interaction"

def __init__(self):
super().__init__()  # Initialize with empty tools list
self.name = "mcp"  # Keep name for backward compatibility
```

2ï¼‰åŠ¨æ€å·¥å…·ä»£ç†

æ¯å½“è¿æ¥åˆ° MCP æœåŠ¡å™¨æ—¶ï¼ŒOpenManus ä¼šåŠ¨æ€åˆ›å»º `MCPClientTool` å®ä¾‹ï¼ˆç»§æ‰¿è‡ª BaseToolï¼‰ä½œä¸ºæ¯ä¸ªè¿œç¨‹å·¥å…·çš„ä»£ç†ã€‚æŸ¥çœ‹ `tool/mcp.py` çš„æºç ï¼Œé€šè¿‡å‘ MCP æœåŠ¡å™¨å‘é€è¿œç¨‹è¯·æ±‚æ¥æ‰§è¡Œå·¥å…·ï¼š

```python
class MCPClientTool(BaseTool):
"""Represents a tool proxy that can be called on the MCP server from the client side."""

session: Optional[ClientSession] = None
server_id: str = ""  # Add server identifier
original_name: str = ""

async def execute(self, **kwargs) -> ToolResult:
"""Execute the tool by making a remote call to the MCP server."""
if not self.session:
return ToolResult(error="Not connected to MCP server")

try:
result = await self.session.call_tool(self.original_name, kwargs)
content_str = ", ".join(
item.text for item in result.content if isinstance(item, TextContent)
)
return ToolResult(output=content_str or "No output returned.")
except Exception as e:
return ToolResult(error=f"Error executing tool: {str(e)}")
```

3ï¼‰Manus ä¸­çš„ MCP é›†æˆæœºåˆ¶

Manus æ™ºèƒ½ä½“ **é€šè¿‡å·¥å…·è°ƒç”¨** å®ç°äº†ä¸ MCP æœåŠ¡å™¨çš„æ— ç¼é›†æˆã€‚æŸ¥çœ‹ `agent/manus.py` çš„æºç ï¼Œå‘ç°æœ¬è´¨ä¸Šæ˜¯æŠŠ MCP æœåŠ¡æä¾›çš„å·¥å…·åŠ¨æ€æ·»åŠ åˆ°å¯ç”¨çš„å·¥å…·é›†åˆä¸­ï¼š

```python
async def connect_mcp_server(
self,
server_url: str,
server_id: str = "",
use_stdio: bool = False,
stdio_args: List[str] = None,
) -> None:
"""Connect to an MCP server and add its tools."""
if use_stdio:
await self.mcp_clients.connect_stdio(server_url, stdio_args or [], server_id)
else:
await self.mcp_clients.connect_sse(server_url, server_id)

# å…³é”®å®ç°ï¼šåŠ¨æ€æ·»åŠ è¯¥æœåŠ¡å™¨çš„å·¥å…·åˆ°å¯ç”¨å·¥å…·é›†åˆ
new_tools = [
tool for tool in self.mcp_clients.tools if tool.server_id == server_id
]
self.available_tools.add_tools(*new_tools)
```

è¿™æ ·ä¸€æ¥ï¼Œï»¿å¯¹å¤§æ¨¡å‹æ¥è¯´ï¼ŒMCâ€‹P å·¥å…·ä¸æœ¬åœ°å·¥å…·â€çš„è°ƒç”¨æ–¹å¼ä¸€è‡´ï¼Œå¾ˆï»¿å·§å¦™åœ°å¤ç”¨äº†ä»£ç ã€‚

#### 3ã€å…¶ä»–å€¼å¾—å­¦ä¹ çš„æºç 

1ï¼‰Python ä»£ç æ‰§è¡Œæ²™ç®±

`PythonExecute` å·¥å…·å®ç°äº†ä¸€ä¸ªå®‰å…¨çš„ Python ä»£ç æ‰§è¡Œç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå€¼å¾—å­¦ä¹ çš„å®‰å…¨å®ç°ã€‚æŸ¥çœ‹ `tool/python_execute.py` æºç ï¼š

```python
class PythonExecute(BaseTool):
name: str = "python_execute"

async def execute(self, code: str, timeout: int = 5) -> Dict:
"""å®‰å…¨æ‰§è¡Œ Python ä»£ç """
with multiprocessing.Manager() as manager:
result = manager.dict({"observation": "", "success": False})
# å®‰å…¨çš„å…¨å±€ç¯å¢ƒ
safe_globals = {"__builtins__": __builtins__.__dict__.copy()}
# ä½¿ç”¨ç‹¬ç«‹è¿›ç¨‹æ‰§è¡Œä»£ç 
proc = multiprocessing.Process(
target=self._run_code, args=(code, result, safe_globals)
)
proc.start()
proc.join(timeout)

# è¶…æ—¶å¤„ç†
if proc.is_alive():
proc.terminate()
proc.join(1)
return {
"observation": f"Execution timeout after {timeout} seconds",
"success": False,
}
return dict(result)
```

è¿™æ®µä»£ç å±•ç¤ºäº†å‡ ä¸ªå®‰å…¨ç¼–ç¨‹çš„æœ€ä½³å®è·µï¼š

*   ä½¿ç”¨ç‹¬ç«‹è¿›ç¨‹éš”ç¦»ä»£ç æ‰§è¡Œ

*   å®ç°äº†è¶…æ—¶æœºåˆ¶é˜²æ­¢æ— é™å¾ªç¯

*   æˆªè·å’Œå¤„ç†æ‰€æœ‰å¼‚å¸¸

*   é‡å®šå‘æ ‡å‡†è¾“å‡ºä»¥æ•è·æ‰“å°å†…å®¹


2ï¼‰çŠ¶æ€ç®¡ç†ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢æœºåˆ¶

`BaseAgent` å®ç°äº†ä¸€ä¸ªä¼˜é›…çš„çŠ¶æ€ç®¡ç†å’Œä¸Šä¸‹æ–‡åˆ‡æ¢æœºåˆ¶ï¼š

```python
@asynccontextmanager
async def state_context(self, new_state: AgentState):
"""Context manager for safe agent state transitions."""
if not isinstance(new_state, AgentState):
raise ValueError(f"Invalid state: {new_state}")

previous_state = self.state
self.state = new_state
try:
yield
except Exception as e:
self.state = AgentState.ERROR  # Transition to ERROR on failure
raise e
finally:
self.state = previous_state  # Revert to previous state
```

è¿™ä¸ªä¸Šä¸‹æ–‡ï»¿ç®¡ç†å™¨ç¡®ä¿äº†çŠ¶æ€è½¬â€‹æ¢çš„å®‰å…¨æ€§å’Œå¯é æ€§â€ï¼Œå³ä½¿åœ¨å¼‚å¸¸æƒ…å†µä¸‹ï»¿ä¹Ÿèƒ½æ­£ç¡®æ¢å¤çŠ¶æ€ï¼Œâ€æ˜¯ä¸€ä¸ªå€¼å¾—å­¦ä¹ çš„è®¾è®¡æ¨¡å¼ã€‚

3ï¼‰å·¥å…·ç»“æœç»Ÿä¸€è¡¨ç¤ºä¸ç»„åˆ

OpenManus è®¾è®¡äº† `ToolResult` ç±»æ¥ç»Ÿä¸€è¡¨ç¤ºå·¥å…·æ‰§è¡Œç»“æœï¼Œå¹¶æ”¯æŒç»“æœç»„åˆã€‚æŸ¥çœ‹ `tool/base.py` æºç ï¼š

```python
class ToolResult(BaseModel):
"""Represents the result of a tool execution."""

output: Any = Field(default=None)
error: Optional[str] = Field(default=None)
base64_image: Optional[str] = Field(default=None)
system: Optional[str] = Field(default=None)

def __add__(self, other: "ToolResult"):
"""ç»„åˆä¸¤ä¸ªå·¥å…·ç»“æœ"""
def combine_fields(field: Optional[str], other_field: Optional[str], concatenate: bool = True):
if field and other_field:
if concatenate:
return field + other_field
raise ValueError("Cannot combine tool results")
return field or other_field

return ToolResult(
output=combine_fields(self.output, other.output),
error=combine_fields(self.error, other.error),
base64_image=combine_fields(self.base64_image, other.base64_image, False),
system=combine_fields(self.system, other.system),
)
```

è¿™ç§è®¾è®¡ä½¿ï»¿å¾—å·¥å…·ç»“æœå¤„ç†æ›´åŠ â€‹ç»Ÿä¸€å’Œçµæ´»ï¼Œç‰¹åˆ«æ˜¯â€åœ¨éœ€è¦ç»„åˆå¤šä¸ªå·¥å…·ï»¿ç»“æœæˆ–å¤„ç†å¼‚å¸¸æƒ…å†µâ€æ—¶ã€‚

äº”ã€è‡ªä¸»å®ç° Manus æ™ºèƒ½ä½“
----------------

è™½ç„¶ OpenManus ä»£ï»¿ç é‡å¾ˆå¤§ï¼Œä½†å…¶å®å¾ˆå¤šä»£ç éƒ½æ˜¯åœ¨å®ç°æ™ºèƒ½ä½“æ‰€éœ€çš„æ”¯æŒç³»ç»Ÿâ€‹ï¼Œæ¯”å¦‚è°ƒç”¨å¤§æ¨¡å‹ã€ä¼šè¯è®°å¿†ã€å·¥å…·è°ƒç”¨èƒ½åŠ›ç­‰ã€‚å¦‚æœä½¿ç”¨ â€AI å¼€å‘æ¡†æ¶ï¼Œè¿™äº›èƒ½åŠ›éƒ½ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å®ç°ï¼Œä»£ç é‡ä¼šç®€ï»¿å•å¾ˆå¤šã€‚ä¸‹é¢å°±è®©æˆ‘ä»¬åŸºäº Spring AI æ¡†æ¶ï¼Œâ€å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Manus æ™ºèƒ½ä½“ã€‚

### å®šä¹‰æ•°æ®æ¨¡å‹

æ–°å»º `agent.model` åŒ…ï¼Œå°†æ‰€æœ‰ç”¨åˆ°çš„æ•°æ®æ¨¡å‹ï¼ˆå®ä½“ç±»ã€æšä¸¾ç±»ç­‰ï¼‰éƒ½æ”¾åˆ°è¯¥åŒ…ä¸‹ã€‚

ç›®å‰æˆ‘ä»¬åªï»¿éœ€è¦å®šä¹‰ Agenâ€‹t çš„çŠ¶æ€æšä¸¾ï¼Œç”¨â€äºæ§åˆ¶æ™ºèƒ½ä½“çš„æ‰§è¡Œï»¿ã€‚AgentStaâ€te ä»£ç å¦‚ä¸‹ï¼š

```java
/**  
 * ä»£ç†æ‰§è¡ŒçŠ¶æ€çš„æšä¸¾ç±»  
 */
public enum AgentState {

/**
 * ç©ºé—²çŠ¶æ€
 */
IDLE,

/**
 * è¿è¡Œä¸­çŠ¶æ€
 */
RUNNING,

/**
 * å·²å®ŒæˆçŠ¶æ€
 */
FINISHED,

/**
 * é”™è¯¯çŠ¶æ€
 */
ERROR
}
```

### æ ¸å¿ƒæ¶æ„å¼€å‘

é¦–å…ˆå®šä¹‰æ™ºèƒ½ä½“çš„æ ¸å¿ƒæ¶æ„ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç±»ï¼š

*   BaseAgentï¼šæ™ºèƒ½ä½“åŸºç±»ï¼Œå®šä¹‰åŸºæœ¬ä¿¡æ¯å’Œå¤šæ­¥éª¤æ‰§è¡Œæµç¨‹

*   ReActAgentï¼šå®ç°æ€è€ƒå’Œè¡ŒåŠ¨ä¸¤ä¸ªæ­¥éª¤çš„æ™ºèƒ½ä½“

*   ToolCallAgentï¼šå®ç°å·¥å…·è°ƒç”¨èƒ½åŠ›çš„æ™ºèƒ½ä½“

*   YuManusï¼šæœ€ç»ˆå¯ä½¿ç”¨çš„ Manus å®ä¾‹


#### 1ã€å¼€å‘åŸºç¡€ Agent ç±»

å‚è€ƒ Opï»¿enManus çš„â€‹å®ç°æ–¹å¼ï¼ŒBaseâ€Agent çš„ä»£ç ï»¿å¦‚ä¸‹ï¼š

```java
/**  
 * æŠ½è±¡åŸºç¡€ä»£ç†ç±»ï¼Œç”¨äºç®¡ç†ä»£ç†çŠ¶æ€å’Œæ‰§è¡Œæµç¨‹ã€‚  
 *   
 * æä¾›çŠ¶æ€è½¬æ¢ã€å†…å­˜ç®¡ç†å’ŒåŸºäºæ­¥éª¤çš„æ‰§è¡Œå¾ªç¯çš„åŸºç¡€åŠŸèƒ½ã€‚  
 * å­ç±»å¿…é¡»å®ç°stepæ–¹æ³•ã€‚  
 */
@Data
@Slf4j
public abstract class BaseAgent {

// æ ¸å¿ƒå±æ€§
private String name;

// æç¤º
private String systemPrompt;
private String nextStepPrompt;

// çŠ¶æ€
private AgentState state = AgentState.IDLE;

// æ‰§è¡Œæ§åˆ¶
private int maxSteps = 10;
private int currentStep = 0;

// LLM
private ChatClient chatClient;

// Memoryï¼ˆéœ€è¦è‡ªä¸»ç»´æŠ¤ä¼šè¯ä¸Šä¸‹æ–‡ï¼‰
private List<Message> messageList = new ArrayList<>();

/**
 * è¿è¡Œä»£ç†
 *
 * @param userPrompt ç”¨æˆ·æç¤ºè¯
 * @return æ‰§è¡Œç»“æœ
 */
public String run(String userPrompt) {
if (this.state != AgentState.IDLE) {
throw new RuntimeException("Cannot run agent from state: " + this.state);
}
if (StringUtil.isBlank(userPrompt)) {
throw new RuntimeException("Cannot run agent with empty user prompt");
}
// æ›´æ”¹çŠ¶æ€
state = AgentState.RUNNING;
// è®°å½•æ¶ˆæ¯ä¸Šä¸‹æ–‡
messageList.add(new UserMessage(userPrompt));
// ä¿å­˜ç»“æœåˆ—è¡¨
List<String> results = new ArrayList<>();
try {
for (int i = 0; i < maxSteps && state != AgentState.FINISHED; i++) {
int stepNumber = i + 1;
currentStep = stepNumber;
log.info("Executing step " + stepNumber + "/" + maxSteps);
// å•æ­¥æ‰§è¡Œ
String stepResult = step();
String result = "Step " + stepNumber + ": " + stepResult;
results.add(result);
}
// æ£€æŸ¥æ˜¯å¦è¶…å‡ºæ­¥éª¤é™åˆ¶
if (currentStep >= maxSteps) {
state = AgentState.FINISHED;
results.add("Terminated: Reached max steps (" + maxSteps + ")");
}
return String.join("\n", results);
} catch (Exception e) {
state = AgentState.ERROR;
log.error("Error executing agent", e);
return "æ‰§è¡Œé”™è¯¯" + e.getMessage();
} finally {
// æ¸…ç†èµ„æº
this.cleanup();
}
}

/**
 * æ‰§è¡Œå•ä¸ªæ­¥éª¤
 *
 * @return æ­¥éª¤æ‰§è¡Œç»“æœ
 */
public abstract String step();

/**
 * æ¸…ç†èµ„æº
 */
protected void cleanup() {
// å­ç±»å¯ä»¥é‡å†™æ­¤æ–¹æ³•æ¥æ¸…ç†èµ„æº
}
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¦æ³¨æ„ 3 ç‚¹ï¼š

1.  åŒ…å« chatClient å±æ€§ï¼Œç”±è°ƒç”¨æ–¹ä¼ å…¥å…·ä½“è°ƒç”¨å¤§æ¨¡å‹çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯å†™æ­»ä½¿ç”¨çš„å¤§æ¨¡å‹ï¼Œæ›´çµæ´»

2.  åŒ…å« messageList å±æ€§ï¼Œç”¨äºç»´æŠ¤æ¶ˆæ¯ä¸Šä¸‹æ–‡åˆ—è¡¨

3.  é€šè¿‡ state å±æ€§æ¥æ§åˆ¶æ™ºèƒ½ä½“çš„æ‰§è¡Œæµç¨‹


#### 2ã€å¼€å‘ ReActAgent ç±»

å‚è€ƒ OpenMï»¿anus çš„å®ç°æ–¹å¼ï¼Œç»§æ‰¿è‡ª â€‹BaseAgentï¼Œå¹¶ä¸”å°† sâ€tep æ–¹æ³•åˆ†è§£ä¸º thinkï»¿ å’Œ act ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚Râ€eActAgent çš„ä»£ç å¦‚ä¸‹ï¼š

```java
/**  
 * ReAct (Reasoning and Acting) æ¨¡å¼çš„ä»£ç†æŠ½è±¡ç±»  
 * å®ç°äº†æ€è€ƒ-è¡ŒåŠ¨çš„å¾ªç¯æ¨¡å¼  
 */
@EqualsAndHashCode(callSuper = true)
@Data
public abstract class ReActAgent extends BaseAgent {

/**
 * å¤„ç†å½“å‰çŠ¶æ€å¹¶å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨
 *
 * @return æ˜¯å¦éœ€è¦æ‰§è¡Œè¡ŒåŠ¨ï¼Œtrueè¡¨ç¤ºéœ€è¦æ‰§è¡Œï¼Œfalseè¡¨ç¤ºä¸éœ€è¦æ‰§è¡Œ
 */
public abstract boolean think();

/**
 * æ‰§è¡Œå†³å®šçš„è¡ŒåŠ¨
 *
 * @return è¡ŒåŠ¨æ‰§è¡Œç»“æœ
 */
public abstract String act();

/**
 * æ‰§è¡Œå•ä¸ªæ­¥éª¤ï¼šæ€è€ƒå’Œè¡ŒåŠ¨
 *
 * @return æ­¥éª¤æ‰§è¡Œç»“æœ
 */
@Override
public String step() {
try {
boolean shouldAct = think();
if (!shouldAct) {
return "æ€è€ƒå®Œæˆ - æ— éœ€è¡ŒåŠ¨";
}
return act();
} catch (Exception e) {
// è®°å½•å¼‚å¸¸æ—¥å¿—
e.printStackTrace();
return "æ­¥éª¤æ‰§è¡Œå¤±è´¥: " + e.getMessage();
}
}
}
```

#### 3ã€å¼€å‘ ToolCallAgent ç±»

ToolCaï»¿llAgent è´Ÿè´£å®ç°â€‹å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œç»§æ‰¿è‡ª Râ€eActAgentï¼Œå…·ä½“ï»¿å®ç°äº† think å’Œ â€act ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚

æˆ‘ä»¬æœ‰ 3 ç§æ–¹æ¡ˆæ¥å®ç° ToolCallAgentï¼š

1ï¼‰åŸºäº Sï»¿pring AI çš„å·¥â€‹å…·è°ƒç”¨èƒ½åŠ›ï¼Œæ‰‹åŠ¨æ§åˆ¶å·¥å…·â€æ‰§è¡Œã€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚ï»¿â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€

å…¶å® Spring çš„ ChatClient å·²ç»æ”¯æŒé€‰æ‹©å·¥å…·è¿›è¡Œè°ƒç”¨ï¼ˆå†…éƒ¨å®Œæˆäº† thinkã€actã€observeï¼‰ï¼Œä½†è¿™é‡Œæˆ‘ä»¬è¦è‡ªä¸»å®ç°ï¼Œå¯ä»¥ä½¿ç”¨ Spring AI æä¾›çš„ [æ‰‹åŠ¨æ§åˆ¶å·¥å…·æ‰§è¡Œ](https://docs.spring.io/spring-ai/reference/api/tools.html#_user_controlled_tool_execution)ã€‚

2ï¼‰åŸºäº ï»¿Spring AIâ€‹ çš„å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œâ€ç®€åŒ–è°ƒç”¨æµç¨‹ã€‚

ç”±äº Sprï»¿ing AI å®Œå…¨æ‰˜ç®¡äº†â€‹å·¥å…·è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠâ€æ‰€æœ‰å·¥å…·è°ƒç”¨çš„ä»£ç ä½œä¸º ï»¿think æ–¹æ³•ï¼Œè€Œ aâ€ct æ–¹æ³•ä¸å®šä¹‰ä»»ä½•åŠ¨ä½œã€‚

3ï¼‰è‡ªä¸»å®ç°å·¥å…·è°ƒç”¨èƒ½åŠ›ã€‚

ä¹Ÿå°±æ˜¯å·¥å…·è°ƒç”¨ï»¿ç« èŠ‚æåˆ°çš„å®ç°åŸç†ï¼šè‡ªå·±å†™â€‹ Promptï¼Œå¼•å¯¼ AIâ€ å›å¤æƒ³è¦è°ƒç”¨çš„å·¥å…·åˆ—è¡¨å’Œï»¿è°ƒç”¨å‚æ•°ï¼Œç„¶åå†æ‰§è¡Œå·¥å…·å¹¶â€å°†ç»“æœè¿”é€ç»™ AI å†æ¬¡æ‰§è¡Œã€‚

ä½¿ç”¨å“ªç§æ–¹æ¡ˆå‘¢ï¼Ÿ

å¦‚æœæ˜¯ä¸ºäº†å­¦ï»¿ä¹  ReAct æ¨¡å¼ï¼Œè®©â€‹æµç¨‹æ›´æ¸…æ™°ï¼Œæ¨èç¬¬ä¸€ç§ï¼›â€å¦‚æœåªæ˜¯ä¸ºäº†å¿«é€Ÿå®ç°ï¼Œæ¨ï»¿èç¬¬äºŒç§ï¼›ä¸å»ºè®®é‡‡ç”¨ç¬¬ä¸‰â€ç§æ–¹æ¡ˆï¼Œè¿‡äºåŸç”Ÿï¼Œå¼€å‘æˆæœ¬é«˜ã€‚

ä¸‹é¢æˆ‘ä»¬é‡‡ï»¿ç”¨ç¬¬ä¸€ç§æ–¹æ¡ˆå®ç° â€‹ToolCallAâ€gentï¼Œå…ˆå®šä¹‰æ‰€ï»¿éœ€çš„å±æ€§å’Œæ„é€ æ–¹æ³•â€ï¼š

```java
/**  
 * å¤„ç†å·¥å…·è°ƒç”¨çš„åŸºç¡€ä»£ç†ç±»ï¼Œå…·ä½“å®ç°äº† think å’Œ act æ–¹æ³•ï¼Œå¯ä»¥ç”¨ä½œåˆ›å»ºå®ä¾‹çš„çˆ¶ç±»  
 */
@EqualsAndHashCode(callSuper = true)
@Data
@Slf4j
public class ToolCallAgent extends ReActAgent {

// å¯ç”¨çš„å·¥å…·
private final ToolCallback[] availableTools;

// ä¿å­˜äº†å·¥å…·è°ƒç”¨ä¿¡æ¯çš„å“åº”
private ChatResponse toolCallChatResponse;

// å·¥å…·è°ƒç”¨ç®¡ç†è€…
private final ToolCallingManager toolCallingManager;

// ç¦ç”¨å†…ç½®çš„å·¥å…·è°ƒç”¨æœºåˆ¶ï¼Œè‡ªå·±ç»´æŠ¤ä¸Šä¸‹æ–‡
private final ChatOptions chatOptions;

public ToolCallAgent(ToolCallback[] availableTools) {
super();
this.availableTools = availableTools;
this.toolCallingManager = ToolCallingManager.builder().build();
// ç¦ç”¨ Spring AI å†…ç½®çš„å·¥å…·è°ƒç”¨æœºåˆ¶ï¼Œè‡ªå·±ç»´æŠ¤é€‰é¡¹å’Œæ¶ˆæ¯ä¸Šä¸‹æ–‡
this.chatOptions = DashScopeChatOptions.builder()
.withProxyToolCalls(true)
.build();
}
}
```

æ³¨æ„ï¼Œåœ¨ä¸Šè¿°ä»£ç ä¸­ï»¿ï¼Œæˆ‘ä»¬é€šè¿‡å°† DashScopeChâ€‹atOptions çš„ withPrâ€oxyToolCalls é€‰é¡¹è®¾ç½®ä¸ºï»¿ trueï¼Œæ¥ç¦æ­¢ Spring Aâ€I æ‰˜ç®¡å·¥å…·è°ƒç”¨ï¼Œè€Œæ˜¯æˆ‘ä»¬è‡ªä¸»å®ç°ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/EGJoiTueixnROgjz.webp" alt="" width="100%" />


è™½ç„¶å®˜æ–¹æä¾›çš„ç¤ºä¾‹ä»£ç æ˜¯è®¾ï»¿ç½® internalToolExecutionEnaâ€‹bled ä¸º false æ¥ç¦ç”¨ Spring AIâ€ æ‰˜ç®¡å·¥å…·è°ƒç”¨ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é˜¿é‡Œçš„ Dashï»¿ScopeChatModel å¤§æ¨¡å‹å®¢æˆ·ç«¯ï¼Œå¦‚æœæŒ‰ç…§â€ä¸‹é¢çš„æ–¹å¼ï¼Œä¼šç›´æ¥å¯¼è‡´å·¥å…·è°ƒç”¨å¤±æ•ˆï¼

```java
ChatOptions chatOptions = ToolCallingChatOptions.builder()
.toolCallbacks(new CustomerTools())
.internalToolExecutionEnabled(false)
.build();
```

ä¸‹é¢æˆ‘ä»¬å®ï»¿ç° think æ–¹â€‹æ³•ï¼Œä¼ å…¥å·¥å…·åˆ—è¡¨å¹¶â€è°ƒç”¨å¤§æ¨¡å‹ï¼Œå¾—åˆ°éœ€ï»¿è¦è°ƒç”¨çš„å·¥å…·åˆ—è¡¨ï¼š

```java
/**  
 * å¤„ç†å½“å‰çŠ¶æ€å¹¶å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨  
 *  
 * @return æ˜¯å¦éœ€è¦æ‰§è¡Œè¡ŒåŠ¨  
 */
@Override
public boolean think() {
if (getNextStepPrompt() != null && !getNextStepPrompt().isEmpty()) {
UserMessage userMessage = new UserMessage(getNextStepPrompt());
getMessageList().add(userMessage);
}
List<Message> messageList = getMessageList();
Prompt prompt = new Prompt(messageList, chatOptions);
try {
// è·å–å¸¦å·¥å…·é€‰é¡¹çš„å“åº”
ChatResponse chatResponse = getChatClient().prompt(prompt)
.system(getSystemPrompt())
.tools(availableTools)
.call()
.chatResponse();
// è®°å½•å“åº”ï¼Œç”¨äº Act
this.toolCallChatResponse = chatResponse;
AssistantMessage assistantMessage = chatResponse.getResult().getOutput();
// è¾“å‡ºæç¤ºä¿¡æ¯
String result = assistantMessage.getText();
List<AssistantMessage.ToolCall> toolCallList = assistantMessage.getToolCalls();
log.info(getName() + "çš„æ€è€ƒ: " + result);
log.info(getName() + "é€‰æ‹©äº† " + toolCallList.size() + " ä¸ªå·¥å…·æ¥ä½¿ç”¨");
String toolCallInfo = toolCallList.stream()
.map(toolCall -> String.format("å·¥å…·åç§°ï¼š%sï¼Œå‚æ•°ï¼š%s",
toolCall.name(),
toolCall.arguments())
)
.collect(Collectors.joining("\n"));
log.info(toolCallInfo);
if (toolCallList.isEmpty()) {
// åªæœ‰ä¸è°ƒç”¨å·¥å…·æ—¶ï¼Œæ‰è®°å½•åŠ©æ‰‹æ¶ˆæ¯
getMessageList().add(assistantMessage);
return false;
} else {
// éœ€è¦è°ƒç”¨å·¥å…·æ—¶ï¼Œæ— éœ€è®°å½•åŠ©æ‰‹æ¶ˆæ¯ï¼Œå› ä¸ºè°ƒç”¨å·¥å…·æ—¶ä¼šè‡ªåŠ¨è®°å½•
return true;
}
} catch (Exception e) {
log.error(getName() + "çš„æ€è€ƒè¿‡ç¨‹é‡åˆ°äº†é—®é¢˜: " + e.getMessage());
getMessageList().add(
new AssistantMessage("å¤„ç†æ—¶é‡åˆ°é”™è¯¯: " + e.getMessage()));
return false;
}
}
```

æœ€åå®ç° ï»¿act æ–¹æ³•ï¼Œæ‰§è¡Œâ€‹å·¥å…·è°ƒç”¨åˆ—è¡¨ï¼Œå¾—åˆ°â€è¿”å›ç»“æœï¼Œå¹¶å°†å·¥å…·ï»¿çš„å“åº”æ·»åŠ åˆ°æ¶ˆæ¯åˆ—â€è¡¨ä¸­ï¼š

```java
/**  
 * æ‰§è¡Œå·¥å…·è°ƒç”¨å¹¶å¤„ç†ç»“æœ  
 *  
 * @return æ‰§è¡Œç»“æœ  
 */
@Override
public String act() {
if (!toolCallChatResponse.hasToolCalls()) {
return "æ²¡æœ‰å·¥å…·è°ƒç”¨";
}
// è°ƒç”¨å·¥å…·
Prompt prompt = new Prompt(getMessageList(), chatOptions);
ToolExecutionResult toolExecutionResult = toolCallingManager.executeToolCalls(prompt, toolCallChatResponse);
// è®°å½•æ¶ˆæ¯ä¸Šä¸‹æ–‡ï¼ŒconversationHistory å·²ç»åŒ…å«äº†åŠ©æ‰‹æ¶ˆæ¯å’Œå·¥å…·è°ƒç”¨è¿”å›çš„ç»“æœ
setMessageList(toolExecutionResult.conversationHistory());
// å½“å‰å·¥å…·è°ƒç”¨çš„ç»“æœ
ToolResponseMessage toolResponseMessage = (ToolResponseMessage) CollUtil.getLast(toolExecutionResult.conversationHistory());
String results = toolResponseMessage.getResponses().stream()
.map(response -> "å·¥å…· " + response.name() + " å®Œæˆäº†å®ƒçš„ä»»åŠ¡ï¼ç»“æœ: " + response.responseData())
.collect(Collectors.joining("\n"));
log.info(results);
return results;
}
```

æ³¨æ„ç»´æŠ¤æ¶ˆæ¯ä¸Šä¸‹æ–‡ï¼Œä¸è¦é‡å¤æ·»åŠ äº†æ¶ˆæ¯ï¼Œå› ä¸º `toolExecutionResult.conversationHistory()` æ–¹æ³•å·²ç»åŒ…å«äº†åŠ©æ‰‹æ¶ˆæ¯å’Œå·¥å…·è°ƒç”¨è¿”å›çš„ç»“æœã€‚

å¯ä»¥å¸¦çœ‹ä¸‹ toolCallingManager.executeToolCalls çš„æºç ï¼Œä¼šè‡ªåŠ¨è¿½åŠ åŠ©æ‰‹æ¶ˆæ¯åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/5LRrBoyPvs2kAJny.webp" alt="" width="100%" />

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/FlxqTqefcho72bGH.webp" alt="" width="100%" />




åƒä¸‡åˆ«å¿˜äº†ï»¿ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€â€‹ä¸ªç»ˆæ­¢å·¥å…·ï¼Œè®©æ™ºèƒ½â€ä½“å¯ä»¥è‡ªè¡Œå†³å®šä»»ï»¿åŠ¡ç»“æŸã€‚

1ï¼‰åœ¨ tools åŒ…ä¸‹æ–°å»º TerminateToolï¼š

```java
public class TerminateTool {

@Tool(description = """
Terminate the interaction when the request is met OR if the assistant cannot proceed further with the task.
"When you have finished all the tasks, call this tool to end the work.
""")
public String doTerminate() {
return "ä»»åŠ¡ç»“æŸ";
}
}
```

2ï¼‰ä¿®æ”¹ ToolRegistrationï¼Œæ³¨å†Œä¸­æ­¢å·¥å…·ï¼š

```java
TerminateTool terminateTool = new TerminateTool();

return ToolCallbacks.from(
fileOperationTool,
webSearchTool,
webScrapingTool,
resourceDownloadTool,
terminalOperationTool,
pdfGenerationTool,
terminateTool
);
```

3ï¼‰å®Œå–„ ï»¿act æ–¹æ³•ï¼Œå½“è°ƒâ€‹ç”¨äº†ç»ˆæ­¢å·¥å…·æ—¶ï¼Œä¿®â€æ”¹ agent çš„ï»¿çŠ¶æ€ä¸º â€œå·²ç»“æŸâ€â€ï¼š

```java
// å½“å‰å·¥å…·è°ƒç”¨çš„ç»“æœ  
ToolResponseMessage toolResponseMessage = (ToolResponseMessage) CollUtil.getLast(toolExecutionResult.conversationHistory());
String results = toolResponseMessage.getResponses().stream()
.map(response -> "å·¥å…· " + response.name() + " å®Œæˆäº†å®ƒçš„ä»»åŠ¡ï¼ç»“æœ: " + response.responseData())
.collect(Collectors.joining("\n"));
// åˆ¤æ–­æ˜¯å¦è°ƒç”¨äº†ç»ˆæ­¢å·¥å…·  
boolean terminateToolCalled = toolResponseMessage.getResponses().stream()
.anyMatch(response -> "doTerminate".equals(response.name()));
if (terminateToolCalled) {
setState(AgentState.FINISHED);
}
log.info(results);
return results;
```

#### 4ã€å¼€å‘ YuManus ç±»

YuManus æ˜¯ï»¿å¯ä»¥ç›´æ¥æä¾›ç»™å…¶ä»–æ–¹æ³•è°ƒç”¨çš„ AIâ€‹ è¶…çº§æ™ºèƒ½ä½“å®ä¾‹ï¼Œç»§æ‰¿è‡ª Toolâ€CallAgentï¼Œéœ€è¦ç»™æ™ºèƒ½ä½“è®¾ï»¿ç½®å„ç§å‚æ•°ï¼Œæ¯”å¦‚å¯¹è¯å®¢æˆ·ç«¯ chaâ€tClientã€å·¥å…·è°ƒç”¨åˆ—è¡¨ç­‰ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```java
@Component
public class YuManus extends ToolCallAgent {

public YuManus(ToolCallback[] allTools, ChatModel dashscopeChatModel) {
super(allTools);
this.setName("yuManus");
String SYSTEM_PROMPT = """
You are YuManus, an all-capable AI assistant, aimed at solving any task presented by the user.
You have various tools at your disposal that you can call upon to efficiently complete complex requests.
""";
this.setSystemPrompt(SYSTEM_PROMPT);
String NEXT_STEP_PROMPT = """
Based on user needs, proactively select the most appropriate tool or combination of tools.
For complex tasks, you can break down the problem and use different tools step by step to solve it.
After using each tool, clearly explain the execution results and suggest the next steps.
If you want to stop the interaction at any point, use the `terminate` tool/function call.
""";
this.setNextStepPrompt(NEXT_STEP_PROMPT);
this.setMaxSteps(20);
// åˆå§‹åŒ–å®¢æˆ·ç«¯
ChatClient chatClient = ChatClient.builder(dashscopeChatModel)
.defaultAdvisors(new MyLoggerAdvisor())
.build();
this.setChatClient(chatClient);
}
}
```

### æµ‹è¯•æ™ºèƒ½ä½“

ç¼–å†™å•å…ƒæµ‹è¯•ç±»ï¼Œè®©è¶…çº§æ™ºèƒ½ä½“å®Œæˆä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„ä»»åŠ¡ï¼š

```java
@SpringBootTest
class YuManusTest {

@Resource
private YuManus yuManus;

@Test
void run() {
String userPrompt = """
æˆ‘çš„å¦ä¸€åŠå±…ä½åœ¨ä¸Šæµ·é™å®‰åŒºï¼Œè¯·å¸®æˆ‘æ‰¾åˆ° 5 å…¬é‡Œå†…åˆé€‚çš„çº¦ä¼šåœ°ç‚¹ï¼Œ
å¹¶ç»“åˆä¸€äº›ç½‘ç»œå›¾ç‰‡ï¼Œåˆ¶å®šä¸€ä»½è¯¦ç»†çš„çº¦ä¼šè®¡åˆ’ï¼Œ
å¹¶ä»¥ PDF æ ¼å¼è¾“å‡º""";
String answer = yuManus.run(userPrompt);
Assertions.assertNotNull(answer);
}
}
```

ä»¥ Debï»¿ug æ¨¡å¼è¿è¡Œï¼Œèƒ½â€‹å¤ŸæŸ¥çœ‹åˆ° AI æ¯â€ä¸€æ­¥çš„æ€è€ƒè¿‡ç¨‹ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/WLIrziReAJr9zBVA.webp" alt="" width="100%" />


æ‰§è¡Œå®Œæˆåï»¿ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸€æ­¥çš„â€‹æ‰§è¡Œç»“æœï¼Œå¹¶ä¸”å¯ä»¥â€åœ¨æœ¬åœ°æŸ¥çœ‹åˆ°å·²ä¸‹è½½ï»¿çš„å›¾ç‰‡å’Œç”Ÿæˆçš„â€ PDFã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/TOhzfpBAWsewYqJy.webp" alt="" width="100%" />



æ³¨æ„ï¼Œç”±äº AI æ˜¯å­˜åœ¨éšæœºæ€§çš„ï¼Œæ‰§è¡Œçš„æ­¥éª¤æ•°ä¹Ÿä¸å›ºå®šã€‚ç»è¿‡æµ‹è¯•å¤§å®¶ä¼šå‘ç°ï¼Œæ‹¥æœ‰è‡ªä¸»è§„åˆ’èƒ½åŠ›çš„è¶…çº§æ™ºèƒ½ä½“è™½ç„¶èƒ½å¤Ÿå®Œæˆå¤æ‚çš„ä»»åŠ¡ï¼Œä½†ç¼ºç‚¹æ˜¯ **éå¸¸æµªè´¹ tokensï¼Œå¹¶ä¸”å¯èƒ½é™·å…¥æ— é™å¾ªç¯ã€‚** æ‰€ä»¥è¿˜æ˜¯è¦æŒ‰éœ€ä½¿ç”¨ã€‚

æ„Ÿå…´è¶£çš„åŒï»¿å­¦å¯ä»¥å‚è€ƒ Openâ€‹Manus çš„å®ç°æ¥â€è¿›ä¸€æ­¥ä¼˜åŒ–è¶…çº§æ™ºèƒ½ä½“ï»¿ï¼Œæ¯”å¦‚é˜²æ­¢é™·å…¥æ— é™å¾ªâ€ç¯ã€èƒ½å¤Ÿå’Œç”¨æˆ·äº¤äº’ç­‰ã€‚

å…­ã€æ‰©å±•çŸ¥è¯†
------

### æ™ºèƒ½ä½“å·¥ä½œæµ

å½“æˆ‘ä»¬é¢å¯¹å¤æ‚ä»»ï»¿åŠ¡æ—¶ï¼Œå•ä¸€æ™ºèƒ½ä½“å¯èƒ½æ— æ³•æ»¡è¶³éœ€â€‹æ±‚ã€‚å› æ­¤æ™ºèƒ½ä½“å·¥ä½œæµï¼ˆAgenâ€t Workflowï¼‰åº”è¿è€Œç”Ÿï»¿ï¼Œé€šè¿‡ç®€å•çš„ç¼–æ’ï¼Œå…è®¸å¤šä¸ªä¸“ä¸šâ€æ™ºèƒ½ä½“ååŒå·¥ä½œï¼Œå„å¸å…¶èŒã€‚

æ™ºèƒ½ä½“å·¥ä½œæµç¼–æ’çš„ç²¾é«“åœ¨äº **å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºè¿è´¯çš„èŠ‚ç‚¹é“¾**ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç”±æœ€é€‚åˆçš„æ™ºèƒ½ä½“å¤„ç†ï¼ŒèŠ‚ç‚¹é—´é€šè¿‡æ¡ä»¶è·¯ç”±çµæ´»è¿æ¥ï¼Œå½¢æˆä¸€ä¸ªé«˜æ•ˆã€å¯é çš„æ‰§è¡Œç½‘ç»œã€‚

Anthropic æ›¾ç»åœ¨ä¸€ç¯‡ [ç ”ç©¶æŠ¥å‘Šã€ŠBuilding effective agentsã€‹](https://www.anthropic.com/engineering/building-effective-agents?spm=4347728f.4638ae38.0.0.54b97646EY5Jbw) ä¸­æåˆ°äº†å¤šç§ä¸åŒçš„æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼ï¼Œå¤§å®¶éœ€è¦äº†è§£æ¯ç§æ¨¡å¼çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚

#### æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼

1ï¼‰Prompt Chaining æç¤ºé“¾å·¥ä½œæµ

Prompt Cï»¿haining æ˜¯æœ€å¸¸è§çš„æ™ºèƒ½ä½“â€‹å·¥ä½œæµæ¨¡å¼ä¹‹ä¸€ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†â€ä¸€ä¸ªå¤æ‚ä»»åŠ¡æ‹†è§£ä¸ºä¸€ç³»åˆ—æœ‰åºçš„å­ï»¿ä»»åŠ¡ï¼Œæ¯ä¸€æ­¥ç”± LLM å¤„ç†å‰ä¸€â€æ­¥çš„è¾“å‡ºï¼Œé€æ­¥æ¨è¿›ä»»åŠ¡å®Œæˆã€‚

æ¯”å¦‚åœ¨å†…å®¹ç”Ÿæˆï»¿åœºæ™¯ä¸­ï¼Œå¯ä»¥å…ˆè®©æ¨¡å‹ç”Ÿæˆå¤§â€‹çº²ï¼Œå†æ ¹æ®å¤§çº²ç”Ÿæˆè¯¦ç»†å†…å®¹â€ï¼Œæœ€åè¿›è¡Œæ¶¦è‰²å’Œæ ¡å¯¹ã€‚æ¯ä¸€ï»¿æ­¥éƒ½å¯ä»¥æ’å…¥æ ¡éªŒå’Œä¸­é—´æ£€æŸ¥â€ï¼Œç¡®ä¿æµç¨‹æ­£ç¡®ã€è¾“å‡ºæ›´ç²¾å‡†ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/k8OiC4KGZMh7JXLw.webp" alt="" width="100%" />


è¿™ç§æ¨¡å¼ç»“ï»¿æ„æ¸…æ™°ï¼Œæ˜“äºè°ƒè¯•ï¼Œâ€‹éå¸¸é€‚åˆä»»åŠ¡å¯ä»¥è¢«â€è‡ªç„¶åˆ†è§£ä¸ºå¤šä¸ªé˜¶æ®µï»¿çš„åœºæ™¯ã€‚

2ï¼‰Routing è·¯ç”±åˆ†æµå·¥ä½œæµ

Routing ï»¿å·¥ä½œæµæ¨¡å¼åˆ™æ›´åƒæ˜¯ä¸€ä¸ªæ™ºèƒ½çš„è·¯ç”±â€‹å™¨ã€‚ç³»ç»Ÿä¼šæ ¹æ®è¾“å…¥å†…å®¹çš„ç±»å‹â€æˆ–ç‰¹å¾ï¼Œå°†ä»»åŠ¡åˆ†å‘ç»™æœ€åˆé€‚çš„ä¸‹ï»¿æ¸¸æ™ºèƒ½ä½“æˆ–å¤„ç†æµç¨‹ã€‚éå¸¸é€‚åˆå¤šâ€æ ·åŒ–è¾“å…¥å’Œå¤šç§å¤„ç†ç­–ç•¥çš„åœºæ™¯ã€‚

æ¯”å¦‚åœ¨å®¢æœç³»ç»Ÿä¸­ï¼Œï»¿å¯ä»¥å°†å¸¸è§é—®é¢˜ã€é€€æ¬¾è¯·æ±‚ã€æŠ€æœ¯æ”¯æŒç­‰â€‹åˆ†æµåˆ°ä¸åŒçš„å¤„ç†æ¨¡å—ï¼›åœ¨å¤šæ¨¡å‹ç³»ç»Ÿä¸­â€ï¼Œå¯ä»¥å°†ç®€å•é—®é¢˜åˆ†é…ç»™å°æ¨¡å‹ï¼Œå¤æ‚é—®ï»¿é¢˜äº¤ç»™å¤§æ¨¡å‹ã€‚è¿™æ ·æ—¢æé«˜äº†å¤„ç†æ•ˆç‡ï¼Œâ€ä¹Ÿä¿è¯äº†æ¯ç±»é—®é¢˜éƒ½èƒ½å¾—åˆ°æœ€ä¼˜è§£ç­”ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/m4vQ65viDd0EoEAI.webp" alt="" width="100%" />


3ï¼‰Parallelization å¹¶è¡ŒåŒ–å·¥ä½œæµ

åœ¨ Parï»¿allelizatiâ€‹on å¹¶è¡ŒåŒ–æ¨¡å¼ä¸‹ï¼Œâ€ä»»åŠ¡ä¼šè¢«æ‹†åˆ†ä¸ºå¤šä¸ªå¯ï»¿ä»¥å¹¶è¡Œå¤„ç†çš„å­ä»»åŠ¡ï¼Œâ€æœ€åèšåˆå„è‡ªçš„ç»“æœã€‚

æ¯”å¦‚åœ¨ä»£ç å®‰å…¨å®¡æŸ¥åœºæ™¯ï»¿ä¸­ï¼Œå¯ä»¥è®©å¤šä¸ªæ™ºèƒ½ä½“åˆ†åˆ«å¯¹åŒä¸€æ®µä»£ç è¿›è¡Œå®‰å…¨â€‹å®¡æŸ¥ï¼Œæœ€å â€œæŠ•ç¥¨â€ å†³å®šæ˜¯å¦æœ‰é—®é¢˜ã€‚åˆæ¯”å¦‚â€åœ¨å¤„ç†é•¿æ–‡æ¡£æ—¶ï¼Œå¯ä»¥å°†æ–‡æ¡£åˆ†æ®µï¼Œæ¯æ®µç”±ä¸åŒæ™ºï»¿èƒ½ä½“å¹¶è¡Œæ€»ç»“ã€‚è¿™ç§æ¨¡å¼å¯ä»¥æ˜¾è‘—æå‡å¤„ç†é€Ÿåº¦ï¼Œâ€å¹¶é€šè¿‡ â€œæŠ•ç¥¨â€ æœºåˆ¶æå‡ç»“æœçš„å‡†ç¡®åº¦ã€‚


![](https://pic.code-nav.cn/course_picture/1608440217629360130/maM1xZsU42RcIUMF.webp)


4ï¼‰Orcï»¿hestratorâ€‹-Workers â€åè°ƒå™¨-æ‰§è¡Œè€…å·¥ä½œï»¿æµ

å¯¹äºå¤æ‚çš„ä»»åŠ¡ã€å‚ä¸ä»»åŠ¡ï»¿çš„æ™ºèƒ½ä½“å¢å¤šæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä½ â€œç®¡ç†è€…â€ï¼Œä¼šâ€‹æ ¹æ®ä»»åŠ¡åŠ¨æ€æ‹†è§£å‡ºå¤šä¸ªå­ä»»åŠ¡ï¼Œå¹¶å°†è¿™äº›å­ä»»åŠ¡åˆ†é…â€ç»™å¤šä¸ª â€œå·¥äººâ€ æ™ºèƒ½ä½“ï¼Œæœ€åå†æ•´åˆæ‰€æœ‰å·¥äººï»¿çš„ç»“æœã€‚è¿™ç§ä¸­å¤®åè°ƒæœºåˆ¶æé«˜äº†å¤æ‚ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡ï¼Œé€‚â€åˆä»»åŠ¡ç»“æ„ä¸ç¡®å®šã€éœ€è¦åŠ¨æ€åˆ†è§£çš„å¤æ‚åœºæ™¯ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/MBvCSteZa4WE7CPP.webp" alt="" width="100%" />



5ï¼‰Evaï»¿luator-Opâ€‹timizer è¯„â€ä¼°-ä¼˜åŒ–å¾ªç¯å·¥ä½œæµ

Evaluatoï»¿r-Optimizer æ¨¡å¼æ¨¡æ‹Ÿâ€‹äº†äººç±» â€œå†™ => è¯„ => æ”¹â€â€ çš„è¿‡ç¨‹ã€‚ä¸€ä¸ªæ™ºèƒ½ä½“è´Ÿè´£ç”Ÿæˆåˆï»¿æ­¥ç»“æœï¼Œå¦ä¸€ä¸ªæ™ºèƒ½ä½“è´Ÿè´£è¯„ä¼°å’Œåâ€é¦ˆï¼ŒäºŒè€…å¾ªç¯è¿­ä»£ä¼˜åŒ–è¾“å‡ºã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨æœºï»¿å™¨ç¿»è¯‘åœºæ™¯ä¸­ï¼Œå…ˆç”±ç¿»è¯‘æ™ºèƒ½ä½“â€‹è¾“å‡ºï¼Œå†ç”±è¯„å®¡æ™ºèƒ½ä½“ç»™å‡ºæ”¹è¿›â€å»ºè®®ï¼Œåå¤è¿­ä»£ç›´åˆ°è¾¾åˆ°æ»¡æ„ï»¿çš„è´¨é‡ã€‚è¿™ç§æ¨¡å¼ç‰¹åˆ«é€‚åˆéœ€è¦å¤šâ€è½®æ‰“ç£¨å’Œè´¨é‡æå‡çš„ä»»åŠ¡ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/wuZhEo9tB0q03F8G.webp" alt="" width="100%" />


#### æ™ºèƒ½ä½“å·¥ä½œæµç¼–æ’æ¡†æ¶

å¦‚æœè¦å®ç°ä¸Šè¿°å·¥ä½œæµï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ï»¿ç”¨ Activitiã€LiteFlow è¿™ç§å·¥ä½œæµæ¡†æ¶ï¼ŒæŠŠæ™ºèƒ½â€‹ä½“å¤„ç†å½“åšå·¥ä½œæµçš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸“é—¨çš„ AI æ™ºèƒ½ä½“â€å·¥ä½œæµç¼–æ’æ¡†æ¶ï¼Œæ¯”å¦‚ LangGraph å’Œ Spring Aï»¿I Alibaba Graphã€‚è¿™ä¸¤ä¸ªæ¡†æ¶å¤§å®¶ç®€å•äº†è§£ä¸€ä¸‹ï¼Œç›´â€åˆ°æ€ä¹ˆç»„åˆå·¥ä½œæµå³å¯ï¼Œå®é™…å­¦ä¹ æˆæœ¬éƒ½ä¸é«˜ã€‚

**1ï¼‰LangGraph**

[LangGraph](https://github.com/langchain-ai/langgraph) æ˜¯ LangChain å›¢é˜Ÿå¼€å‘çš„å‰æ²¿å·¥ä½œæµç¼–æ’æ¡†æ¶ï¼Œä¸“ä¸ºå¤§è¯­è¨€æ¨¡å‹åº”ç”¨è®¾è®¡ï¼Œæ˜¯æ„å»ºå¤æ‚ AI ç³»ç»Ÿçš„é¦–é€‰å·¥å…·ã€‚LangGraph çš„æ ¸å¿ƒç†å¿µæ˜¯å°†æ™ºèƒ½ä½“å·¥ä½œæµè¡¨ç¤ºä¸ºçŠ¶æ€è½¬æ¢å›¾ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æ˜¯å‡½æ•°ã€æ™ºèƒ½ä½“æˆ–å­å·¥ä½œæµï¼Œè¾¹åˆ™ä»£è¡¨çŠ¶æ€è½¬æ¢æ¡ä»¶ã€‚

ç›¸æ¯”äºä¼ ç»Ÿçš„å·¥ä½œæµæ¡†æ¶ï¼ŒLï»¿angGraph çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå®ƒå¯¹å¤§è¯­è¨€æ¨¡å‹å·¥ä½œæµâ€‹çš„æ·±åº¦ä¼˜åŒ–ã€‚æ¡†æ¶æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½æ¥æ»¡è¶³å¤§æ¨¡å‹åº”ç”¨å¼€å‘â€åœºæ™¯ï¼Œæ¯”å¦‚åŠ¨æ€åˆ†æ”¯å’Œå¹¶è¡Œæ‰§è¡Œã€æ€ç»´é“¾æ”¯æŒã€å¯¹è¯ç®¡ç†ã€ï»¿å†…ç½®ç›‘æ§ä¸å¯è§†åŒ–ç­‰ã€‚å¼€å‘è€…å¯ä»¥è½»æ¾å®ç°å¤æ‚çš„æ¨ç†è·¯å¾„â€ï¼Œè®©æ¨¡å‹åœ¨éœ€è¦æ—¶è¿›è¡Œåæ€ã€è§„åˆ’å’Œçº é”™ã€‚

å‰é¢è®²åˆ°çš„å‡ ç§å·¥ä½œæµæ¨¡å¼ï¼Œä»¥åŠæ™®é€šçš„å·¥å…·è°ƒç”¨ä»£ç†åœºæ™¯ï¼Œä½¿ç”¨ LangGraph éƒ½èƒ½è½»æ¾å®Œæˆï¼Œå…·ä½“ç”¨æ³•å’Œä»£ç ç¤ºä¾‹å¯ä»¥å‚è€ƒ [å®˜æ–¹æ–‡æ¡£](https://langchain-ai.github.io/langgraph/tutorials/workflows/#building-blocks-the-augmented-llm)ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/BSLeAOqLBz74bQUi.webp" alt="" width="100%" />


ä¸‹é¢ç»™å¤§å®¶ä¸€æ®µç®€å•çš„å·¥ä½œæµä»£ç ç¤ºä¾‹ï¼š

```python
from langgraph.graph import StateGraph
from typing import TypedDict, List, Annotated

# å®šä¹‰å·¥ä½œæµçŠ¶æ€
class AgentState(TypedDict):
messages: List[dict]
task: str
context: dict

# åˆ›å»ºçŠ¶æ€å›¾
workflow = StateGraph(AgentState)

# æ·»åŠ èŠ‚ç‚¹
workflow.add_node("understand", understand_task)
workflow.add_node("research", research_information)
workflow.add_node("analyze", analyze_data)
workflow.add_node("generate", generate_response)

# å®šä¹‰è¾¹å’Œæ¡ä»¶
workflow.add_edge("understand", "research")
workflow.add_conditional_edges(
"research",
decide_next_step,
{
"needs_more_info": "research",
"ready_for_analysis": "analyze",
"skip_analysis": "generate"
}
)
workflow.add_edge("analyze", "generate")

# è®¾ç½®èµ·å§‹èŠ‚ç‚¹
workflow.set_entry_point("understand")
```

è¿™æ®µä»£ç åˆ©ç”¨ LangGraph æ¡†æ¶å®šä¹‰ï»¿äº†ä¸€ä¸ªå¤šé˜¶æ®µçš„æ™ºèƒ½ä½“å·¥ä½œæµï¼šé¦–å…ˆé€šè¿‡ AgentState æè¿°äº†æ¯ä¸€æ­¥çš„çŠ¶æ€ç»“æ„â€‹ï¼Œç„¶åç”¨ StateGraph åˆ›å»ºäº†ä¸€ä¸ªçŠ¶æ€æµè½¬å›¾ï¼Œä¾æ¬¡æ·»åŠ äº† â€œç†è§£ä»»åŠ¡â€ã€â€œâ€ä¿¡æ¯æ£€ç´¢â€ã€â€œæ•°æ®åˆ†æâ€ å’Œ â€œç»“æœç”Ÿæˆâ€ å››ä¸ªèŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡æœ‰å‘è¾¹å’Œæ¡ä»¶åˆ†æ”¯å°†å®ƒä»¬ï»¿ä¸²è”èµ·æ¥ï¼Œå®ç°äº†æµç¨‹çš„è·³è½¬å’Œå¾ªç¯ï¼Œæœ€åæŒ‡å®šå·¥ä½œæµä» â€œç†è§£ä»»åŠ¡â€ èŠ‚ç‚¹å¼€å§‹ï¼Œæ•´ä½“ä¸Šâ€å®ç°äº†ä¸€ä¸ªå¯è‡ªåŠ¨å†³ç­–ã€å¯å¾ªç¯çš„æ™ºèƒ½ä½“ä»»åŠ¡å¤„ç†æµç¨‹ã€‚

2ï¼‰Spring AI Alibaba Graph

ç›®å‰ Spring AI å®˜æ–¹è¿˜æ²¡æœ‰æä¾›å·¥ä½œæµç¼–æ’èƒ½åŠ›ï¼Œä½†æ˜¯å›½å†…çš„ Spring AI Alibaba å·²ç»æä¾›äº†å·¥ä½œæµç¼–æ’æ¡†æ¶ [Spring AI Alibaba Graph](https://java2ai.com/blog/spring-ai-alibaba-graph-preview/)ã€‚

è™½ç„¶ç›®å‰è¿˜å¤„äº Demo é˜¶æ®µï¼Œå·²ç»æ”¯æŒäº†ï¼š

*   åŸºç¡€å·¥ä½œæµçš„ç¼–æ’

*   ReAct Agent æ¨¡å¼

*   Orchestrator-Workers åè°ƒå™¨-å·¥ä½œè€…æ¨¡å¼


åƒæˆ‘ä»¬å‰é¢è‡ªï»¿ä¸»å¼€å‘çš„ ReAct æ¨¡â€‹å¼çš„ Manus æ™ºèƒ½ä½“â€ï¼Œä½¿ç”¨ Spring Aï»¿I Alibaba Grâ€aphï¼Œå‡ è¡Œä»£ç å°±æå®šäº†ï¼š

```java
ReactAgent reactAgent = ReactAgent.builder()
.name("React Agent Demo")
.prompt("è¯·å®Œæˆæ¥ä¸‹æ¥ç”¨æˆ·è¾“å…¥ç»™ä½ çš„ä»»åŠ¡ã€‚")
.chatClient(chatClient)
.resolver(resolver)
.maxIterations(10)
.build();

reactAgent.invoke(Map.of("messages", new UserMessage(query)))
```

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®ï»¿é™…æ¡ˆä¾‹æ¥æ„Ÿå—åƒ Spring Aâ€‹I Alibaba Graph â€è¿™ç§æ¡†æ¶çš„ä½œç”¨ï¼Œæ¯”å¦‚ç¼–å†™ä¸€ä¸ªæ•°æ®ï»¿åˆ†æå’Œå¯è§†åŒ–æŠ¥å‘Šç”Ÿæˆä»»åŠ¡çš„å·¥ä½œæµâ€ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š

```java
public AIGraph<String, String> dataAnalysisWorkflow(
PlanningAgent planningAgent,
DataCollectionAgent dataCollectionAgent,
AnalysisAgent analysisAgent,
VisualizationAgent visualizationAgent,
ReportingAgent reportingAgent) {

return AIGraph.builder(String.class, String.class)
// ä»»åŠ¡è§„åˆ’èŠ‚ç‚¹
.addNode("planning", input -> planningAgent.run(input), Map.of(
"success", "data_collection"
))
// æ•°æ®æ”¶é›†èŠ‚ç‚¹
.addNode("data_collection", input -> dataCollectionAgent.run(input), Map.of(
"complete", "analysis",
"incomplete", "planning"
))
// æ•°æ®åˆ†æèŠ‚ç‚¹
.addNode("analysis", input -> analysisAgent.run(input), Map.of(
"success", "visualization",
"failure", "data_collection"
))
// æ•°æ®å¯è§†åŒ–èŠ‚ç‚¹
.addNode("visualization", input -> visualizationAgent.run(input), Map.of(
"success", "reporting"
))
// æŠ¥å‘Šç”ŸæˆèŠ‚ç‚¹
.addNode("reporting", input -> reportingAgent.run(input), Map.of())
.withStartAt("planning")
.build();
}
```

è¿™ä¸ªå·¥ä½œæµå±•ç°äº†æ•°æ®ï»¿åˆ†æçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼šä»è§„åˆ’æ™ºèƒ½ä½“åˆ¶å®šåˆ†â€‹æç­–ç•¥å¼€å§‹ï¼Œåˆ°æ•°æ®æ”¶é›†æ™ºèƒ½ä½“è·å–å¿…è¦æ•°â€æ®ï¼Œç„¶åæ˜¯åˆ†ææ™ºèƒ½ä½“å¤„ç†è¿™äº›æ•°æ®ï¼Œæ¥ç€ï»¿ç”±å¯è§†åŒ–æ™ºèƒ½ä½“åˆ›å»ºç›´è§‚å›¾è¡¨ï¼Œæœ€åç”±æŠ¥å‘Šâ€æ™ºèƒ½ä½“æ•´åˆæ‰€æœ‰å‘ç°ç”Ÿæˆå®Œæ•´æŠ¥å‘Šã€‚

* * *

é™¤äº†ä¸Šé¢è¿™äº›å·¥ä½œæµï»¿å¼€å‘æ¡†æ¶å¤–ï¼Œä¹‹å‰æˆ‘ä»¬è¿˜å­¦ä¹ è¿‡ä¸€ç§å¯è§†â€‹åŒ–çš„æ™ºèƒ½ä½“å·¥ä½œæµå¼€å‘æ–¹æ³• â€”â€” ä½¿ç”¨â€ AI å¤§æ¨¡å‹åº”ç”¨å¼€å‘å¹³å°åˆ›å»ºå·¥ä½œï»¿æµåº”ç”¨ã€‚ç›®å‰å¾ˆå¤šå…¬å¸éƒ½åœ¨ç”¨è¿™ç§æ–¹æ³•æ„å»ºâ€å¤æ‚çš„æ™ºèƒ½ä½“å·¥ä½œæµï¼Œç¡®å®å¾ˆæ–¹ä¾¿~

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/Vrkkn9bVoVFPrYUs.webp" alt="" width="100%" />


### OWL æ¡†æ¶

å‰é¢æåˆ°è¿‡ï»¿ AI æ™ºèƒ½ä½“ä¾èµ–â€‹å·¥å…·è°ƒç”¨èƒ½åŠ›æ¥æ‹“å±•â€èƒ½åŠ›è¾¹ç•Œï¼Œè¿™é‡Œå†ç»™ï»¿å¤§å®¶åˆ†äº«ä¸€ä¸ªå¾ˆå®ç”¨â€çš„å¼€æºé¡¹ç›® OWLã€‚

[OWL (Optimized Workforce Learning)](https://github.com/camel-ai/owl) æ˜¯ç”± CAMEL-AI å›¢é˜Ÿå¼€æºçš„ä¸€æ¬¾é¢å‘ **å¤šæ™ºèƒ½ä½“åä½œä¸çœŸå®ä¸–ç•Œä»»åŠ¡è‡ªåŠ¨åŒ–** çš„å‰æ²¿æ¡†æ¶ã€‚é€šè¿‡ OWLï¼ŒAI æ™ºèƒ½ä½“å¯ä»¥æ‰§è¡Œç»ˆç«¯å‘½ä»¤ã€è®¿é—®ç½‘ç»œèµ„æºã€è¿è¡Œå„ç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç ã€ä½¿ç”¨å„ç§å¼€å‘å·¥å…·ç­‰ç­‰ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/8wp3n7kYmAKEO4cO.webp" alt="" width="100%" />


å®ƒçš„ä¸»è¦ç‰¹ç‚¹ï¼š

*   å¤šæ™ºèƒ½ä½“åä½œï¼šOWL æ”¯æŒå¤šä¸ªæ™ºèƒ½ä½“ä¹‹é—´çš„åŠ¨æ€äº¤äº’ä¸åä½œï¼Œèƒ½å¤Ÿæ¨¡æ‹ŸçœŸå®å›¢é˜Ÿåä½œåœºæ™¯ï¼Œé€‚åˆè§£å†³éœ€è¦å¤šè§’è‰²ã€å¤šæŠ€èƒ½é…åˆçš„å¤æ‚ä»»åŠ¡ã€‚

*   ä¸°å¯Œçš„å·¥å…·é›†æˆï¼šå†…ç½®äº†æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€ä»£ç æ‰§è¡Œã€æ–‡æ¡£å¤„ç†ã€éŸ³è§†é¢‘åˆ†æã€æœç´¢å¼•æ“ç­‰å¤šç§å·¥å…·åŒ…ï¼Œæ”¯æŒå¤šæ¨¡æ€ä»»åŠ¡ï¼ˆå¦‚ç½‘é¡µæ“ä½œã€å›¾ç‰‡/è§†é¢‘/éŸ³é¢‘åˆ†æç­‰ï¼‰ã€‚

*   MCP åè®®æ”¯æŒï¼šé€šè¿‡ MCPï¼ŒOWL èƒ½å¤Ÿä¸å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºæ ‡å‡†åŒ–å¯¹æ¥ï¼Œæå¤§æ‰©å±•äº†æ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¹ç•Œã€‚

*   å¯å®šåˆ¶ä¸æ˜“ç”¨æ€§ï¼šç”¨æˆ·å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚çµæ´»é…ç½®å’Œç»„åˆæ‰€éœ€å·¥å…·ï¼Œä¼˜åŒ–æ€§èƒ½å’Œèµ„æºæ¶ˆè€—ã€‚

*   Web å¯è§†åŒ–ç•Œé¢ï¼šæä¾›åŸºäº Gradio çš„æœ¬åœ° Web UIï¼Œæ”¯æŒæ¨¡å‹é€‰æ‹©ã€ç¯å¢ƒå˜é‡ç®¡ç†ã€äº¤äº’å†å²æŸ¥çœ‹ç­‰åŠŸèƒ½ï¼Œæ–¹ä¾¿å¼€å‘å’Œè°ƒè¯•ã€‚


å…¶å® OWLï»¿ çš„æœ¬è´¨å°±æ˜¯åˆ©ç”¨ AI â€‹æ¥å¢å¼ºä¼ ç»Ÿçš„è‡ªåŠ¨åŒ–åŠå…¬åœºâ€æ™¯ï¼Œåƒè‡ªåŠ¨åŒ–æ•°æ®åˆ†æå’Œå¤„ï»¿ç†ã€è‡ªåŠ¨åŒ–ç½‘é¡µä¿¡æ¯æ£€ç´¢ï¼Œâ€éƒ½èƒ½å¤Ÿç”¨ OWL è½»æ¾å®Œæˆã€‚

ä¸‹å›¾æ˜¯å®˜æ–¹ï»¿ä»‹ç»çš„ Demoï¼ŒOâ€‹WL å¯ä»¥è‡ªåŠ¨æ‰“å¼€æˆ‘â€ä»¬çš„æµè§ˆå™¨è®¿é—®ç½‘é¡µï¼Œï»¿æ‰§è¡Œæ»šåŠ¨ã€ç‚¹å‡»ã€æ‰“å­—â€æ“ä½œï¼Œå¹¶ä¸”å®æ—¶æŠ“å–ç½‘é¡µä¿¡æ¯ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/Kh7sDt9F7j00Pbs0.webp" alt="ã€" width="100%" />


### A2A åè®®


#### ä»€ä¹ˆæ˜¯ A2A åè®®ï¼Ÿ

A2Aï¼ˆAgent to Agentï¼‰ä¹Ÿæ˜¯æœ€è¿‘å¾ˆçƒ­é—¨çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç®€å•æ¥è¯´ï¼Œ[A2A åè®®](https://google.github.io/A2A/) å°±æ˜¯ä¸º â€œæ™ºèƒ½ä½“ä¹‹é—´å¦‚ä½•ç›´æ¥äº¤æµå’Œåä½œâ€ åˆ¶å®šçš„ä¸€å¥—æ ‡å‡†ã€‚

A2A åè®®çš„æ ¸å¿ƒï¼Œæ˜¯è®©æ¯ï»¿ä¸ªæ™ºèƒ½ä½“éƒ½èƒ½åƒ â€œç½‘ç»œèŠ‚ç‚¹â€ ä¸€æ ·ï¼Œæ‹¥æœ‰è‡ªå·±çš„èº«ä»½â€‹ã€èƒ½åŠ›æè¿°å’Œé€šä¿¡æ¥å£ã€‚å®ƒä¸ä»…è§„å®šäº†æ¶ˆæ¯çš„æ ¼å¼å’Œä¼ é€’â€æ–¹å¼ï¼Œè¿˜åŒ…æ‹¬äº†èº«ä»½è®¤è¯ã€èƒ½åŠ›å‘ç°ã€ä»»åŠ¡å§”æ‰˜ã€ç»“æœå›ä¼ ï»¿ç­‰æœºåˆ¶ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ™ºèƒ½ä½“ä¹‹é—´å°±å¯ä»¥åƒäººç±»å›¢é˜Ÿä¸€æ ·â€ï¼Œäº’ç›¸æ‰“æ‹›å‘¼ã€è¯¢é—®å¯¹æ–¹èƒ½åšä»€ä¹ˆã€è¯·æ±‚ååŠ©ã€‚

å¯ä»¥æŠŠ A2A ç±»æ¯”ä¸ºæ™ºèƒ½ä½“ä¸–ï»¿ç•Œé‡Œçš„ HTTPåè®®ï¼ŒHTTP åè®®è®©å…¨çƒä¸åŒæœåŠ¡å™¨å’Œç”µè„‘ä¹‹â€‹é—´èƒ½å¤Ÿäº¤æ¢æ•°æ®ï¼ŒA2A åè®®åˆ™æ˜¯è®©ä¸åŒå‚å•†ã€ä¸åŒå¹³å°ã€ä¸åŒèƒ½â€åŠ›çš„æ™ºèƒ½ä½“èƒ½å¤Ÿåƒå›¢é˜Ÿæˆå‘˜ä¸€æ ·äº’ç›¸ç†è§£ã€åä½œå’Œåˆ†å·¥ã€‚å¦‚æœè¯´ Hï»¿TTP åè®®è®©äº’è”ç½‘æˆä¸ºäº†ä¸€ä¸ªå¼€æ”¾ã€äº’è”çš„ä¸–ç•Œï¼Œé‚£ä¹ˆ A2Aâ€ åè®®åˆ™è®©æ™ºèƒ½ä½“ä¸–ç•Œå˜å¾—å¼€æ”¾ã€åä½œå’Œé«˜æ•ˆã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/PcO9jKM6WidOL7vy.webp" alt="" width="100%" />



#### A2A åè®®çš„åº”ç”¨åœºæ™¯

A2A åè®®çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæ€»ç»“ä¸‹æ¥ 4 ä¸ªå­—å°±æ˜¯ **å¼€æ”¾äº’è”**ã€‚æ¯”å¦‚åœ¨è‡ªåŠ¨é©¾é©¶é¢†åŸŸï¼Œä¸åŒè½¦è¾†çš„æ™ºèƒ½ä½“å¯ä»¥å®æ—¶äº¤æ¢è·¯å†µä¿¡æ¯ï¼ŒååŒé¿éšœå’Œè§„åˆ’è·¯çº¿ï¼›åœ¨åˆ¶é€ è½¦é—´ï¼Œç”Ÿäº§çº¿ä¸Šçš„å„ç±»æœºå™¨äººæ™ºèƒ½ä½“å¯ä»¥æ ¹æ®ä»»åŠ¡åŠ¨æ€åˆ†å·¥ï¼Œäº’ç›¸è¡¥ä½ï¼›åœ¨é‡‘èé£æ§ã€æ™ºèƒ½å®¢æœç­‰åœºæ™¯ï¼Œä¸åŒçš„æ™ºèƒ½ä½“å¯ä»¥æ ¹æ®è‡ªèº«ä¸“é•¿åä½œå¤„ç†å¤æ‚ä¸šåŠ¡æµç¨‹ã€‚

æˆ‘ä»¬è¿˜å¯ä»¥å¤§èƒ†æƒ³è±¡ï»¿ï¼Œæœªæ¥å¼€å‘è€…å¯ä»¥åƒè°ƒç”¨äº‘æœåŠ¡ä¸€æ ·ï¼Œâ€‹æŒ‰éœ€ç§Ÿç”¨æˆ–ç»„åˆä¸åŒçš„æ™ºèƒ½ä½“æœåŠ¡ï¼Œç”šâ€è‡³å®ç°æ™ºèƒ½ä½“ä¹‹é—´çš„è‡ªåŠ¨äº¤æ˜“å’Œç»“ç®—ã€‚ï»¿ç›®å‰å…¶å®å°±æœ‰å¾ˆå¤šæ™ºèƒ½ä½“å¹³å°ï¼Œåªä¸è¿‡â€æ™ºèƒ½ä½“ä¹‹é—´çš„è¿æ¥åä½œç”šå°‘ã€‚

#### å’Œ MCP åè®®çš„åŒºåˆ«

è™½ç„¶ A2ï»¿A å’Œ MCP éƒ½â€‹ç®—æ˜¯åè®®ï¼ˆæˆ–è€…æ ‡å‡†â€ï¼‰ï¼Œä½†äºŒè€…å­˜åœ¨æœ¬è´¨ä¸Šï»¿çš„åŒºåˆ«ã€‚

MCP åè®®æ˜¯ **æ™ºèƒ½ä½“å’Œå¤–éƒ¨å·¥å…·ä¹‹é—´çš„æ ‡å‡†**ï¼Œå®ƒè§„å®šäº†æ™ºèƒ½ä½“å¦‚ä½•å®‰å…¨ã€è§„èŒƒåœ°è°ƒç”¨å¤–éƒ¨çš„æ•°æ®åº“ã€æœç´¢å¼•æ“ã€ä»£ç æ‰§è¡Œç­‰å·¥å…·èµ„æºã€‚ä½ å¯ä»¥æŠŠ MCP ç†è§£ä¸º â€œæ™ºèƒ½ä½“-å·¥å…·â€ çš„ HTTP åè®®ã€‚

è€Œ A2A åè®®åˆ™æ˜¯ **æ™ºèƒ½ä½“ä¹‹é—´çš„é€šä¿¡åè®®**ã€‚å®ƒæ›´åƒæ˜¯è®©ä¸åŒçš„ AI è§’è‰²ä¹‹é—´å¯ä»¥ç›´æ¥å¯¹è¯ã€åä½œå’Œåˆ†å·¥ã€‚

ä»å®‰å…¨è§’åº¦ï»¿çœ‹ï¼ŒMCP å’Œ Aâ€‹2A å¤„ç†çš„æ˜¯ä¸åŒâ€å±‚é¢çš„å®‰å…¨é—®é¢˜ï¼š

*   MCP çš„å®‰å…¨å…³æ³¨ç‚¹ï¼šä¸»è¦é›†ä¸­åœ¨å•ä¸ªæ™ºèƒ½ä½“ä¸å·¥å…·ä¹‹é—´çš„å®‰å…¨äº¤äº’ï¼Œä¸»è¦é˜²èŒƒçš„æ˜¯å·¥å…·æ»¥ç”¨å’Œæç¤ºè¯æ³¨å…¥æ”»å‡»ã€‚

*   A2A çš„å®‰å…¨å…³æ³¨ç‚¹ï¼šæ›´å…³æ³¨æ™ºèƒ½ä½“ç½‘ç»œä¸­çš„èº«ä»½è®¤è¯ã€æˆæƒå’Œä¿¡ä»»é“¾ã€‚A2A éœ€è¦è§£å†³â€œæˆ‘æ€ä¹ˆçŸ¥é“æˆ‘åœ¨å’Œè°é€šä¿¡â€ã€â€œè¿™ä¸ªæ™ºèƒ½ä½“æœ‰æƒé™è¯·æ±‚è¿™é¡¹ä»»åŠ¡å—â€ã€â€œå¦‚ä½•é˜²æ­¢æ¶æ„æ™ºèƒ½ä½“çªƒå–æˆ–ç¯¡æ”¹ä»»åŠ¡æ•°æ®â€ ç­‰é—®é¢˜ã€‚ï¼ˆè¿™äº›é—®é¢˜ä¹Ÿæ˜¯ HTTP åè®®éœ€è¦è€ƒè™‘çš„ï¼‰


æ˜¾ç„¶ï¼ŒA2ï»¿A é¢ä¸´çš„å®‰å…¨æŒ‘æˆ˜â€‹æ›´åŠ å¤æ‚ï¼Œå› ä¸ºå®ƒå¤„â€ç†çš„æ˜¯è·¨ç½‘ç»œã€è·¨å¹³ï»¿å°ã€å¤šæ–¹åä½œçš„åœºæ™¯â€ã€‚

å¯¹äºä¸€ä¸ªæˆç†Ÿçš„ï»¿æ™ºèƒ½ä½“ç³»ç»Ÿï¼Œå¯èƒ½ä¼šåŒæ—¶è¿ç”¨â€‹ MCP å’Œ A2Aï¼ŒMCâ€P è´Ÿè´£æŸä¸ªæ™ºèƒ½ä½“å†…éƒ¨è°ƒç”¨ï»¿å·¥å…·å®Œæˆä»»åŠ¡ï¼ŒA2A è´Ÿè´£â€æ™ºèƒ½ä½“ä¹‹é—´ååŒå®Œæˆä»»åŠ¡ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/7t0N8BatRyAI6x6q.webp" alt="" width="100%" />


ç›®å‰ A2A åè®®çš„è½åœ°å¹¶ä¸æˆç†Ÿï¼Œæš‚æ—¶å¤§å®¶ä¹Ÿä¸å¿…å…³æ³¨å¦‚ä½•è¿›è¡Œ A2A çš„å¼€å‘ï¼Œäº†è§£å®ƒæ˜¯ä»€ä¹ˆã€æœ‰ä»€ä¹ˆç”¨å°±è¶³å¤Ÿäº†ã€‚æ„Ÿå…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥é˜…è¯» [è¿™ç¯‡æ–‡ç« ](https://mp.weixin.qq.com/s/XbrsS2SatIV-6hXc5yj_Wg) æ¥äº†è§£ A2A åè®®çš„å®ç°ç»†èŠ‚å’Œäº¤äº’æµç¨‹ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/jb0lISDWXcprdx2x.webp" alt="" width="100%" />


æ‰©å±•æ€è·¯
----

1ï¼‰ç»™æ™ºèƒ½ï»¿ä½“æ·»åŠ å¾ªç¯æ£€æµ‹å’Œå¤„â€‹ç†æœºåˆ¶ï¼Œé˜²æ­¢æ™ºèƒ½ä½“â€é™·å…¥æ— é™å¾ªç¯ã€‚

å¯ä»¥å‚è€ƒ OpenManus æºç å®ç°ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```java
private int duplicateThreshold = 2;

/**  
 * å¤„ç†é™·å…¥å¾ªç¯çš„çŠ¶æ€  
 */
protected void handleStuckState() {
String stuckPrompt = "è§‚å¯Ÿåˆ°é‡å¤å“åº”ã€‚è€ƒè™‘æ–°ç­–ç•¥ï¼Œé¿å…é‡å¤å·²å°è¯•è¿‡çš„æ— æ•ˆè·¯å¾„ã€‚";
this.nextStepPrompt = stuckPrompt + "\n" + (this.nextStepPrompt != null ? this.nextStepPrompt : "");
System.out.println("Agent detected stuck state. Added prompt: " + stuckPrompt);
}

/**  
 * æ£€æŸ¥ä»£ç†æ˜¯å¦é™·å…¥å¾ªç¯  
 *  
 * @return æ˜¯å¦é™·å…¥å¾ªç¯  
 */
protected boolean isStuck() {
List<Message> messages = this.memory.getMessages();
if (messages.size() < 2) {
return false;
}

Message lastMessage = messages.get(messages.size() - 1);
if (lastMessage.getContent() == null || lastMessage.getContent().isEmpty()) {
return false;
}

// è®¡ç®—é‡å¤å†…å®¹å‡ºç°æ¬¡æ•°
int duplicateCount = 0;
for (int i = messages.size() - 2; i >= 0; i--) {
Message msg = messages.get(i);
if (msg.getRole() == Role.ASSISTANT &&
lastMessage.getContent().equals(msg.getContent())) {
duplicateCount++;
}
}

return duplicateCount >= this.duplicateThreshold;
}

// æ¯ä¸€æ­¥ step æ‰§è¡Œå®Œéƒ½è¦æ£€æŸ¥æ˜¯å¦é™·å…¥å¾ªç¯  
if (isStuck()) {
handleStuckState();
}
```

2ï¼‰æ™ºèƒ½ä½“ï»¿æ”¯æŒäº¤äº’å¼æ‰§è¡Œï¼Œå¯â€‹ä»¥å‘ç”¨æˆ·è¯¢é—®ä¿¡æ¯æˆ–â€è·å–åé¦ˆï¼Œä»è€Œä¼˜åŒ–ï»¿ä»»åŠ¡çš„å®Œæˆæ•ˆæœã€‚

å®ç°æ€è·¯å¯ä»¥ï»¿å‚è€ƒ OpenManuâ€‹sï¼Œä¸“é—¨å®šä¹‰ä¸€ä¸ª Asâ€kHuman å·¥å…·ï¼Œè®©ï»¿ AI è‡ªä¸»å†³å®šä»€ä¹ˆæ—¶â€å€™éœ€è¦å¯»æ±‚äººç±»å¸®åŠ©ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/tJHzvM9pmfVQhmsC.webp" alt="" width="100%" />


å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ç¼–å†™ Prompt å®ç°ï¼Œæ¯”å¦‚ Prompt ä¸­æåˆ° â€œå¦‚æœä½ è®¤ä¸ºéœ€è¦å‘äººç±»å¯»æ±‚å¸®åŠ©ï¼Œè¾“å‡ºç»“æœä¸­éœ€è¦åŒ…å« [ASK_USER]{å¯»æ±‚å¸®åŠ©çš„å…·ä½“é—®é¢˜}â€ï¼Œå¹¶ä¸”æ£€æŸ¥æ¯ä¸€æ¡ AI ç»™å‡ºçš„æ¶ˆæ¯ï¼Œå¦‚æœåŒ…å«äº† ASK_USER æ ‡è®°ï¼Œå°±é€šè¿‡ç³»ç»Ÿæ§åˆ¶å°å’Œç”¨æˆ·äº¤äº’ã€‚

ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```java
public boolean think() {
boolean shouldAct = super.think();

// è·å–æœ€æ–°çš„åŠ©æ‰‹æ¶ˆæ¯
Message lastMessage = getMessageList().get(getMessageList().size() - 1);
if (lastMessage instanceof AssistantMessage) {
String content = lastMessage.getContent();

// æ£€æŸ¥æ˜¯å¦åŒ…å«å‘ç”¨æˆ·è¯¢é—®çš„æ ‡è®°
if (content.contains("[ASK_USER]")) {
// æå–é—®é¢˜
String question = content.substring(content.indexOf("[ASK_USER]") + 10);

// å‘ç”¨æˆ·è¾“å‡ºé—®é¢˜
System.out.println("æ™ºèƒ½ä½“éœ€è¦ä½ çš„å¸®åŠ©: " + question);

// è·å–ç”¨æˆ·è¾“å…¥
Scanner scanner = new Scanner(System.in);
String userAnswer = scanner.nextLine();

// æ·»åŠ ç”¨æˆ·å›ç­”åˆ°æ¶ˆæ¯åˆ—è¡¨
UserMessage userResponse = new UserMessage("ç”¨æˆ·å›ç­”: " + userAnswer);
getMessageList().add(userResponse);

// éœ€è¦ç»§ç»­æ€è€ƒ
return true;
}
}

return shouldAct;
}
```

3ï¼‰å¼€å‘æ”¯æŒ MCP åè®®çš„è¶…çº§æ™ºèƒ½ä½“

æ€è·¯ï¼šå…¶å®åˆ©ï»¿ç”¨ Spring AIï¼Œâ€‹åªéœ€è¦æŠŠ MCP æœåŠ¡ä¸­â€çš„å·¥å…·æå–å‡ºæ¥å˜æˆå·¥å…·åˆ—ï»¿è¡¨ï¼Œå°±å¯ä»¥å¤ç”¨å·²æœ‰çš„ Tâ€oolCallAgent äº†

4ï¼‰è‡ªè¡Œå¼€ï»¿å‘ä¸€ä¸ªç‰¹å®šé¢†åŸŸçš„è¶…â€‹çº§æ™ºèƒ½ä½“ï¼Œå¯ä»¥ç›´æ¥â€ç»§æ‰¿ ToolCaï»¿llAgent å®â€ç°

5ï¼‰å‚è€ƒ OpenManus çš„æºç ï¼Œå®ç°æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ â€œè§„åˆ’å¹¶æ‰§è¡Œâ€ æ¨¡å¼çš„æ™ºèƒ½ä½“å·¥ä½œæµï¼ˆå‚è€ƒ `flow/planning.py`ï¼‰

æœ¬èŠ‚ä½œä¸š
----

1ï¼‰å®Œæˆ AI è¶…çº§æ™ºèƒ½ä½“çš„å¼€å‘

2ï¼‰ç†è§£ ï»¿AI è¶…çº§æ™ºèƒ½ä½“çš„â€‹å®ç°åŸç†å’Œæ¶æ„è®¾è®¡â€ï¼Œè¦æ±‚èƒ½å¤Ÿå£è¿°è®²æ¸…ï»¿æ¥š

3ï¼‰å°è¯•è‡ªï»¿ä¸»é˜…è¯» OpenMaâ€‹nus çš„æºç ï¼Œæ€è€ƒâ€å¦‚ä½•è¿›ä¸€æ­¥ä¼˜åŒ–æˆ‘ä»¬çš„ï»¿ç¨‹åºï¼Œå»ºè®®å¤šåˆ©ç”¨ Aâ€I å·¥å…·è¾…åŠ©å­¦ä¹ ç†è§£10:["Java","èµ„æº","å­¦ä¹ æŒ‡å—","æ±‚èŒ","é¢è¯•","èŒåœº","å‰ç«¯","åç«¯","è‡ªæˆ‘ä»‹ç»","å­¦ä¹ æ‰“å¡"]
f:{"id":"1601072287388278786","planetCode":"1","planetPostAuth":1,"userName":"ç¨‹åºå‘˜é±¼çš®","userAvatar":"https://pic.code-nav.cn/user_avatar/1601072287388278786/66mwv6CDAmxwVfNi.webp","userThumbnailAvatar":"https://pic.code-nav.cn/user_avatar/1601072287388278786/thumbnail/66mwv6CDAmxwVfNi.jpeg","gender":1,"userProfile":"è¿™ä¸ªç½‘ç«™çš„è€å¤§","interests":"$10","place":"ä¸Šæµ·","school":"ä¸œåå¤§å­¦","direction":"åç«¯","graduationYear":2020,"github":"https://github.com/liyupi","blog":"https://yupi.icu","score":50908,"scoreLevel":7,"followeeNum":6728,"followNum":7,"followStatus":1,"vipExpireTime":10018230399000,"vipNumber":"1","userRole":"admin","needGuide":0,"syncPopupLeftCount":0}
12:{"userName":"å¤ªé˜³è½å±±äº†","joinTime":"2023-12-12 22:05:47","expireTime":"2024-12-12 22:05:47","lastCertifyTime":1725420992914,"lastGetCodeTime":1704197081065}
13:[]
15:{"name":"ç¼–ç¨‹å¯¼èˆªä¼šå‘˜","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/NVVJ3lG3utDBss8P.svg","active":true}
16:{"name":"é¢è¯•é¸­å‹å‹","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/VjzY1VaUuCcRrDUw.svg","active":true}
17:{"name":"è€é±¼ç®€å†å‹å‹","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/jQWrqZvtiaa6CdX1.svg","active":true}
18:{"name":"ä»£ç å°æŠ„å‹å‹","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/UKewhyATG8zB7GIp.svg","active":true}
19:{"name":"å‰ªåˆ‡åŠ©æ‰‹å‹å‹","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/c4WR51wRCm0gPCER.svg","active":true}
1a:{"name":"é¢è¯•ç‰¹è®­è¥å‹‡å£«","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/C4rF8c27nH32gaTN.svg","active":false}
1b:{"name":"ç®—æ³•å¯¼èˆªå‹å‹","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/RVZ8dAZg4CeIoZsN.svg","active":false}
1c:{"name":"Github","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/t3KL6yzv65ybMU7y.svg","active":false}
1d:{"name":"ä¸ªäººåšå®¢","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/ltMqeLsgZ1X71iFa.svg","active":false}
14:["$15","$16","$17","$18","$19","$1a","$1b","$1c","$1d"]
11:{"id":"1742154859488071681","planetCode":"30232","planetUserId":"212884144481881","planetPostAuth":1,"planetExtraInfo":"$12","jpushRegistrationId":"120c83f761199147da8","shareCode":"y8a08s","userName":"autumn","userAvatar":"https://pic.code-nav.cn/user_avatar/1742154859488071681/jnpSLUeQj6jRarii.webp","userThumbnailAvatar":"https://pic.code-nav.cn/user_avatar/1742154859488071681/thumbnail/jnpSLUeQj6jRarii.jpg","email":"","phone":"175****2997","scene":"v8zug9q4najcb8vb;3071360111:39268","userRole":"vip","interests":"$13","job":"Javaåç«¯","direction":"åç«¯","score":1094,"scoreLevel":5,"coin":0,"followeeNum":41,"followNum":2,"vipExpireTime":1779515864000,"lastLoginTime":1760273705000,"createTime":1704197060000,"updateTime":1760589499000,"mpOpenId":"oqPe46G93UUG_9jDDgcqhMPljGWM","appOpenId":"oKkLu6clpUmne_yCE_g5H4iPyyLg","vipNumber":"30232","needGuide":0,"syncPopupLeftCount":0,"oldVip":false,"campMember":0,"badgeList":"$14"}
d:{"id":"1924791167446343681","title":"8 - AI æ™ºèƒ½ä½“æ„å»º","contentType":"text","learnCondition":3,"content":"$e","type":1,"category":"è¯¾ç¨‹æ–‡ç« ","viewNum":18617,"viewCount":"3267","thumbNum":0,"favourNum":0,"commentNum":31,"priority":0,"userId":"1601072287388278786","courseId":"1915010091721236482","reviewStatus":1,"editTime":1751252393000,"createTime":1747740949000,"updateTime":1760713801000,"user":"$f","learnStatus":2,"loginUserVO":"$11"}
24:T2df0,ä¸€ã€é¡¹ç›®ä»‹ç»
------

> è§†é¢‘ä»‹ç»ï¼šhttps://www.bilibili.com/video/BV1UoLezKEbm

è¿™æ˜¯ä¸€å¥—ä»¥ AI å¼€å‘å®æˆ˜ä¸ºæ ¸å¿ƒçš„é¡¹ç›®æ•™ç¨‹ï¼Œå°†é€šè¿‡å¼€å‘ **AI æ‹çˆ±å¤§å¸ˆåº”ç”¨ + æ‹¥æœ‰è‡ªä¸»è§„åˆ’èƒ½åŠ›çš„è¶…çº§æ™ºèƒ½ä½“**ï¼Œå¸¦å¤§å®¶æŒæ¡æ–°æ—¶ä»£ç¨‹åºå‘˜å¿…çŸ¥å¿…ä¼šçš„ AI æ ¸å¿ƒæ¦‚å¿µã€AI å®ç”¨å·¥å…·ã€AI ç¼–ç¨‹æŠ€æœ¯ã€AI æ¡†æ¶åŸç†ã€AI è°ƒä¼˜æŠ€å·§ï¼Œå¤§å¹…å¢åŠ æ±‚èŒçš„ç«äº‰åŠ›ï¼

![](https://pic.code-nav.cn/course_picture/1601072287388278786/tusZgfaZ3diXWP4e.webp)

AI æ‹çˆ±å¤§å¸ˆåº”ç”¨å¯ä»¥ä¾èµ– AI å¤§æ¨¡å‹è§£å†³ç”¨æˆ·çš„æƒ…æ„Ÿé—®é¢˜ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ã€åŸºäºè‡ªå®šä¹‰çŸ¥è¯†åº“è¿›è¡Œé—®ç­”ã€è‡ªä¸»è°ƒç”¨å·¥å…·å’Œ MCP æœåŠ¡å®Œæˆä»»åŠ¡ï¼Œæ¯”å¦‚è°ƒç”¨åœ°å›¾æœåŠ¡è·å–é™„è¿‘åœ°ç‚¹å¹¶åˆ¶å®šçº¦ä¼šè®¡åˆ’ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/Km70yqctawJBbZdq.webp" alt="" width="100%" />


æ­¤å¤–ï¼Œè¿˜ä¼šæ‰‹æŠŠæ‰‹å¸¦å¤§å®¶å®ŒæˆåŸºäº ReAct æ¨¡å¼çš„è‡ªä¸»è§„åˆ’æ™ºèƒ½ä½“ YuManusï¼Œå¯ä»¥åˆ©ç”¨ç½‘é¡µæœç´¢ã€èµ„æºä¸‹è½½å’Œ PDF ç”Ÿæˆå·¥å…·ï¼Œå¸®ç”¨æˆ·åˆ¶å®šå®Œæ•´çš„çº¦ä¼šè®¡åˆ’å¹¶ç”Ÿæˆæ–‡æ¡£ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/KzsXzr3E8WPsfpwp.webp" alt="" width="100%" />


å½“ç„¶ï¼Œå­¦ä¼šè¿™ä¸ªé¡¹ç›®åï¼Œä½ ä¸ä»…èƒ½å¼€å‘ AI æ‹çˆ±å¤§å¸ˆï¼Œè€Œæ˜¯èƒ½çµæ´»å¼€å‘å„ç§å¤æ‚çš„ AI åº”ç”¨ï¼Œå°½æƒ…å‘æŒ¥è‡ªå·±çš„æƒ³è±¡åŠ›å§ï¼

äºŒã€é¡¹ç›®ä¼˜åŠ¿
------

### é¡¹ç›®æ”¶è·

æœ¬é¡¹ç›®é€‰é¢˜æ–°é¢–ã€ä¸šåŠ¡çœŸå®ï¼ŒåŒºåˆ«äºå¢åˆ æ”¹æŸ¥çš„ â€œçƒ‚å¤§è¡—â€ é¡¹ç›®ï¼Œé±¼çš®ä¼šå¸¦ä½ å®æˆ˜å¤§é‡æ–°æŠ€æœ¯å’Œä¼ä¸šåº”ç”¨åœºæ™¯ï¼Œç”¨ä¸€å¥—å®æˆ˜æ•™ç¨‹å°†ç¨‹åºå‘˜å¿…çŸ¥å¿…ä¼šçš„ **AI æŠ€æœ¯ä¸€ç½‘æ‰“å°½**ï¼Œå¸®ä½ æˆä¸º AI æ—¶ä»£ä¼ä¸šçš„é¦™é¥½é¥½ï¼Œç»™ä½ çš„ç®€å†å’Œæ±‚èŒå¤§å¹…å¢åŠ ç«äº‰åŠ›ã€‚

é±¼çš®ç»™å¤§å®¶è®²çš„éƒ½æ˜¯ **é€šç”¨çš„é¡¹ç›®å¼€å‘æ–¹æ³•å’Œæ¶æ„è®¾è®¡å¥—è·¯**ï¼Œä»è¿™ä¸ªé¡¹ç›®ä¸­ä½ å°†å­¦åˆ°ï¼š

- ä¸»æµ AI åº”ç”¨å¹³å°çš„ä½¿ç”¨
- AI å¤§æ¨¡å‹çš„ 4 ç§æ¥å…¥æ–¹å¼
- AI å¼€å‘æ¡†æ¶ï¼ˆSpring AI + LangChain4jï¼‰
- AI å¤§æ¨¡å‹æœ¬åœ°éƒ¨ç½²
- Prompt å·¥ç¨‹å’Œä¼˜åŒ–æŠ€å·§
- Spring AI æ ¸å¿ƒç‰¹æ€§ï¼šå¦‚è‡ªå®šä¹‰ Advisorã€å¯¹è¯è®°å¿†ã€ç»“æ„åŒ–è¾“å‡º
- RAG çŸ¥è¯†åº“å®æˆ˜ã€åŸç†å’Œè°ƒä¼˜æŠ€å·§
- PgVector å‘é‡æ•°æ®åº“ + äº‘æ•°æ®åº“æœåŠ¡
- Tool Calling å·¥å…·è°ƒç”¨å®æˆ˜åŠåŸç†
- MCP æ¨¡å‹ä¸Šä¸‹æ–‡åè®®å’ŒæœåŠ¡å¼€å‘
- AI æ™ºèƒ½ä½“ Manus åŸç†å’Œè‡ªä¸»å¼€å‘
- AI æœåŠ¡åŒ–å’Œ Serverless éƒ¨ç½²ä¸Šçº¿
- å„ç§æ–°æ¦‚å¿µï¼šå¦‚å¤šæ¨¡æ€ã€æ™ºèƒ½ä½“å·¥ä½œæµã€A2A åè®®ã€å¤§æ¨¡å‹è¯„ä¼°ç­‰

ä¸¾ä¸ªä¾‹å­ï¼ŒRAG æ ¸å¿ƒç‰¹æ€§å®æˆ˜åŠå…¨é“¾è·¯è°ƒä¼˜ï¼š

![](https://pic.code-nav.cn/course_picture/1601072287388278786/HmtDpUcqNyKWhsjR.webp)

é¡¹ç›®è¿˜æœ‰å…¶ä»–ä¼˜åŠ¿ï¼š

*   AI äº‘å¹³å°å’Œç¼–ç¨‹åŒç«¯å®æˆ˜ï¼Œä¸ä»…ä¼šç”¨ AI æœåŠ¡ï¼Œè¿˜ä¼šè‡ªå·±å†™ï¼
*   åŸºäºå®˜æ–¹æ–‡æ¡£è®²è§£æœ€æ–°çš„ AI æŠ€æœ¯ï¼Œç»†è‡´å…¥å¾®ï¼Œæ‰‹æ’•æ–‡æ¡£å’Œæºç ï¼
*   åˆ†äº«å¤§é‡ AI æ‰©å±•çŸ¥è¯†å’Œç¼–ç¨‹æŠ€å·§ï¼ŒæŒæ¡æœ€ä½³å®è·µï¼

é±¼çš®å¸¦ä½ æ‰‹æ’•å¼€æºæ¡†æ¶ OpenManus çš„æºç ï¼š

![](https://pic.code-nav.cn/course_picture/1601072287388278786/j0sqFFUWmuO6MHDr.webp)

æ­¤å¤–ï¼Œè¿˜èƒ½å­¦ä¼šå¾ˆå¤šä½œå›¾ã€æ€è€ƒé—®é¢˜ã€å¯¹æ¯”æ–¹æ¡ˆçš„æ–¹æ³•ï¼Œæå‡æ’æŸ¥é—®é¢˜ã€è‡ªä¸»è§£å†³ Bug çš„èƒ½åŠ›ã€‚

### é±¼çš®ç³»åˆ—é¡¹ç›®ä¼˜åŠ¿

é±¼çš®åŸåˆ›é¡¹ç›®ç³»åˆ—ä»¥ **å®æˆ˜** ä¸ºä¸»ï¼Œç”¨ **å…¨ç¨‹ç›´æ’­** çš„æ–¹å¼ï¼Œ**ä» 0 åˆ° 1** å¸¦å¤§å®¶å­¦ä¹ æŠ€æœ¯çŸ¥è¯†ï¼Œå¹¶ç«‹å³å®è·µè¿ç”¨åˆ°é¡¹ç›®ä¸­ï¼Œåšåˆ°å­¦ä»¥è‡´ç”¨ã€‚

æ­¤å¤–ï¼Œè¿˜æä¾›å¦‚ä¸‹æœåŠ¡ï¼š

*   è¯¦ç»†çš„æ–‡å­—æ•™ç¨‹æˆ–ç›´æ’­ç¬”è®°
*   å®Œæ•´çš„é¡¹ç›®æºç 
*   1 å¯¹ 1 ç­”ç–‘è§£æƒ‘
*   ä¸“å±é¡¹ç›®äº¤æµç¾¤
*   â­ï¸ ç°æˆçš„ç®€å†å†™æ³•ï¼ˆç›´æ¥å†™æ»¡ç®€å†ï¼‰
*   â­ï¸ é¡¹ç›®çš„æ‰©å±•æ€è·¯ï¼ˆæ‹‰å¼€å’Œå…¶ä»–äººçš„å·®è·ï¼‰
*   â­ï¸ é¡¹ç›®ç›¸å…³é¢è¯•é¢˜ã€é¢˜è§£å’ŒçœŸå®é¢ç»ï¼ˆæå‰å‡†å¤‡ï¼Œé¢è¯•ä¸æ‡µé€¼ï¼‰
*   â­ï¸ å‰ç«¯ + Java åç«¯ä¸‡ç”¨é¡¹ç›®æ¨¡æ¿ï¼ˆå¿«é€Ÿåˆ›å»ºé¡¹ç›®ï¼‰

æ¯”èµ·çœ‹ç½‘ä¸Šçš„æ•™ç¨‹å­¦ä¹ ï¼Œé±¼çš®é¡¹ç›®ç³»åˆ—çš„ä¼˜åŠ¿ï¼šä»å­¦çŸ¥è¯† => å®è·µé¡¹ç›® => å¤ä¹ ç¬”è®° => é¡¹ç›®ç­”ç–‘ => ç®€å†å†™æ³• => é¢è¯•é¢˜è§£çš„ä¸€æ¡é¾™æœåŠ¡

ä»éœ€æ±‚åˆ†æã€æŠ€æœ¯é€‰å‹ã€é¡¹ç›®è®¾è®¡ã€é¡¹ç›®åˆå§‹åŒ–ã€Demo ç¼–å†™ã€å‰åç«¯å¼€å‘å®ç°ã€é¡¹ç›®ä¼˜åŒ–ã€éƒ¨ç½²ä¸Šçº¿ç­‰ï¼Œæ¯ä¸ªç¯èŠ‚æˆ‘éƒ½ **ä»ç†è®ºåˆ°å®è·µ** ç»™å¤§å®¶è®²çš„æ˜æ˜ç™½ç™½ã€æ¯ä¸ªç»†èŠ‚éƒ½ä¸æ”¾è¿‡ï¼

| å¯¹æ¯”ç»´åº¦ | è·Ÿå­¦é±¼çš®é¡¹ç›® | è‡ªå­¦ç½‘ä¸Šå…è´¹é¡¹ç›® | â­ï¸ é±¼çš®é¡¹ç›®ä¼˜åŠ¿ |
| --- | --- | --- | --- |
| é¡¹ç›®é€‰é¢˜ | âœ… é€‰é¢˜æ–°é¢–ï¼Œåˆ»æ„é¿å¼€ç½‘ä¸Šçƒ­é—¨é¡¹ç›® | ä¼ ç»Ÿé¡¹ç›®åœºæ™¯ï¼ˆåšå®¢ã€å•†åŸã€ç®¡ç†ç³»ç»Ÿï¼‰ | å¢åŠ åŒºåˆ†åº¦ï¼Œæé«˜ç®€å†é€šè¿‡ç‡
å­¦ä¹ äººæ•° | âœ… å°‘ï¼Œä¸å®¹æ˜“æ’è½¦ | ç™¾ä¸‡ä»¥ä¸Šï¼Œçƒ‚å¤§è¡— | å¢åŠ åŒºåˆ†åº¦ï¼Œæé«˜ç®€å†é€šè¿‡ç‡
æ•™å­¦æ–¹å¼ | âœ… å…¨ç¨‹ç›´æ’­ï¼Œå¸¦ä½ æ•²æ¯ä¸€è¡Œä»£ç ã€å¸¦ä½ è¸©å‘å’Œè§£å†³ Bugï¼Œä¸æ¼è¿‡æ¯ä¸€ä¸ªç»†èŠ‚ | å½•åˆ¶è¯¾ç¨‹ï¼Œè§†é¢‘è™½ç„¶çœ‹èµ·æ¥ç®€çŸ­ã€ä¸€å¸†é£é¡ºï¼Œä½†ä½ é‡åˆ°é”™è¯¯æ— ä»ä¸‹æ‰‹ | é™ä½å­¦ä¹ é—¨æ§›ï¼Œå‡å°‘å­¦ä¹ æ—¶é•¿
ç›´æ’­ç¬”è®° | âœ… è¯¦ç»†çš„å®˜æ–¹ç¬”è®° + ç²¾é€‰å­¦å‘˜ä¼˜è´¨ç¬”è®° | æœ‰ç¬”è®°ï¼Œä½†æœªç»ç­›é€‰ | å­¦åˆ°æ›´å¤šçŸ¥è¯†ç»†èŠ‚
è§†é¢‘å†…å®¹ | âœ… é¡¹ç›®æ•™ç¨‹ + ç»éªŒåˆ†äº« | é¡¹ç›®æ•™ç¨‹ | å­¦åˆ°æ›´å¤šç¼–ç¨‹ç»éªŒ
é¡¹ç›®æºç  | âœ… å®Œæ•´æºç ä»“åº“ + æ¯ç« çš„æäº¤è®°å½• + å®šæœŸæ›´æ–° | åªæœ‰ä»£ç åŒ…ã€ä¸æ›´æ–° | èŠ‚çœæ—¶é—´ï¼Œé¿å…è¸©å‘
é¡¹ç›®ç­”ç–‘ | âœ… å„é¡¹ç›®äº¤æµç¾¤ + ç­”ç–‘è§£æƒ‘ + å¸¸è§é—®é¢˜æ•´ç† | æ— å…è´¹çš„ç­”ç–‘æœåŠ¡ï¼Œé‡åˆ°é—®é¢˜è‡ªè¡Œè§£å†³ | èŠ‚çœæ—¶é—´
ç®€å†å†™æ³• | âœ… ç°æˆçš„ç®€å†å†™æ³• | æ—  | èŠ‚çœæ—¶é—´ã€æé«˜ç®€å†é€šè¿‡ç‡
é¡¹ç›®æ‰©å±• | âœ… ç»™å‡ºæ‰©å±•æ€è·¯ + å­¦å‘˜ä½œå“å…±äº« | æ—  | å¼€æ‹“æ€è·¯ã€æ‹‰å¼€å’Œå…¶ä»–äººçš„å·®è·
é¡¹ç›®é¢è¯• | âœ… é¡¹ç›®ç›¸å…³é¢è¯•é¢˜ã€é¢˜è§£å’ŒçœŸå®é¢ç» | æ—  | æå‰å‡†å¤‡ï¼Œé¢è¯•ä¸æ‡µé€¼ |

ç¼–ç¨‹å¯¼èˆªå·²æœ‰ **10 å¤šå¥—é¡¹ç›®æ•™ç¨‹ï¼**æ¯ä¸ªé¡¹ç›®çš„å­¦ä¹ é‡ç‚¹ä¸åŒï¼Œå‡ ä¹å…¨éƒ½æ˜¯å‰ç«¯ + åç«¯çš„ **å…¨æ ˆé¡¹ç›®** ã€‚

è¯¦ç»†è¯·è§ï¼š[https://codefather.cn/course](https://www.codefather.cn/course)ï¼ˆåœ¨è¯¥é¡µé¢å³ä¾§æœ‰æ•™ç¨‹æ¨èå’Œå­¦ä¹ å»ºè®®ï¼‰

å¾€æœŸé¡¹ç›®ä»‹ç»è§†é¢‘ï¼š[https://bilibili.com/video/BV1YvmbYbEgS](https://www.bilibili.com/video/BV1YvmbYbEgS/)

ä¸‰ã€é¡¹ç›®åŠŸèƒ½æ¢³ç†
--------

é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†å¼€å‘ä¸€ä¸ª AI æ‹çˆ±å¤§å¸ˆåº”ç”¨ã€ä¸€ä¸ªæ‹¥æœ‰è‡ªä¸»è§„åˆ’èƒ½åŠ›çš„è¶…çº§æ™ºèƒ½ä½“ï¼Œä»¥åŠä¸€ç³»åˆ—å·¥å…·å’Œ MCP æœåŠ¡ã€‚

å…·ä½“éœ€æ±‚å¦‚ä¸‹ï¼š

*   AI æ‹çˆ±å¤§å¸ˆåº”ç”¨ï¼šç”¨æˆ·åœ¨æ‹çˆ±è¿‡ç¨‹ä¸­éš¾å…é‡åˆ°å„ç§éš¾é¢˜ï¼Œè®© AI ä¸ºç”¨æˆ·æä¾›è´´å¿ƒæƒ…æ„ŸæŒ‡å¯¼ã€‚æ”¯æŒå¤šè½®å¯¹è¯ã€å¯¹è¯è®°å¿†æŒä¹…åŒ–ã€RAG çŸ¥è¯†åº“æ£€ç´¢ã€å·¥å…·è°ƒç”¨ã€MCP æœåŠ¡è°ƒç”¨ã€‚
*   AI è¶…çº§æ™ºèƒ½ä½“ï¼šå¯ä»¥æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚ï¼Œè‡ªä¸»æ¨ç†å’Œè¡ŒåŠ¨ï¼Œç›´åˆ°å®Œæˆç›®æ ‡ã€‚
*   æä¾›ç»™ AI çš„å·¥å…·ï¼šåŒ…æ‹¬è”ç½‘æœç´¢ã€æ–‡ä»¶æ“ä½œã€ç½‘é¡µæŠ“å–ã€èµ„æºä¸‹è½½ã€ç»ˆç«¯æ“ä½œã€PDF ç”Ÿæˆã€‚
*   AI MCP æœåŠ¡ï¼šå¯ä»¥ä»ç‰¹å®šç½‘ç«™æœç´¢å›¾ç‰‡ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/s7NKJ2QAUEFDeczw.webp)

å››ã€æŠ€æœ¯é€‰å‹
------

é¡¹ç›®ä»¥ Spring AI å¼€å‘æ¡†æ¶å®æˆ˜ä¸ºæ ¸å¿ƒï¼Œæ¶‰åŠåˆ°å¤šç§ä¸»æµ AI å®¢æˆ·ç«¯å’Œå·¥å…·åº“çš„è¿ç”¨ã€‚

- Java 21 + Spring Boot 3 æ¡†æ¶
- â­ï¸ Spring AI + LangChain4j
- â­ï¸ RAG çŸ¥è¯†åº“
- â­ï¸ PGvector å‘é‡æ•°æ®åº“
- â­ Tool Calling å·¥å…·è°ƒç”¨
- â­ï¸ MCP æ¨¡å‹ä¸Šä¸‹æ–‡åè®®
- â­ï¸ ReAct Agent æ™ºèƒ½ä½“æ„å»º
- â­ï¸ Serverless è®¡ç®—æœåŠ¡
- â­ï¸ AI å¤§æ¨¡å‹å¼€å‘å¹³å°ç™¾ç‚¼
- â­ï¸ Cursor AI ä»£ç ç”Ÿæˆ
- â­ï¸ SSE å¼‚æ­¥æ¨é€
- ç¬¬ä¸‰æ–¹æ¥å£ï¼šå¦‚ SearchAPI / Pexels API
- Ollama å¤§æ¨¡å‹éƒ¨ç½²
- å·¥å…·åº“å¦‚ï¼šKryo é«˜æ€§èƒ½åºåˆ—åŒ– + Jsoup ç½‘é¡µæŠ“å– + iText PDF ç”Ÿæˆ + Knife4j æ¥å£æ–‡æ¡£


![](https://pic.code-nav.cn/course_picture/1608440217629360130/4ZHiiBYScGzqlhrJ.webp "RAG æ ¸å¿ƒç‰¹æ€§å®æˆ˜")

äº”ã€æ¶æ„è®¾è®¡
------

ä»å®¢æˆ·ç«¯å‘é€è¯·æ±‚å¼€å§‹ï¼Œè‡ªä¸Šè€Œä¸‹ç»è¿‡ä¸€ç³»åˆ—å¤„ç†ï¼Œæœ€ç»ˆå¾—åˆ°å“åº”ç»“æœã€‚æ¶æ„å›¾å¦‚ä¸‹ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/ObqFdEyvrFaiVY3m.webp "null")

å…­ã€å‡†å¤‡å·¥ä½œ
------

### AI åŸºç¡€çŸ¥è¯†

è¯·å…ˆè§‚çœ‹ã€Šç¨‹åºå‘˜é±¼çš® AI æŒ‡å—ã€‹ï¼Œäº†è§£ AI åŸºç¡€çŸ¥è¯†å’Œå­¦ä¹ è·¯çº¿ï¼Œåç»­åœ¨é¡¹ç›®ä¸­å®æˆ˜æ—¶ä¼šæœ‰ä¸ªå¤§è‡´çš„å°è±¡ï¼Œä¾¿äºå­¦ä¹ ç†è§£ã€‚

â­ï¸ æ¨èè§‚çœ‹è§†é¢‘ç‰ˆï¼š[https://www.bilibili.com/video/BV1i9Z8YhEja](https://www.bilibili.com/video/BV1i9Z8YhEja/)

æ–‡å­—ç‰ˆï¼š[https://www.codefather.cn/course/1907378983347892226](https://www.codefather.cn/course/1907378983347892226)

### æ–°å»ºä»£ç ä»“åº“

åˆ©ç”¨ GitHub æ­å»ºå¼€æºä»£ç ä»“åº“ï¼Œç‚¹ star çš„éƒ½æ˜¯ç²¾ç¥è‚¡ä¸œ

ä»£ç ä»“åº“ï¼š[https://github.com/liyupi/yu-ai-agent](https://github.com/liyupi/yu-ai-agent)

### AI å­¦ä¹ èµ„æº

å»ºè®®å¤§å®¶åœ¨å­¦ä¹  AI é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼ŒæŒç»­é˜…è¯» AI å¤§æ¨¡å‹ç›¸å…³çš„é¢è¯•é¢˜ï¼Œå·©å›ºçŸ¥è¯†ç‚¹ã€‚è¿™å—é±¼çš®å·²ç»å¸®å¤§å®¶æ‹¿æäº†ï¼Œæˆ‘ä»¬çš„ç¨‹åºå‘˜é¢è¯•åˆ·é¢˜ç¥å™¨é¢è¯•é¸­æäº†ä¸ª [AI å¤§æ¨¡å‹é¢è¯•é¢˜åº“](https://www.mianshiya.com/bank/1906189461556076546)ï¼Œå»ºè®®æ²¡äº‹å°±é˜…è¯»ä¸€äº›é¢˜ç›®æ¥å­¦ä¹ å­¦ä¹ ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/FkB81WCudfqaC00P.webp)

è€Œä¸”ç”±äº AI æŠ€æœ¯æ—¥æ–°æœˆå¼‚ï¼Œå»ºè®®å¤§å®¶å¹³æ—¶å¤šå…³æ³¨ AI ç›¸å…³çš„èµ„è®¯åŠ¨æ€ï¼Œæ¯”å¦‚ [é±¼çš®å¼€æºçš„ AI çŸ¥è¯†åº“](https://github.com/liyupi/ai-guide)ï¼Œæ±‡æ€»äº†çƒ­é—¨çš„ AI å¤§æ¨¡å‹å’Œå·¥å…·ï¼Œæ¯”å¦‚ Deepseek ä½¿ç”¨æŒ‡å—ã€æç¤ºè¯æŠ€å·§åˆ†äº«ã€çŸ¥è¯†å¹²è´§ã€åº”ç”¨åœºæ™¯ã€AI å˜ç°ã€è¡Œä¸šèµ„è®¯ã€æ•™ç¨‹èµ„æºç­‰ä¸€ç³»åˆ—å†…å®¹ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŒæ¡ AI æŠ€æœ¯ï¼Œèµ°åœ¨æ—¶ä»£å‰æ²¿ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/xKcJrlWaXE7Xynib.webp)

ä¸ƒã€å­¦ä¹ å¤§çº²
------

ç¬¬ 1 æœŸï¼šé¡¹ç›®æ€»è§ˆ

*   é¡¹ç›®ä»‹ç»
*   é¡¹ç›®ä¼˜åŠ¿
*   é¡¹ç›®åŠŸèƒ½æ¢³ç†
*   æŠ€æœ¯é€‰å‹
*   æ¶æ„è®¾è®¡
*   AI å­¦ä¹ è·¯çº¿

*   AI åº”ç”¨å¹³å°çš„ä½¿ç”¨ï¼ˆDifyï¼‰
*   AI å¸¸ç”¨å·¥å…·
*   AI ç¼–ç¨‹æŠ€å·§
*   AI ç¼–ç¨‹æŠ€æœ¯

*   å­¦ä¹ å¤§çº²

ç¬¬ 2 æœŸï¼šAI å¤§æ¨¡å‹æ¥å…¥

*   AI å¤§æ¨¡å‹æ¦‚å¿µ
*   æ¥å…¥ AI å¤§æ¨¡å‹ï¼ˆ3 ç§æ–¹å¼ï¼‰
*   åç«¯é¡¹ç›®åˆå§‹åŒ–
*   ç¨‹åºè°ƒç”¨ AI å¤§æ¨¡å‹ï¼ˆ4 ç§æ–¹å¼ï¼‰
*   æœ¬åœ°éƒ¨ç½² AI å¤§æ¨¡å‹
*   Spring AI è°ƒç”¨æœ¬åœ°å¤§æ¨¡å‹


ç¬¬ 3 æœŸï¼šAI åº”ç”¨å¼€å‘

*   Prompt å·¥ç¨‹æ¦‚å¿µ
*   Prompt ä¼˜åŒ–æŠ€å·§
*   AI æ‹çˆ±å¤§å¸ˆåº”ç”¨éœ€æ±‚åˆ†æ
*   AI æ‹çˆ±å¤§å¸ˆåº”ç”¨æ–¹æ¡ˆè®¾è®¡
*   Spring AI ChatClient / Advisor / ChatMemory ç‰¹æ€§
*   å¤šè½®å¯¹è¯ AI åº”ç”¨å¼€å‘
*   Spring AI è‡ªå®šä¹‰ Advisor
*   Spring AI ç»“æ„åŒ–è¾“å‡º - æ‹çˆ±æŠ¥å‘ŠåŠŸèƒ½
*   Spring AI å¯¹è¯è®°å¿†æŒä¹…åŒ–
*   Spring AI Prompt æ¨¡æ¿ç‰¹æ€§
*   å¤šæ¨¡æ€æ¦‚å¿µå’Œå¼€å‘

ç¬¬ 4 æœŸï¼šRAG çŸ¥è¯†åº“åŸºç¡€

*   AI æ‹çˆ±çŸ¥è¯†é—®ç­”éœ€æ±‚åˆ†æ
*   RAG æ¦‚å¿µï¼ˆé‡ç‚¹ç†è§£æ ¸å¿ƒæ­¥éª¤ï¼‰
*   RAG å®æˆ˜ï¼šSpring AI + æœ¬åœ°çŸ¥è¯†åº“
*   RAG å®æˆ˜ï¼šSpring AI + äº‘çŸ¥è¯†åº“æœåŠ¡

ç¬¬ 5 æœŸï¼šRAG çŸ¥è¯†åº“è¿›é˜¶

*   RAG æ ¸å¿ƒç‰¹æ€§

*   æ–‡æ¡£æ”¶é›†å’Œåˆ‡å‰²ï¼ˆETLï¼‰
*   å‘é‡è½¬æ¢å’Œå­˜å‚¨ï¼ˆå‘é‡æ•°æ®åº“ï¼‰
*   æ–‡æ¡£è¿‡æ»¤å’Œæ£€ç´¢ï¼ˆæ–‡æ¡£æ£€ç´¢å™¨ï¼‰
*   æŸ¥è¯¢å¢å¼ºå’Œå…³è”ï¼ˆä¸Šä¸‹æ–‡æŸ¥è¯¢å¢å¼ºå™¨ï¼‰

*   RAG æœ€ä½³å®è·µå’Œè°ƒä¼˜
*   æ£€ç´¢ç­–ç•¥
*   å¤§æ¨¡å‹å¹»è§‰

ç¬¬ 6 æœŸï¼šå·¥å…·è°ƒç”¨

*   å·¥å…·æ¦‚å¿µ
*   Spring AI å·¥å…·å¼€å‘
*   ä¸»æµå·¥å…·å¼€å‘

*   æ–‡ä»¶æ“ä½œ
*   è”ç½‘æœç´¢
*   ç½‘é¡µæŠ“å–
*   ç»ˆç«¯æ“ä½œ
*   èµ„æºä¸‹è½½
*   PDF ç”Ÿæˆ

*   å·¥å…·è¿›é˜¶çŸ¥è¯†ï¼ˆåŸç†å’Œé«˜çº§ç‰¹æ€§ï¼‰

ç¬¬ 7 æœŸï¼šMCP

*   MCP æ¦‚å¿µ
*   ä½¿ç”¨ MCPï¼ˆ3 ç§æ–¹å¼ï¼‰
*   Spring AI MCP å¼€å‘æ¨¡å¼
*   Spring AI MCP å¼€å‘å®æˆ˜ - å›¾ç‰‡æœç´¢ MCP
*   MCP å¼€å‘æœ€ä½³å®è·µ
*   éƒ¨ç½² MCP
*   MCP å®‰å…¨é—®é¢˜

ç¬¬ 8 æœŸï¼šAI æ™ºèƒ½ä½“æ„å»º

*   AI æ™ºèƒ½ä½“æ¦‚å¿µ
*   æ™ºèƒ½ä½“å®ç°å…³é”®
*   ä½¿ç”¨ AI æ™ºèƒ½ä½“ï¼ˆ2 ç§æ–¹å¼ï¼‰
*   è‡ªä¸»è§„åˆ’æ™ºèƒ½ä½“ä»‹ç»
*   OpenManus å®ç°åŸç†
*   è‡ªä¸»å®ç° Manus æ™ºèƒ½ä½“
*   æ™ºèƒ½ä½“å·¥ä½œæµ

ç¬¬ 9 æœŸï¼šAI æœåŠ¡åŒ–

*   AI åº”ç”¨æ¥å£å¼€å‘ï¼ˆSSEï¼‰
*   AI æ™ºèƒ½ä½“æ¥å£å¼€å‘
*   AI ç”Ÿæˆå‰ç«¯ä»£ç 
*   AI æœåŠ¡ Serverless éƒ¨ç½²25:["Java","é¡¹ç›®å®æˆ˜","é¡¹ç›®","å‰ç«¯","AI","åç«¯"]
27:["Java","èµ„æº","å­¦ä¹ æŒ‡å—","æ±‚èŒ","é¢è¯•","èŒåœº","å‰ç«¯","åç«¯","è‡ªæˆ‘ä»‹ç»","å­¦ä¹ æ‰“å¡"]
26:{"id":"1601072287388278786","planetCode":"1","planetPostAuth":1,"userName":"ç¨‹åºå‘˜é±¼çš®","userAvatar":"https://pic.code-nav.cn/user_avatar/1601072287388278786/66mwv6CDAmxwVfNi.webp","userThumbnailAvatar":"https://pic.code-nav.cn/user_avatar/1601072287388278786/thumbnail/66mwv6CDAmxwVfNi.jpeg","gender":1,"userProfile":"è¿™ä¸ªç½‘ç«™çš„è€å¤§","interests":"$27","place":"ä¸Šæµ·","school":"ä¸œåå¤§å­¦","direction":"åç«¯","graduationYear":2020,"github":"https://github.com/liyupi","blog":"https://yupi.icu","score":50908,"scoreLevel":7,"followeeNum":6728,"followNum":7,"vipExpireTime":10018230399000,"vipNumber":"1","userRole":"admin","needGuide":0,"syncPopupLeftCount":0}
23:{"id":"1915010091721236482","title":"SpringAI+RAG+MCP+Agentï¼ŒAI æ™ºèƒ½ä½“ä¼ä¸šçº§å®æˆ˜ï¼ˆ25å¹´å¿…å­¦","coverTitle":"AI è¶…çº§æ™ºèƒ½ä½“é¡¹ç›®\nRAG + MCP + å¤§æ¨¡å‹æœ¬åœ°éƒ¨ç½²","description":"ä»¥ AI å¼€å‘å®æˆ˜ä¸ºæ ¸å¿ƒçš„é¡¹ç›®æ•™ç¨‹ï¼Œå°†é€šè¿‡å¼€å‘ AI æ‹çˆ±å¤§å¸ˆåº”ç”¨ + æ‹¥æœ‰è‡ªä¸»è§„åˆ’èƒ½åŠ›çš„è¶…çº§æ™ºèƒ½ä½“ï¼Œå¸¦å¤§å®¶æŒæ¡æ–°æ—¶ä»£ç¨‹åºå‘˜å¿…çŸ¥å¿…ä¼šçš„ AI æ ¸å¿ƒæ¦‚å¿µã€AI å®ç”¨å·¥å…·å’Œ AI ç¼–ç¨‹æŠ€æœ¯ï¼Œå¤§å¹…å¢åŠ æ±‚èŒçš„ç«äº‰åŠ›ï¼\nAI æ‹çˆ±å¤§å¸ˆåº”ç”¨å¯ä»¥ä¾èµ– AI å¤§æ¨¡å‹è§£å†³ç”¨æˆ·çš„æƒ…æ„Ÿé—®é¢˜ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ã€åŸºäºè‡ªå®šä¹‰çŸ¥è¯†åº“è¿›è¡Œé—®ç­”ã€è‡ªä¸»è°ƒç”¨å·¥å…·å’Œ MCP æœåŠ¡å®Œæˆä»»åŠ¡ï¼Œæ¯”å¦‚è°ƒç”¨åœ°å›¾æœåŠ¡è·å–é™„è¿‘åœ°ç‚¹å¹¶åˆ¶å®šçº¦ä¼šè®¡åˆ’ã€‚\nè¿˜ä¼šæ‰‹æŠŠæ‰‹å¸¦å¤§å®¶å®ŒæˆåŸºäº ReAct æ¨¡å¼çš„è‡ªä¸»è§„åˆ’æ™ºèƒ½ä½“ YuManusï¼Œå¯ä»¥åˆ©ç”¨ç½‘é¡µæœç´¢ã€èµ„æºä¸‹è½½å’Œ PDF ç”Ÿæˆ","content":"$24","cover":"https://pic.code-nav.cn/post_cover/1608440217629360130/X4X5DY9RtoupLN9x.webp","type":1,"learnCondition":3,"tags":"$25","viewNum":437595,"viewCount":"21869","price":39900,"originPrice":59900,"activeMark":"good","priority":9999,"userId":"1601072287388278786","shortLink":"aiagent","vipViewable":0,"reviewStatus":1,"editTime":1760180828000,"createTime":1745408959000,"hasGroupQrcode":true,"user":"$26","purchased":false}
2:[["$","div",null,{"id":"courseScrollView","className":"overflow-y-auto h-full scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent hover:scrollbar-thumb-gray-300 course-content","children":[["$","div",null,{"className":"md:w-[calc(100%-260px)] w-full","children":["$","div",null,{"className":"px-8 py-4 max-w-[860px] mx-auto article-container","children":[["$","h1",null,{"className":"text-3xl font-bold mb-4","children":"8 - AI æ™ºèƒ½ä½“æ„å»º"}],["$","$L4",null,{"split":["$","$L5",null,{"type":"vertical"}],"className":"text-sm mb-2 text-gray-500","children":[["$","span",null,{"children":"ç¨‹åºå‘˜é±¼çš®"}],["$","span",null,{"children":"2025-05-20 19:35"}],["$","span",null,{"children":["é˜…è¯» ","1.9 w"]}]]}],["$","div",null,{"style":{"marginBottom":16}}],["$","div",null,{"className":"course-container","children":["$L6",["$","$L7",null,{"btnText":"ç‚¹å‡»ç™»å½•æŸ¥çœ‹å®Œæ•´å†…å®¹"}]]}],["$","div",null,{"style":{"marginBottom":16}}],"$undefined",["$","$L8",null,{"courseId":"1915010091721236482"}],["$","div",null,{"style":{"marginBottom":16}}],["$","$L9",null,{"article":{"id":"1924791167446343681","title":"8 - AI æ™ºèƒ½ä½“æ„å»º","contentType":"text","learnCondition":3,"content":"$a","type":1,"category":"è¯¾ç¨‹æ–‡ç« ","viewNum":18617,"viewCount":"3267","thumbNum":0,"favourNum":0,"commentNum":31,"priority":0,"userId":"1601072287388278786","courseId":"1915010091721236482","reviewStatus":1,"editTime":1751252393000,"createTime":1747740949000,"updateTime":1760713801000,"user":{"id":"1601072287388278786","planetCode":"1","planetPostAuth":1,"userName":"ç¨‹åºå‘˜é±¼çš®","userAvatar":"https://pic.code-nav.cn/user_avatar/1601072287388278786/66mwv6CDAmxwVfNi.webp","userThumbnailAvatar":"https://pic.code-nav.cn/user_avatar/1601072287388278786/thumbnail/66mwv6CDAmxwVfNi.jpeg","gender":1,"userProfile":"è¿™ä¸ªç½‘ç«™çš„è€å¤§","interests":["Java","èµ„æº","å­¦ä¹ æŒ‡å—","æ±‚èŒ","é¢è¯•","èŒåœº","å‰ç«¯","åç«¯","è‡ªæˆ‘ä»‹ç»","å­¦ä¹ æ‰“å¡"],"place":"ä¸Šæµ·","school":"ä¸œåå¤§å­¦","direction":"åç«¯","graduationYear":2020,"github":"https://github.com/liyupi","blog":"https://yupi.icu","score":50908,"scoreLevel":7,"followeeNum":6728,"followNum":7,"followStatus":1,"vipExpireTime":10018230399000,"vipNumber":"1","userRole":"admin","needGuide":0,"syncPopupLeftCount":0},"learnStatus":2,"loginUserVO":{"id":"1742154859488071681","planetCode":"30232","planetUserId":"212884144481881","planetPostAuth":1,"planetExtraInfo":{"userName":"å¤ªé˜³è½å±±äº†","joinTime":"2023-12-12 22:05:47","expireTime":"2024-12-12 22:05:47","lastCertifyTime":1725420992914,"lastGetCodeTime":1704197081065},"jpushRegistrationId":"120c83f761199147da8","shareCode":"y8a08s","userName":"autumn","userAvatar":"https://pic.code-nav.cn/user_avatar/1742154859488071681/jnpSLUeQj6jRarii.webp","userThumbnailAvatar":"https://pic.code-nav.cn/user_avatar/1742154859488071681/thumbnail/jnpSLUeQj6jRarii.jpg","email":"","phone":"175****2997","scene":"v8zug9q4najcb8vb;3071360111:39268","userRole":"vip","interests":[],"job":"Javaåç«¯","direction":"åç«¯","score":1094,"scoreLevel":5,"coin":0,"followeeNum":41,"followNum":2,"vipExpireTime":1779515864000,"lastLoginTime":1760273705000,"createTime":1704197060000,"updateTime":1760589499000,"mpOpenId":"oqPe46G93UUG_9jDDgcqhMPljGWM","appOpenId":"oKkLu6clpUmne_yCE_g5H4iPyyLg","vipNumber":"30232","needGuide":0,"syncPopupLeftCount":0,"oldVip":false,"campMember":0,"badgeList":[{"name":"ç¼–ç¨‹å¯¼èˆªä¼šå‘˜","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/NVVJ3lG3utDBss8P.svg","active":true},{"name":"é¢è¯•é¸­å‹å‹","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/VjzY1VaUuCcRrDUw.svg","active":true},{"name":"è€é±¼ç®€å†å‹å‹","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/jQWrqZvtiaa6CdX1.svg","active":true},{"name":"ä»£ç å°æŠ„å‹å‹","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/UKewhyATG8zB7GIp.svg","active":true},{"name":"å‰ªåˆ‡åŠ©æ‰‹å‹å‹","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/c4WR51wRCm0gPCER.svg","active":true},{"name":"é¢è¯•ç‰¹è®­è¥å‹‡å£«","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/C4rF8c27nH32gaTN.svg","active":false},{"name":"ç®—æ³•å¯¼èˆªå‹å‹","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/RVZ8dAZg4CeIoZsN.svg","active":false},{"name":"Github","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/t3KL6yzv65ybMU7y.svg","active":false},{"name":"ä¸ªäººåšå®¢","jumpLink":"https://www.codefather.cn/post/1941025831402278914","badgeUrl":"https://pic.code-nav.cn/post_picture/1612112932991139841/ltMqeLsgZ1X71iFa.svg","active":false}]}},"courseInfo":{"id":"1915010091721236482","title":"SpringAI+RAG+MCP+Agentï¼ŒAI æ™ºèƒ½ä½“ä¼ä¸šçº§å®æˆ˜ï¼ˆ25å¹´å¿…å­¦","coverTitle":"AI è¶…çº§æ™ºèƒ½ä½“é¡¹ç›®\nRAG + MCP + å¤§æ¨¡å‹æœ¬åœ°éƒ¨ç½²","description":"ä»¥ AI å¼€å‘å®æˆ˜ä¸ºæ ¸å¿ƒçš„é¡¹ç›®æ•™ç¨‹ï¼Œå°†é€šè¿‡å¼€å‘ AI æ‹çˆ±å¤§å¸ˆåº”ç”¨ + æ‹¥æœ‰è‡ªä¸»è§„åˆ’èƒ½åŠ›çš„è¶…çº§æ™ºèƒ½ä½“ï¼Œå¸¦å¤§å®¶æŒæ¡æ–°æ—¶ä»£ç¨‹åºå‘˜å¿…çŸ¥å¿…ä¼šçš„ AI æ ¸å¿ƒæ¦‚å¿µã€AI å®ç”¨å·¥å…·å’Œ AI ç¼–ç¨‹æŠ€æœ¯ï¼Œå¤§å¹…å¢åŠ æ±‚èŒçš„ç«äº‰åŠ›ï¼\nAI æ‹çˆ±å¤§å¸ˆåº”ç”¨å¯ä»¥ä¾èµ– AI å¤§æ¨¡å‹è§£å†³ç”¨æˆ·çš„æƒ…æ„Ÿé—®é¢˜ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ã€åŸºäºè‡ªå®šä¹‰çŸ¥è¯†åº“è¿›è¡Œé—®ç­”ã€è‡ªä¸»è°ƒç”¨å·¥å…·å’Œ MCP æœåŠ¡å®Œæˆä»»åŠ¡ï¼Œæ¯”å¦‚è°ƒç”¨åœ°å›¾æœåŠ¡è·å–é™„è¿‘åœ°ç‚¹å¹¶åˆ¶å®šçº¦ä¼šè®¡åˆ’ã€‚\nè¿˜ä¼šæ‰‹æŠŠæ‰‹å¸¦å¤§å®¶å®ŒæˆåŸºäº ReAct æ¨¡å¼çš„è‡ªä¸»è§„åˆ’æ™ºèƒ½ä½“ YuManusï¼Œå¯ä»¥åˆ©ç”¨ç½‘é¡µæœç´¢ã€èµ„æºä¸‹è½½å’Œ PDF ç”Ÿæˆ","content":"$b","cover":"https://pic.code-nav.cn/post_cover/1608440217629360130/X4X5DY9RtoupLN9x.webp","type":1,"learnCondition":3,"tags":["Java","é¡¹ç›®å®æˆ˜","é¡¹ç›®","å‰ç«¯","AI","åç«¯"],"viewNum":437595,"viewCount":"21869","price":39900,"originPrice":59900,"activeMark":"good","priority":9999,"userId":"1601072287388278786","shortLink":"aiagent","vipViewable":0,"reviewStatus":1,"editTime":1760180828000,"createTime":1745408959000,"hasGroupQrcode":true,"user":{"id":"1601072287388278786","planetCode":"1","planetPostAuth":1,"userName":"ç¨‹åºå‘˜é±¼çš®","userAvatar":"https://pic.code-nav.cn/user_avatar/1601072287388278786/66mwv6CDAmxwVfNi.webp","userThumbnailAvatar":"https://pic.code-nav.cn/user_avatar/1601072287388278786/thumbnail/66mwv6CDAmxwVfNi.jpeg","gender":1,"userProfile":"è¿™ä¸ªç½‘ç«™çš„è€å¤§","interests":["Java","èµ„æº","å­¦ä¹ æŒ‡å—","æ±‚èŒ","é¢è¯•","èŒåœº","å‰ç«¯","åç«¯","è‡ªæˆ‘ä»‹ç»","å­¦ä¹ æ‰“å¡"],"place":"ä¸Šæµ·","school":"ä¸œåå¤§å­¦","direction":"åç«¯","graduationYear":2020,"github":"https://github.com/liyupi","blog":"https://yupi.icu","score":50908,"scoreLevel":7,"followeeNum":6728,"followNum":7,"vipExpireTime":10018230399000,"vipNumber":"1","userRole":"admin","needGuide":0,"syncPopupLeftCount":0},"purchased":false}}]]}]}],["$","$Lc",null,{"article":"$d"}]]}],["$","$L1e",null,{"article":"$d"}],["$","$L1f",null,{}],["$","$L20",null,{"data":"$d","scrollTarget":"courseScrollView"}],["$","$L21",null,{"params":{"contentType":"text"},"path":"/course/1915010091721236482/section/1924791167446343681"}],["$","$L22",null,{"courseInfo":"$23"}],["$","$L28",null,{}]]
3:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"8 - AI æ™ºèƒ½ä½“æ„å»º - SpringAI+RAG+MCP+Agentï¼ŒAI æ™ºèƒ½ä½“ä¼ä¸šçº§å®æˆ˜ï¼ˆ25å¹´å¿…å­¦ - ç¼–ç¨‹å¯¼èˆªæ•™ç¨‹"}],["$","meta","3",{"name":"description","content":"æœ¬èŠ‚é‡ç‚¹\n----\n\nå­¦ä¹  AI æ™ºèƒ½ä½“çš„æ¦‚å¿µå’Œæ„å»ºæ–¹æ³•ï¼ŒæŒæ¡å¦‚ä½•å®ç°å…·æœ‰è‡ªä¸»å†³ç­–èƒ½åŠ›çš„ AI ç³»ç»Ÿã€‚é€šè¿‡ CoT æ€ç»´é“¾ã€ReAct æ¨¡å¼ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œæ·±å…¥ç†è§£æ™ºèƒ½ä½“çš„å·¥ä½œåŸç†ï¼Œå¹¶å‚è€ƒ OpenManã€‚ç¼–ç¨‹å¯¼èˆªæ•™ç¨‹åˆ†äº«ï¼Œåšæ‚¨ç¼–ç¨‹å­¦ä¹ è·¯ä¸Šçš„å¯¼èˆªå‘˜ã€‚"}],["$","meta","4",{"name":"keywords","content":",Java,Python,JavaScript,å‰ç«¯,Cè¯­è¨€,C++,Goè¯­è¨€,ç¨‹åºå‘˜,ç¼–ç¨‹å­¦ä¹ ,ITæ•™ç¨‹,è‡ªå­¦ç¼–ç¨‹,è½¯ä»¶å¼€å‘,é¡¹ç›®å®æˆ˜,ç¼–ç¨‹å¯¼èˆª,å¼€å‘è€…äº¤æµç¤¾åŒº,ç¼–ç¨‹èµ„æº,è®¡ç®—æœº"}],["$","meta","5",{"name":"itemprop:image","content":"https://pic.code-nav.cn/post_cover/1608440217629360130/X4X5DY9RtoupLN9x.webp"}],["$","meta","6",{"name":"itemprop:name","content":"8 - AI æ™ºèƒ½ä½“æ„å»º - SpringAI+RAG+MCP+Agentï¼ŒAI æ™ºèƒ½ä½“ä¼ä¸šçº§å®æˆ˜ï¼ˆ25å¹´å¿…å­¦ - ç¼–ç¨‹å¯¼èˆªæ•™ç¨‹"}],["$","meta","7",{"name":"itemprop:description","content":"æœ¬èŠ‚é‡ç‚¹\n----\n\nå­¦ä¹  AI æ™ºèƒ½ä½“çš„æ¦‚å¿µå’Œæ„å»ºæ–¹æ³•ï¼ŒæŒæ¡å¦‚ä½•å®ç°å…·æœ‰è‡ªä¸»å†³ç­–èƒ½åŠ›çš„ AI ç³»ç»Ÿã€‚é€šè¿‡ CoT æ€ç»´é“¾ã€ReAct æ¨¡å¼ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œæ·±å…¥ç†è§£æ™ºèƒ½ä½“çš„å·¥ä½œåŸç†ï¼Œå¹¶å‚è€ƒ OpenManã€‚ç¼–ç¨‹å¯¼èˆªæ•™ç¨‹åˆ†äº«ï¼Œåšæ‚¨ç¼–ç¨‹å­¦ä¹ è·¯ä¸Šçš„å¯¼èˆªå‘˜ã€‚"}],["$","link","8",{"rel":"canonical","href":"https://www.codefather.cn/course/1915010091721236482/section/1924791167446343681"}],["$","meta","9",{"property":"og:title","content":"8 - AI æ™ºèƒ½ä½“æ„å»º - SpringAI+RAG+MCP+Agentï¼ŒAI æ™ºèƒ½ä½“ä¼ä¸šçº§å®æˆ˜ï¼ˆ25å¹´å¿…å­¦ - ç¼–ç¨‹å¯¼èˆªæ•™ç¨‹"}],["$","meta","10",{"property":"og:description","content":"æœ¬èŠ‚é‡ç‚¹\n----\n\nå­¦ä¹  AI æ™ºèƒ½ä½“çš„æ¦‚å¿µå’Œæ„å»ºæ–¹æ³•ï¼ŒæŒæ¡å¦‚ä½•å®ç°å…·æœ‰è‡ªä¸»å†³ç­–èƒ½åŠ›çš„ AI ç³»ç»Ÿã€‚é€šè¿‡ CoT æ€ç»´é“¾ã€ReAct æ¨¡å¼ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œæ·±å…¥ç†è§£æ™ºèƒ½ä½“çš„å·¥ä½œåŸç†ï¼Œå¹¶å‚è€ƒ OpenManã€‚ç¼–ç¨‹å¯¼èˆªæ•™ç¨‹åˆ†äº«ï¼Œåšæ‚¨ç¼–ç¨‹å­¦ä¹ è·¯ä¸Šçš„å¯¼èˆªå‘˜ã€‚"}],["$","meta","11",{"property":"og:url","content":"https://www.codefather.cn/course/1915010091721236482/section/1924791167446343681"}],["$","meta","12",{"property":"og:site_name","content":"ç¼–ç¨‹å¯¼èˆª"}],["$","meta","13",{"property":"og:locale","content":"zh_CN"}],["$","meta","14",{"property":"og:image","content":"https://pic.code-nav.cn/post_cover/1608440217629360130/X4X5DY9RtoupLN9x.webp"}],["$","meta","15",{"property":"og:type","content":"website"}],["$","meta","16",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","17",{"name":"twitter:title","content":"8 - AI æ™ºèƒ½ä½“æ„å»º - SpringAI+RAG+MCP+Agentï¼ŒAI æ™ºèƒ½ä½“ä¼ä¸šçº§å®æˆ˜ï¼ˆ25å¹´å¿…å­¦ - ç¼–ç¨‹å¯¼èˆªæ•™ç¨‹"}],["$","meta","18",{"name":"twitter:description","content":"æœ¬èŠ‚é‡ç‚¹\n----\n\nå­¦ä¹  AI æ™ºèƒ½ä½“çš„æ¦‚å¿µå’Œæ„å»ºæ–¹æ³•ï¼ŒæŒæ¡å¦‚ä½•å®ç°å…·æœ‰è‡ªä¸»å†³ç­–èƒ½åŠ›çš„ AI ç³»ç»Ÿã€‚é€šè¿‡ CoT æ€ç»´é“¾ã€ReAct æ¨¡å¼ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œæ·±å…¥ç†è§£æ™ºèƒ½ä½“çš„å·¥ä½œåŸç†ï¼Œå¹¶å‚è€ƒ OpenManã€‚ç¼–ç¨‹å¯¼èˆªæ•™ç¨‹åˆ†äº«ï¼Œåšæ‚¨ç¼–ç¨‹å­¦ä¹ è·¯ä¸Šçš„å¯¼èˆªå‘˜ã€‚"}],["$","meta","19",{"name":"twitter:image","content":"https://pic.code-nav.cn/post_cover/1608440217629360130/X4X5DY9RtoupLN9x.webp"}],["$","link","20",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon"}],["$","meta","21",{"name":"next-size-adjust"}]]
1:null
29:I[40294,["9941","static/chunks/2891d918-490a063635c34aeb.js","4139","static/chunks/174e4490-29a1d795f6764997.js","8218","static/chunks/aaea2bcf-58543c7ec28159a7.js","5706","static/chunks/9c4e2130-b868ee359fcd0c3d.js","2744","static/chunks/76567b6f-9e3925989e305cc3.js","2010","static/chunks/c0e397d0-d86ae2426f017668.js","522","static/chunks/94730671-64512fa7599fd05b.js","8016","static/chunks/8016-76f5b6fc0297bf13.js","5826","static/chunks/5826-52b1f54f8b89738c.js","378","static/chunks/378-48f80c33676f4ec9.js","32","static/chunks/32-e2de8ec062217fc5.js","7149","static/chunks/7149-68af16a5217d204c.js","233","static/chunks/233-c7f6462b15a57616.js","7460","static/chunks/7460-43d6b73b58bf9e11.js","4192","static/chunks/4192-0a472c1b7e82b4a9.js","680","static/chunks/680-89d75f11f5b59a3b.js","9181","static/chunks/9181-554203038360fd9b.js","732","static/chunks/732-02f9985fe5df463d.js","9526","static/chunks/9526-8b34b4ebf80d31a0.js","9211","static/chunks/9211-abac1d2889d12043.js","7348","static/chunks/7348-85bddec4a8308adc.js","8879","static/chunks/8879-d65f71f41a1b9b36.js","5060","static/chunks/5060-06fb719ec67b57d2.js","5024","static/chunks/5024-182f5826f6f846d7.js","231","static/chunks/231-6f904f15da65d91c.js","1502","static/chunks/1502-aa910fe11db02f2d.js","975","static/chunks/975-8c31af6428b30ab2.js","7873","static/chunks/7873-176eb0c1f7ebdb1e.js","970","static/chunks/970-510f4beebdaa942c.js","5979","static/chunks/5979-35fd0a8626df89a1.js","3057","static/chunks/3057-f66194ffd4856ab0.js","6309","static/chunks/6309-4e9ef3d43d89f86d.js","3009","static/chunks/3009-fca5a887aad17f11.js","5216","static/chunks/5216-86b1b7f419953719.js","288","static/chunks/288-f02ec53e81fdaa93.js","6899","static/chunks/6899-cb29c14b51869649.js","627","static/chunks/627-4211edbdb8d1ac1a.js","234","static/chunks/234-ce860c491d7f5b04.js","4687","static/chunks/4687-4f25402811a950d8.js","5148","static/chunks/5148-e6af8c5015774793.js","7556","static/chunks/7556-de2e368007d2d5de.js","4603","static/chunks/4603-7e5f8f2f21e17f14.js","1056","static/chunks/1056-723246656b9ed352.js","294","static/chunks/294-0382f6befcff6986.js","250","static/chunks/250-c12d0e0fcfb560f9.js","7387","static/chunks/7387-5a37204eb17c0cc6.js","8613","static/chunks/8613-633084470cc2edf5.js","3262","static/chunks/3262-59e7c98492aad655.js","8903","static/chunks/8903-02c6f2898a6875ba.js","1891","static/chunks/1891-aae9c491f29fa7c5.js","722","static/chunks/app/(course)/course/%5BcourseId%5D/section/%5BsectionId%5D/page-e6e904a68b5990b4.js"],"default"]
2a:T130e8,æœ¬èŠ‚é‡ç‚¹
----

å­¦ä¹  AI æ™ºèƒ½ä½“çš„æ¦‚ï»¿å¿µå’Œæ„å»ºæ–¹æ³•ï¼ŒæŒæ¡å¦‚ä½•å®ç°å…·æœ‰è‡ªä¸»å†³ç­–èƒ½åŠ›çš„â€‹ AI ç³»ç»Ÿã€‚é€šè¿‡ CoT æ€ç»´é“¾ã€ReAcâ€t æ¨¡å¼ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œæ·±å…¥ç†è§£æ™ºèƒ½ä½“çš„å·¥ä½œåŸç†ï»¿ï¼Œå¹¶å‚è€ƒ OpenManus å¼€æºæ¡†æ¶å®æˆ˜å¼€â€å‘èƒ½å¤Ÿè‡ªä¸»è§„åˆ’æ‰§è¡Œä»»åŠ¡çš„ AI æ™ºèƒ½ä½“ã€‚

å…·ä½“å†…å®¹åŒ…æ‹¬ï¼š

*   AI æ™ºèƒ½ä½“æ¦‚å¿µä¸ç‰¹ç‚¹

*   æ™ºèƒ½ä½“å®ç°å…³é”®æŠ€æœ¯

*   ä½¿ç”¨ AI æ™ºèƒ½ä½“çš„å¤šç§æ–¹å¼

*   OpenManus å®ç°åŸç†

*   è‡ªä¸»å®ç° Manus æ™ºèƒ½ä½“

*   æ™ºèƒ½ä½“å·¥ä½œæµç¼–æ’

*   A2A åè®®


ä¸€ã€ä»€ä¹ˆæ˜¯æ™ºèƒ½ä½“ï¼Ÿ
---------

æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæ„ŸçŸ¥ç¯å¢ƒã€è¿›è¡Œæ¨ç†ã€åˆ¶å®šè®¡åˆ’ã€åšå‡ºå†³ç­–å¹¶è‡ªä¸»é‡‡å–è¡ŒåŠ¨ä»¥å®ç°ç‰¹å®šç›®æ ‡çš„ AI ç³»ç»Ÿã€‚å®ƒä»¥å¤§è¯­è¨€æ¨¡å‹ä¸ºæ ¸å¿ƒï¼Œé›†æˆ **è®°å¿†ã€çŸ¥è¯†åº“å’Œå·¥å…·** ç­‰èƒ½åŠ›ä¸ºä¸€ä½“ï¼Œæ„é€ äº†å®Œæ•´çš„å†³ç­–èƒ½åŠ›ã€æ‰§è¡Œèƒ½åŠ›å’Œè®°å¿†èƒ½åŠ›ï¼Œå°±åƒä¸€ä¸ªæœ‰ä¸»è§‚èƒ½åŠ¨æ€§çš„äººç±»ä¸€æ ·ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/2lxYItZML09s2igb.webp" alt="" width="566px" />


ä¸æ™®é€šçš„ AI å¤§æ¨¡å‹ä¸åŒï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿï¼š

1.  æ„ŸçŸ¥ç¯å¢ƒï¼šé€šè¿‡å„ç§è¾“å…¥æ¸ é“è·å–ä¿¡æ¯ï¼ˆå¤šæ¨¡æ€ï¼‰ï¼Œç†è§£ç”¨æˆ·éœ€æ±‚å’Œç¯å¢ƒçŠ¶æ€

2.  è‡ªä¸»è§„åˆ’ä»»åŠ¡æ­¥éª¤ï¼šå°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å­ä»»åŠ¡ï¼Œå¹¶è®¾è®¡æ‰§è¡Œé¡ºåº

3.  ä¸»åŠ¨è°ƒç”¨å·¥å…·å®Œæˆä»»åŠ¡ï¼šæ ¹æ®éœ€è¦é€‰æ‹©å¹¶ä½¿ç”¨å„ç§å¤–éƒ¨å·¥å…·å’Œ APIï¼Œæ‰©å±•è‡ªèº«èƒ½åŠ›è¾¹ç•Œ

4.  è¿›è¡Œå¤šæ­¥æ¨ç†ï¼šé€šè¿‡æ€ç»´é“¾ï¼ˆChain of Thoughtï¼‰é€æ­¥åˆ†æé—®é¢˜å¹¶æ¨å¯¼è§£å†³æ–¹æ¡ˆ

5.  æŒç»­å­¦ä¹ å’Œè®°å¿†è¿‡å»çš„äº¤äº’ï¼šä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ï¼Œåˆ©ç”¨å†å²äº¤äº’æ”¹è¿›å†³ç­–

6.  æ ¹æ®ç¯å¢ƒåé¦ˆè°ƒæ•´è¡Œä¸ºï¼šæ ¹æ®æ‰§è¡Œç»“æœåŠ¨æ€è°ƒæ•´ç­–ç•¥ï¼Œå®ç°é—­ç¯ä¼˜åŒ–


å¤§å¤šæ•°åŒå­¦ï»¿ç¬¬ä¸€æ¬¡æ„Ÿå—åˆ°æ™ºèƒ½ä½“â€‹åº”è¯¥æ˜¯ â€œæ·±åº¦æ€è€ƒâ€â€ åŠŸèƒ½ï¼Œè¿™æ˜¯ Aï»¿I é€æ­¥æ™ºèƒ½åŒ–çš„ä½“â€ç°ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/6iiHrTsygYzTs18M.webp" alt="" width="100%" />



AI ä¼šåƒäººç±»ä¸€æ ·å…ˆæ€è€ƒåå›ç­”ï¼Œè®©ç­”æ¡ˆæ›´å‡†ç¡®ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/rfG1nm0l2Icg4wgO.webp" alt="" width="100%" />


### æ™ºèƒ½ä½“çš„åˆ†ç±»

è·Ÿäººçš„ç”Ÿé•¿ï»¿é˜¶æ®µä¸€æ ·ï¼Œæ™ºèƒ½ä½“ä¹Ÿâ€‹æ˜¯å¯ä»¥ä¸æ–­è¿›åŒ–çš„ã€‚â€æŒ‰ç…§è‡ªä¸»æ€§å’Œè§„åˆ’èƒ½ï»¿åŠ›ï¼Œæ™ºèƒ½ä½“å¯ä»¥åˆ†ä¸ºâ€å‡ ä¸ªå±‚æ¬¡ï¼š

1ï¼‰ååº”å¼æ™ºèƒ½ï»¿ä½“ï¼šä»…æ ¹æ®å½“å‰è¾“å…¥å’Œå›ºå®šè§„åˆ™â€‹åšå‡ºååº”ï¼Œç±»ä¼¼ç®€å•çš„èŠå¤©æœºå™¨â€äººï¼Œæ²¡æœ‰çœŸæ­£çš„è§„åˆ’èƒ½åŠ›ã€‚23ï»¿ å¹´æ—¶çš„å¤§å¤šæ•° AI èŠå¤©æœºâ€å™¨äººåº”ç”¨ï¼Œå‡ ä¹éƒ½æ˜¯ååº”å¼æ™ºèƒ½ä½“ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/YedTUYLHJAUmZfCY.webp" alt="" width="100%" />





2ï¼‰æœ‰é™è§„åˆ’æ™ºèƒ½ä½“ï¼šèƒ½è¿›è¡Œç®€å•åœ°å¤šæ­¥éª¤æ‰§è¡Œï¼Œä½†æ‰§è¡Œè·¯å¾„é€šå¸¸æ˜¯é¢„è®¾çš„æˆ–æœ‰ä¸¥æ ¼é™åˆ¶çš„ã€‚é‰´å®šä¸º â€œèƒ½å¹²äº‹ã€ä½†å¹²ä¸äº†å¤æ‚çš„å¤§äº‹â€ã€‚24 å¹´æµè¡Œçš„å¾ˆå¤šå¯è”ç½‘æœç´¢å†…å®¹ã€è°ƒç”¨çŸ¥è¯†åº“å’Œå·¥å…·çš„ AI åº”ç”¨ï¼Œéƒ½å±äºè¿™ç±»æ™ºèƒ½ä½“ã€‚æ¯”å¦‚ ChatGPT + Pluginsï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/FpaTTBb5urP0pT8z.webp" alt="" width="100%" />


3ï¼‰è‡ªä¸»è§„åˆ’æ™ºèƒ½ä½“ï»¿ï¼šä¹Ÿå«ç›®æ ‡å¯¼å‘æ™ºèƒ½ä½“ï¼Œèƒ½å¤Ÿæ ¹æ®ä»»åŠ¡â€‹ç›®æ ‡è‡ªä¸»åˆ†è§£ä»»åŠ¡ã€åˆ¶å®šè®¡åˆ’ã€é€‰æ‹©å·¥â€å…·å¹¶ä¸€æ­¥æ­¥æ‰§è¡Œï¼Œç›´åˆ°å®Œæˆä»»åŠ¡ã€‚â€‚â€‚ï»¿â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‰â€

æ¯”å¦‚ 25 å¹´åˆå¾ˆç«çš„ Mï»¿anus é¡¹ç›®ï¼Œå®ƒçš„æ ¸å¿ƒäº®ç‚¹åœ¨äºå…¶ â€œè‡ªä¸»æ‰§è¡Œâ€ èƒ½â€‹åŠ›ã€‚æ®å®˜æ–¹ä»‹ç»ï¼ŒManus èƒ½å¤Ÿåœ¨è™šæ‹Ÿæœºä¸­è°ƒç”¨å„â€ç§å·¥å…·ï¼ˆå¦‚ç¼–å†™ä»£ç ã€çˆ¬å–æ•°æ®ï¼‰å®Œæˆä»»åŠ¡ã€‚å…¶åº”ç”¨åœºæ™¯ï»¿è¦†ç›–æ—…è¡Œè§„åˆ’ã€è‚¡ç¥¨åˆ†æã€æ•™è‚²å†…å®¹ç”Ÿæˆç­‰ 40 ä½™ä¸ªâ€é¢†åŸŸï¼Œæ‰€ä»¥åœ¨å½“æ—¶ç»™äº†å¾ˆå¤šäººéœ‡æ’¼æ„Ÿã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/Dd2lPC7JMKUm3wn8.webp" alt="" width="100%" />


ä½†å…¶å®æ—©åœ¨è¿™ä¹‹å‰ï¼Œå°±æœ‰ç±»ä¼¼çš„é¡¹ç›®äº†ï¼Œæ¯”å¦‚ AutoGPTï¼Œæ‰€ä»¥ Manus å¤§ç«çš„åŒæ—¶ä¹Ÿè¢«äººè¯Ÿç—… â€œä¼šè¥é”€è€Œå·²â€ã€‚ç”šè‡³æ²¡éš”å¤šä¹…å°±æœ‰å°å›¢é˜Ÿå¼€æºäº† Manus çš„å¤åˆ»ç‰ˆ â€”â€” [OpenManus](https://github.com/FoundationAgents/OpenManus)ï¼Œè¿™ç±»æ™ºèƒ½ä½“é€šè¿‡ â€œæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿâ€ çš„å¾ªç¯æ¨¡å¼å·¥ä½œï¼Œèƒ½å¤ŸæŒç»­æ¨è¿›ä»»åŠ¡ç›´è‡³å®Œæˆç›®æ ‡ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/0rAwfy7x9i5Ljk3q.webp" alt="" width="100%" />


éœ€è¦æ³¨æ„ï¼Œè‡ªä¸»ï»¿è§„åˆ’èƒ½åŠ›æ˜¯æ™ºèƒ½ä½“å‘å±•çš„é‡è¦â€‹æ–¹å‘ï¼Œä½†å¹¶éæ‰€æœ‰åº”ç”¨åœºæ™¯éƒ½â€éœ€è¦å®Œå…¨çš„è‡ªä¸»è§„åˆ’èƒ½åŠ›ã€‚åœ¨ï»¿æŸäº›åœºæ™¯ä¸­ï¼Œé™åˆ¶æ™ºèƒ½ä½“çš„è‡ªâ€ä¸»æ€§åè€Œèƒ½æé«˜æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚

äºŒã€æ™ºèƒ½ä½“å®ç°å…³é”®æŠ€æœ¯
-----------

åœ¨è‡ªä¸»å¼€å‘ï»¿æ™ºèƒ½ä½“å‰ï¼Œæˆ‘ä»¬è¦å…ˆâ€‹äº†è§£ä¸€ä¸‹æ™ºèƒ½ä½“çš„å…³â€é”®å®ç°æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯ï»¿æ–¹æ¡ˆè®¾è®¡é˜¶æ®µåšçš„äº‹â€æƒ…ã€‚

### CoT æ€ç»´é“¾

CoTï¼ˆChain ofï»¿ Thoughtï¼‰æ€ç»´é“¾æ˜¯ä¸€ç§è®© AI åƒäººç±»ä¸€â€‹æ · â€œæ€è€ƒâ€ çš„æŠ€æœ¯ï¼Œå¸®åŠ© AI åœ¨å¤„ç†å¤æ‚é—®é¢˜â€æ—¶èƒ½å¤ŸæŒ‰æ­¥éª¤æ€è€ƒã€‚å¯¹äºå¤æ‚çš„æ¨ç†ç±»é—®é¢˜ï¼Œå…ˆæ€è€ƒåï»¿æ‰§è¡Œï¼Œæ•ˆæœå¾€å¾€æ›´å¥½ã€‚è€Œä¸”è¿˜å¯ä»¥è®©æ¨¡å‹åœ¨ç”Ÿæˆç­”æ¡ˆæ—¶â€å±•ç¤ºæ¨ç†è¿‡ç¨‹ï¼Œä¾¿äºæˆ‘ä»¬ç†è§£å’Œä¼˜åŒ– AIã€‚

CoT çš„å®ç°æ–¹å¼å…¶å®å¾ˆç®€å•ï»¿ï¼Œå¯ä»¥åœ¨è¾“å…¥ Prompt æ—¶ï¼Œç»™æ¨¡å‹æä¾›é¢å¤–çš„æç¤ºæˆ–â€‹å¼•å¯¼ï¼Œæ¯”å¦‚ â€œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ€è€ƒè¿™ä¸ªé—®é¢˜â€ï¼Œè®©æ¨¡å‹ä»¥é€â€æ­¥æ¨ç†çš„æ–¹å¼ç”Ÿæˆå›ç­”ã€‚è¿˜å¯ä»¥è¿ç”¨ Prompt çš„ä¼˜åŒ–ï»¿æŠ€å·§ few shotï¼Œç»™æ¨¡å‹æä¾›åŒ…å«æ€ç»´é“¾çš„ç¤ºä¾‹é—®é¢˜â€å’Œç­”æ¡ˆï¼Œè®©æ¨¡å‹å­¦ä¹ å¦‚ä½•æ„å»ºè‡ªå·±çš„æ€ç»´é“¾ã€‚

åœ¨ Opeï»¿nManus æ—©æœŸâ€‹ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å®â€ç° CoT çš„ç³»ç»Ÿï»¿æç¤ºè¯ï¼š

```plain
You are an assistant focused on Chain of Thought reasoning. For each question, please follow these steps:

1. Break down the problem: Divide complex problems into smaller, more manageable parts
2. Think step by step: Think through each part in detail, showing your reasoning process
3. Synthesize conclusions: Integrate the thinking from each part into a complete solution
4. Provide an answer: Give a final concise answer

Your response should follow this format:
Thinking: [Detailed thought process, including problem decomposition, reasoning for each step, and analysis]
Answer: [Final answer based on the thought process, clear and concise]

Remember, the thinking process is more important than the final answer, as it demonstrates how you reached your conclusion.
```

æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/OwfJBsuhxeS0lpGn.webp" alt="" width="100%" />

### Agent Loop æ‰§è¡Œå¾ªç¯

Agentï»¿ Loop æ˜¯æ™ºèƒ½ä½“â€‹æœ€æ ¸å¿ƒçš„å·¥ä½œæœºåˆ¶ï¼ŒæŒ‡â€æ™ºèƒ½ä½“åœ¨æ²¡æœ‰ç”¨æˆ·è¾“å…¥ï»¿çš„æƒ…å†µä¸‹ï¼Œè‡ªä¸»é‡å¤æ‰§â€è¡Œæ¨ç†å’Œå·¥å…·è°ƒç”¨çš„è¿‡ç¨‹ã€‚

åœ¨ä¼ ç»Ÿçš„èŠå¤©æ¨¡å‹ä¸­ï¼Œï»¿æ¯æ¬¡ç”¨æˆ·æé—®åï¼ŒAI å›å¤ä¸€æ¬¡å°±ç»“æŸâ€‹äº†ã€‚ä½†åœ¨æ™ºèƒ½ä½“ä¸­ï¼ŒAI å›å¤åå¯èƒ½ä¼šç»§ç»­è‡ªä¸»â€æ‰§è¡Œåç»­åŠ¨ä½œï¼ˆå¦‚è°ƒç”¨å·¥å…·ã€å¤„ç†ç»“æœã€ç»§ç»­ï»¿æ¨ç†ï¼‰ï¼Œå½¢æˆä¸€ä¸ªè‡ªä¸»æ‰§è¡Œçš„å¾ªç¯ï¼Œç›´åˆ°ä»»åŠ¡â€å®Œæˆï¼ˆæˆ–è€…è¶…å‡ºé¢„è®¾çš„æœ€å¤§æ­¥éª¤æ•°ï¼‰ã€‚

Agent Loop çš„å®ç°å¾ˆç®€å•ï¼Œå‚è€ƒä»£ç å¦‚ä¸‹ï¼š

```java
public String execute() {
List<String> results = new ArrayList<>();
while (currentStep < MAX_STEPS && !isFinished) {
currentStep++;
// è¿™é‡Œå®ç°å…·ä½“çš„æ­¥éª¤é€»è¾‘
String stepResult = executeStep();
results.add("æ­¥éª¤ " + currentStep + ": " + stepResult);
}
if (currentStep >= MAX_STEPS) {
results.add("è¾¾åˆ°æœ€å¤§æ­¥éª¤æ•°: " + MAX_STEPS);
}
return String.join("\n", results);
}
```

### ReAct æ¨¡å¼

ReActï¼ˆReasoning + Actingï¼‰æ˜¯ä¸€ç§ç»“åˆæ¨ç†å’Œè¡ŒåŠ¨çš„æ™ºèƒ½ä½“æ¶æ„ï¼Œå®ƒæ¨¡ä»¿äººç±»è§£å†³é—®é¢˜æ—¶ â€æ€è€ƒ - è¡ŒåŠ¨ - è§‚å¯Ÿâ€ çš„å¾ªç¯ï¼Œç›®çš„æ˜¯é€šè¿‡äº¤äº’å¼å†³ç­–è§£å†³å¤æ‚ä»»åŠ¡ï¼Œæ˜¯ç›®å‰æœ€å¸¸ç”¨çš„æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼ä¹‹ä¸€ã€‚

æ ¸å¿ƒæ€æƒ³ï¼š

1.  æ¨ç†ï¼ˆReasonï¼‰ï¼šå°†åŸå§‹é—®é¢˜æ‹†åˆ†ä¸ºå¤šæ­¥éª¤ä»»åŠ¡ï¼Œæ˜ç¡®å½“å‰è¦æ‰§è¡Œçš„æ­¥éª¤ï¼Œæ¯”å¦‚ â€œç¬¬ä¸€æ­¥éœ€è¦æ‰“å¼€ç¼–ç¨‹å¯¼èˆªç½‘ç«™â€ã€‚

2.  è¡ŒåŠ¨ï¼ˆActï¼‰ï¼šè°ƒç”¨å¤–éƒ¨å·¥å…·æ‰§è¡ŒåŠ¨ä½œï¼Œæ¯”å¦‚è°ƒç”¨æœç´¢å¼•æ“ã€æ‰“å¼€æµè§ˆå™¨è®¿é—®ç½‘é¡µç­‰ã€‚

3.  è§‚å¯Ÿï¼ˆObserveï¼‰ï¼šè·å–å·¥å…·è¿”å›çš„ç»“æœï¼Œåé¦ˆç»™æ™ºèƒ½ä½“è¿›è¡Œä¸‹ä¸€æ­¥å†³ç­–ã€‚æ¯”å¦‚å°†æ‰“å¼€çš„ç½‘é¡µä»£ç è¾“å…¥ç»™ AIã€‚

4.  å¾ªç¯è¿­ä»£ï¼šä¸æ–­é‡å¤ä¸Šè¿° 3 ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆæˆ–è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ã€‚


ReAct æµç¨‹å¦‚å›¾ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/O3HENqP1oTHADdfh.webp" alt="" width="100%" />


ç¤ºä¾‹å®ç°ä»£ç ï¼š

```java
void executeReAct(String task) {
String state = "å¼€å§‹";

while (!state.equals("å®Œæˆ")) {
// 1. æ¨ç† (Reason)
String thought = "æ€è€ƒä¸‹ä¸€æ­¥è¡ŒåŠ¨";
System.out.println("æ¨ç†: " + thought);

// 2. è¡ŒåŠ¨ (Act)
String action = "æ‰§è¡Œå…·ä½“æ“ä½œ";
System.out.println("è¡ŒåŠ¨: " + action);

// 3. è§‚å¯Ÿ (Observe)
String observation = "è§‚å¯Ÿæ‰§è¡Œç»“æœ";
System.out.println("è§‚å¯Ÿ: " + observation);

// æ›´æ–°çŠ¶æ€
state = "å®Œæˆ";
}
}
```

### æ‰€éœ€æ”¯æŒç³»ç»Ÿ

é™¤äº†åŸºæœ¬çš„å·¥ä½œæœºåˆ¶å¤–ï¼Œæ™ºèƒ½ä½“çš„å®ç°è¿˜ä¾èµ–äºå¾ˆå¤šæ”¯æŒç³»ç»Ÿã€‚

1ï¼‰é¦–å…ˆæ˜¯ ï»¿AI å¤§æ¨¡å‹ï¼Œè¿™ä¸ªå°±ä¸â€‹å¤šè¯´äº†ï¼Œå¤§æ¨¡å‹æä¾›äº†æ€â€è€ƒã€æ¨ç†å’Œå†³ç­–çš„æ ¸å¿ƒèƒ½ï»¿åŠ›ï¼Œè¶Šå¼ºçš„ AI å¤§æ¨¡â€å‹é€šå¸¸æ‰§è¡Œä»»åŠ¡çš„æ•ˆæœè¶Šå¥½ã€‚

2ï¼‰è®°å¿†ç³»ç»Ÿ

æ™ºèƒ½ä½“éœ€è¦è®°å¿†ç³»ç»Ÿï»¿æ¥å­˜å‚¨å¯¹è¯å†å²ã€ä¸­é—´ç»“æœå’Œæ‰§è¡ŒçŠ¶æ€ï¼Œâ€‹è¿™æ ·å®ƒæ‰èƒ½å¤Ÿè¿›è¡Œè¿ç»­å¯¹è¯å¹¶æ ¹æ®å†å²å¯¹â€è¯åˆ†ææ¥ä¸‹æ¥çš„å·¥ä½œæ­¥éª¤ã€‚ä¹‹å‰æˆ‘ä»¬å­¦ä¹ ï»¿è¿‡å¦‚ä½•ä½¿ç”¨ Spring AI çš„ â€ChatMemory å®ç°å¯¹è¯è®°å¿†ã€‚

3ï¼‰çŸ¥è¯†åº“

å°½ç®¡å¤§è¯­è¨€æ¨¡å‹æ‹¥æœ‰ï»¿ä¸°å¯Œçš„å‚æ•°çŸ¥è¯†ï¼Œä½†é’ˆå¯¹ç‰¹å®šé¢†åŸŸçš„ä¸“â€‹ä¸šçŸ¥è¯†å¾€å¾€éœ€è¦é¢å¤–çš„çŸ¥è¯†åº“æ”¯æŒã€‚ä¹‹â€å‰æˆ‘ä»¬å­¦ä¹ è¿‡ï¼Œé€šè¿‡ RAG æ£€ç´¢å¢ï»¿å¼ºç”Ÿæˆ + å‘é‡æ•°æ®åº“ç­‰æŠ€æœ¯ï¼Œæ™ºèƒ½â€ä½“å¯ä»¥æ£€ç´¢å¹¶åˆ©ç”¨ä¸“ä¸šçŸ¥è¯†å›ç­”é—®é¢˜ã€‚

4ï¼‰å·¥å…·è°ƒç”¨

å·¥å…·æ˜¯æ‰©å±•æ™ºèƒ½ä½“ï»¿èƒ½åŠ›è¾¹ç•Œçš„å…³é”®ï¼Œæ™ºèƒ½ä½“é€šè¿‡å·¥å…·è°ƒâ€‹ç”¨å¯ä»¥è®¿é—®æœç´¢å¼•æ“ã€æ•°æ®åº“ã€APâ€I æ¥å£ç­‰å¤–éƒ¨æœåŠ¡ï¼Œæå¤§åœ°å¢å¼ºäº†ï»¿å…¶è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ã€‚å½“ç„¶ï¼ŒMCâ€P ä¹Ÿå¯ä»¥ç®—æ˜¯å·¥å…·è°ƒç”¨çš„ä¸€ç§ã€‚

ğŸ’¡ è¿™é‡Œåˆ†äº«ä¸€ç§ç‰¹ï»¿æ®Šçš„å·¥å…·è°ƒç”¨ â€”â€” Compute Uâ€‹seï¼Œå®ƒå…è®¸æ™ºèƒ½ä½“ç›´æ¥ä¸è®¡ç®—ç¯å¢ƒäº¤äº’ï¼Œâ€æ¯”å¦‚æ‰§è¡Œä»£ç ã€æ“ä½œæ–‡ä»¶ç³»ç»Ÿç­‰ã€‚ç›®å‰ Cï»¿laude ç­‰å¹³å°å·²æä¾›æ­¤ç±»èƒ½åŠ›ï¼Œæ„Ÿå…´â€è¶£çš„åŒå­¦å¯ä»¥é˜…è¯»ä¸‹é¢çš„èµ„æ–™å­¦ä¹ ï¼š

*   Claude æ”¯æŒ Compute Useï¼š[https://docs.anthropic.com/en/docs/agents-and-tools/computer-use](https://docs.anthropic.com/en/docs/agents-and-tools/computer-use)

*   Compute Use å®ç°ç¤ºä¾‹ï¼š[https://github.com/anthropics/anthropic-quickstarts/tree/main/computer-use-demo](https://github.com/anthropics/anthropic-quickstarts/tree/main/computer-use-demo)

*   Compute Use å¼€æºå®ç°ï¼š[https://github.com/e2b-dev/open-computer-use](https://github.com/e2b-dev/open-computer-use)ã€[https://github.com/showlab/computer_use_ootb](https://github.com/showlab/computer_use_ootb)


ä½¿ç”¨ Comï»¿pute Use åŠŸèƒ½â€‹æ—¶éœ€è¦æ³¨æ„ï¼Œè¿™äº›æ“ä½œä¼šâ€åœ¨æˆ‘ä»¬è‡ªå·±çš„ç³»ç»Ÿä¸Šæ‰§è¡Œï»¿ï¼Œå»ºè®®åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œâ€ï¼Œé˜²æ­¢æ„å¤–æ“ä½œå½±å“å®é™…ç³»ç»Ÿã€‚

ç»¼åˆä¸Šé¢ 4 ç±»ï»¿æŠ€æœ¯ï¼Œå¹¶ä¸”ç»“åˆ CoTã€Agenâ€‹t Loopã€ReAct ç­‰æœºåˆ¶â€ï¼ˆå¯ä»¥æ€»ç§°ä¸º â€œè§„åˆ’æ‰§è¡Œæœºåˆ¶â€ï¼‰ï»¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„å»ºä¸€ä¸ªå®Œæ•´çš„ã€æœ‰è‡ªâ€ä¸»è§„åˆ’èƒ½åŠ›çš„æ™ºèƒ½ä½“ç³»ç»Ÿå•¦ã€‚

ä¸‰ã€ä½¿ç”¨ AI æ™ºèƒ½ä½“
-----------

æœ‰ 3 ç§ï»¿æ–¹å¼å¯ä»¥ä½¿ç”¨ AIâ€‹ æ™ºèƒ½ä½“ï¼Œä¹‹å‰çš„æ•™â€ç¨‹ä¸­å…¶å®æˆ‘ä»¬å·²ç»æœ‰ï»¿æ¥è§¦è¿‡ï¼Œè¿™é‡Œå†å¿«é€Ÿâ€å¤ä¹ ä¸€éã€‚

### 1ã€å¹³å°ä¸­ä½¿ç”¨

è®¸å¤š AIï»¿ å¤§æ¨¡å‹å¼€å‘å¹³å°å·²â€‹ç»æä¾›äº†æ™ºèƒ½ä½“åˆ›å»ºâ€å’Œä½¿ç”¨åŠŸèƒ½ï¼Œæœ€ç®€å•ï»¿çš„æ–¹å¼å°±æ˜¯ç›´æ¥åœ¨è¿™â€äº›å¹³å°ä¸Šåˆ›å»ºå’Œä½¿ç”¨æ™ºèƒ½ä½“ã€‚

æ¯”å¦‚å¯ä»¥åœ¨é˜¿é‡Œäº‘ç™¾ç‚¼ã€Dify ç­‰å¹³å°ä¸Šåˆ›å»ºæ™ºèƒ½ä½“ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/eVX2nDW1aUI74G2v.webp" alt="" width="100%" />


### 2ã€è½¯ä»¶ä¸­ä½¿ç”¨

AI å¼€å‘å·¥å…· Cï»¿ursor å°±é›†æˆäº† AI æ™ºèƒ½ä½“â€‹ï¼Œå¯ä»¥å¸®æˆ‘ä»¬ç”Ÿæˆå®Œæ•´çš„é¡¹ç›®ä»£ç ã€æˆ–â€è€…è§£é‡Šé¡¹ç›®ä»£ç ã€‚é€‰æ‹© Agent ï»¿æ¨¡å¼å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ï¼Œå»ºè®®åŒæ—¶å¼€å¯â€ Thinking æ·±åº¦æ€è€ƒï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/iHP7hQ1srk3SsZ6v.webp" alt="" width="100%" />


è¿è¡Œæ•ˆæœå¦‚å›¾ï¼Œå…¸å‹çš„ CoT + Agent Loop + ReAct æ¨¡å¼ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/xrBhm5QvH506DPSq.webp" alt="" width="100%" />


### 3ã€ç¨‹åºä¸­ä½¿ç”¨

ä¹‹å‰æœ‰è®²è§£è¿‡ï»¿ï¼Œå¦‚æœä½¿ç”¨ AI å¤§æ¨¡â€‹å‹å¼€å‘å¹³å°åˆ›å»ºäº†æ™ºèƒ½ä½“â€ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥é€šè¿‡ Sï»¿DK æˆ– API åœ¨è‡ªâ€å·±çš„ç¨‹åºä¸­è°ƒç”¨æ™ºèƒ½ä½“ã€‚

å½“ç„¶ä¹Ÿå¯ä»¥å®Œå…¨é€šï»¿è¿‡ç¼–ç¨‹è‡ªä¸»å¼€å‘æ™ºèƒ½ä½“ï¼Œä¹‹å‰æˆ‘ä»¬â€‹é€šè¿‡ Spring AI åˆ›å»ºâ€çš„æ‹çˆ±å¤§å¸ˆ APP å°±å·²ç»æ˜¯ä¸ªï»¿æ™ºèƒ½ä½“äº†ï¼ŒåŒ…å«äº†å¤§æ¨¡å‹å†³ç­–ã€è®°â€å¿†èƒ½åŠ›ã€çŸ¥è¯†åº“é›†æˆå’Œå·¥å…·è°ƒç”¨ã€‚

```java
ChatResponse response = chatClient
.prompt()
.user(message)
// è®°å¿†
.advisors(spec -> spec.param(CHAT_MEMORY_CONVERSATION_ID_KEY, chatId)
.param(CHAT_MEMORY_RETRIEVE_SIZE_KEY, 10))
// å¼€å¯æ—¥å¿—ï¼Œä¾¿äºè§‚å¯Ÿæ•ˆæœ
.advisors(new MyLoggerAdvisor())
// çŸ¥è¯†åº“
.advisors(new QuestionAnswerAdvisor(loveAppVectorStore))
// å·¥å…·è°ƒç”¨
.tools(toolCallbackProvider)
.call()
.chatResponse();
```

ä½†æ˜¯ï¼Œè¿™ä¸ªï»¿å®ç°è¿˜ä¸å…·å¤‡å®Œæ•´çš„â€‹è‡ªä¸»è§„åˆ’å’Œæ‰§è¡Œèƒ½åŠ›â€ï¼Œä¸‹é¢æˆ‘ä»¬å°†å­¦ä¹ æ›´ï»¿é«˜çº§çš„è‡ªä¸»è§„åˆ’æ™ºâ€èƒ½ä½“æ¶æ„ã€‚

å››ã€OpenManus å®ç°åŸç†
----------------

åœ¨æˆ‘ä»¬å¼€å‘è¶…çº§æ™ºèƒ½ä½“å‰ï¼Œå¯ä»¥å…ˆå­¦ä¹ ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ã€‚ä¸‹é¢ä»¥ [OpenManus é¡¹ç›®](https://github.com/FoundationAgents/OpenManus) ä¸ºä¾‹ï¼Œé±¼çš®ä¼šå¸¦å¤§å®¶ä» 0 å¼€å§‹é˜…è¯»é¡¹ç›®æºç ï¼Œå­¦åˆ°è¶…çº§æ™ºèƒ½ä½“å®ç°æ–¹å¼çš„åŒæ—¶ï¼Œå¸®åŠ©å¤§å®¶æŒæ¡å¿«é€Ÿå­¦ä¹ å¼€æºé¡¹ç›®çš„æ–¹æ³•ã€‚

ğŸ’¡ å‹æƒ…æç¤ºï¼Œé±¼ï»¿çš®å¸¦å¤§å®¶åˆ†æçš„æºç æ˜¯ 2025 å¹´ â€‹5 æœˆ 16 æ—¥çš„ï¼Œåç»­æºç å¯èƒ½ä¼šæŒâ€ç»­æ›´æ–°ï¼Œé‡ç‚¹åœ¨äºå­¦ä¹ åˆ†ææºç çš„å¥—è·¯ã€‚ï»¿â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€

### å¿«é€Ÿè¿è¡Œ

å­¦ä¹ å¼€æºé¡¹ç›®çš„ç¬¬ä¸€æ­¥æ˜¯é˜…è¯»å®˜æ–¹æä¾›çš„ `README.md` é¡¹ç›®ä»‹ç»æ–‡æ¡£ï¼Œå…ˆæŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œå€Ÿæ­¤ç†Ÿæ‚‰ä¸šåŠ¡æµç¨‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±å•ƒæºç ã€‚

OpenMï»¿anus å®˜æ–¹æä¾›â€‹äº†ä¸€ä¸ª Demo â€è§†é¢‘ï¼Œæˆ‘ä»¬å°±ä¸å¿…å†ï»¿è‡ªå·±æ­å»ºç¯å¢ƒæ¥è·‘é¡¹â€ç›®äº†ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/g5CIwuNVSFKPvYO9.webp" alt="" width="100%" />


ä¸‹é¢è®©æˆ‘ä»¬çœ‹ä¸€ï»¿ä¸ª OpenManus çš„â€‹å¯¹è¯ç¤ºä¾‹ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£å®ƒçš„å·¥ä½œâ€æµç¨‹ã€‚å‡è®¾ç”¨æˆ·è¦å®Œæˆä¸€ï»¿ä¸ªä»»åŠ¡ â€”â€” åœ¨ç¼–ç¨‹å¯¼èˆªç½‘â€ç«™ä¸Šå¯»æ‰¾çƒ­é—¨æ–‡ç« ï¼Œå¯¹è¯å¦‚ä¸‹ï¼š

```plain
ç”¨æˆ·ï¼šå¸®æˆ‘åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™ä¸Šæ‰¾åˆ°æœ€è¿‘çš„å‡ ç¯‡çƒ­é—¨æ–‡ç« 

ç³»ç»Ÿï¼šOpenManus å·²å¯åŠ¨ï¼Œæ­£åœ¨å¤„ç†æ‚¨çš„è¯·æ±‚...

åŠ©æ‰‹ï¼šæˆ‘ä¼šå¸®æ‚¨åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™æŸ¥æ‰¾æœ€è¿‘çš„çƒ­é—¨æ–‡ç« ã€‚è®©æˆ‘å…ˆç”¨æµè§ˆå™¨å·¥å…·è®¿é—®ç¼–ç¨‹å¯¼èˆªç½‘ç«™ã€‚

ç³»ç»Ÿï¼šæ­£åœ¨è°ƒç”¨æµè§ˆå™¨å·¥å…·...

åŠ©æ‰‹ï¼šæˆ‘æˆåŠŸæ‰“å¼€äº†æµè§ˆå™¨å¹¶è®¿é—®äº†ç¼–ç¨‹å¯¼èˆªç½‘ç«™ã€‚ä»ç½‘ç«™å†…å®¹æ¥çœ‹ï¼Œæˆ‘ç°åœ¨éœ€è¦å¯¼èˆªåˆ°çƒ­é—¨æ–‡ç« åŒºåŸŸï¼Œç„¶åæå–è¿™äº›æ–‡ç« çš„ä¿¡æ¯ã€‚

ç³»ç»Ÿï¼šæ­£åœ¨æ‰§è¡Œæµè§ˆå™¨æ“ä½œ...

åŠ©æ‰‹ï¼šæˆ‘å·²åœ¨ç¼–ç¨‹å¯¼èˆªç½‘ç«™æ‰¾åˆ°äº†çƒ­é—¨æ–‡ç« åŒºåŸŸï¼Œä»¥ä¸‹æ˜¯æœ€è¿‘çš„å‡ ç¯‡çƒ­é—¨æ–‡ç« ï¼š

1. ã€ŠSpring Boot å®æˆ˜ï¼šæ„å»ºå¾®æœåŠ¡åº”ç”¨ã€‹- é˜…è¯»é‡ï¼š3200
2. ã€Šå‰ç«¯æ¡†æ¶å¯¹æ¯”ï¼šReact vs Vue vs Angularã€‹- é˜…è¯»é‡ï¼š2850
3. ã€ŠPython æ•°æ®åˆ†æå…¥é—¨ï¼šä» Pandas åˆ°å¯è§†åŒ–ã€‹- é˜…è¯»é‡ï¼š2400
4. ã€ŠDocker å®¹å™¨åŒ–åº”ç”¨éƒ¨ç½²æœ€ä½³å®è·µã€‹- é˜…è¯»é‡ï¼š2150
5. ã€Šç®—æ³•å­¦ä¹ è·¯çº¿ï¼šä»å…¥é—¨åˆ°ç²¾é€šã€‹- é˜…è¯»é‡ï¼š1980

è¿™äº›æ–‡ç« æ˜¯æ ¹æ®ç½‘ç«™æ˜¾ç¤ºçš„é˜…è¯»é‡æ’åºçš„çƒ­é—¨æ–‡ç« ã€‚

ç³»ç»Ÿï¼šæ­£åœ¨è°ƒç”¨ç»ˆæ­¢å·¥å…·...

åŠ©æ‰‹ï¼šå·²å®Œæˆä»»åŠ¡ï¼ŒæˆåŠŸæ‰¾åˆ°ç¼–ç¨‹å¯¼èˆªç½‘ç«™ä¸Šçš„çƒ­é—¨æ–‡ç« ã€‚å¦‚æœæ‚¨å¯¹æŸç¯‡æ–‡ç« æ„Ÿå…´è¶£æˆ–æœ‰å…¶ä»–éœ€æ±‚ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒOpenMaï»¿nus é¦–å…ˆç†è§£ç”¨æˆ·ä»»åŠ¡ï¼Œç„¶åé€‰æ‹©åˆé€‚çš„å·¥å…·ï¼ˆæµè§ˆâ€‹å™¨å·¥å…·ï¼‰æ¥æ‰§è¡Œä»»åŠ¡ï¼Œæœ€åæ•´ç†ä¿¡æ¯å¹¶è¿”å›ç»“æœã€‚æ•´ä¸ªè¿‡â€ç¨‹ä½“ç°äº† ReAct æ¨¡å¼çš„æ ¸å¿ƒè¦ç´ ï¼šæ€è€ƒï¼ˆThiï»¿nkingï¼‰ã€è¡ŒåŠ¨ï¼ˆActionï¼‰å’Œè§‚å¯Ÿï¼ˆObseâ€rvationï¼‰çš„å¾ªç¯ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚

### OpenManus æ•´ä½“æ¶æ„

äº†è§£äº† OpenManus çš„æ ¸å¿ƒåŠŸèƒ½åï¼Œå…ˆ **ä»æ•´ä½“åˆ°å±€éƒ¨** åœ°è§‚å¯Ÿ OpenManus çš„æ¶æ„ï¼Œç®€å•æ¥è¯´å°±æ˜¯çœ‹æ–‡ä»¶å¤¹çš„ç»„ç»‡å½¢å¼ã€æ–‡ä»¶çš„å‘½åè§„åˆ™ã€ä»¥åŠæ–‡ä»¶ä¹‹é—´çš„å…³è”ï¼Œæš‚æ—¶ä¸ç”¨æ·±å…¥æºç ã€‚

#### 1ã€æ•´ä½“æ–‡ä»¶å¤¹ç»„ç»‡å½¢å¼

å…ˆçœ‹æ–‡ä»¶å¤¹çš„ç»„ç»‡å½¢å¼ï¼Œè§åçŸ¥æ„ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/I0SZRLE7IGEc8LI7.webp" alt="" width="100%" />


#### 2ã€agent ç›®å½•

agent ï»¿ç›®å½•æ˜¯ OpenManâ€‹us å®ç°çš„æ ¸å¿ƒï¼Œé‡‡ç”¨â€äº†åˆ†å±‚çš„ä»£ç†æ¶æ„ï¼Œä¸åŒï»¿å±‚æ¬¡çš„ä»£ç†è´Ÿè´£ä¸åŒçš„åŠŸâ€èƒ½ï¼Œè¿™æ ·æ›´åˆ©äºç³»ç»Ÿçš„æ‰©å±•ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/zVLgJbCNr74HZ60U.webp" alt="" width="100%" />


OpenManus çš„ä»£ç†æ¶æ„ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ å±‚ï¼š

*   BaseAgentï¼šæœ€åŸºç¡€çš„ä»£ç†æŠ½è±¡ç±»ï¼Œå®šä¹‰äº†æ‰€æœ‰ä»£ç†çš„åŸºæœ¬çŠ¶æ€ç®¡ç†å’Œæ‰§è¡Œå¾ªç¯

*   ReActAgentï¼šå®ç° ReAct æ¨¡å¼çš„ä»£ç†ï¼Œå…·æœ‰æ€è€ƒï¼ˆThinkï¼‰å’Œè¡ŒåŠ¨ï¼ˆActï¼‰ä¸¤ä¸ªä¸»è¦æ­¥éª¤

*   ToolCallAgentï¼šèƒ½å¤Ÿè°ƒç”¨å·¥å…·çš„ä»£ç†ï¼Œç»§æ‰¿è‡ª ReActAgent å¹¶æ‰©å±•äº†å·¥å…·è°ƒç”¨èƒ½åŠ›

*   Manusï¼šå…·ä½“å®ç°çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œé›†æˆäº†æ‰€æœ‰èƒ½åŠ›å¹¶æ·»åŠ äº†æ›´å¤šä¸“ä¸šå·¥å…·


è¿˜æœ‰æ›´å¤šé€‚ç”¨äºç‰¹å®šé¢†åŸŸï»¿çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œæ¯”å¦‚ DataAnalysisâ€‹ æ•°æ®åˆ†æ Agentã€SWE è½¯ä»¶å¼€å‘å·¥ç¨‹â€å¸ˆ Agentã€MCP æœåŠ¡äº¤äº’ Agentï»¿ã€Browser æµè§ˆå™¨æ“ä½œ Agentï¼Œå®ƒâ€ä»¬éƒ½ç»§æ‰¿äº† ToolCallAgentã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/jLGa0c6lwYRhlaHu.webp" alt="" width="100%" />

#### 3ã€tool ç›®å½•

tool ï»¿ç›®å½•å®šä¹‰äº†å„ç§å„æ ·â€‹çš„å·¥å…·ï¼Œæ¯”å¦‚ç½‘é¡µæœâ€ç´¢ã€æ–‡ä»¶æ“ä½œã€è¯¢æ±‚ï»¿ç”¨æˆ·å¸®åŠ©ã€ä»£ç æ‰§è¡Œâ€å™¨ç­‰ç­‰ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/4Y4PYQA96JFmb7SG.webp" alt="" width="100%" />


#### 4ã€prompt ç›®å½•

prompï»¿t ç›®å½•å®šä¹‰äº†æ•´ä¸ªé¡¹â€‹ç›®ä¸­å¯èƒ½ä¼šç”¨åˆ°çš„æâ€ç¤ºè¯ã€‚ä»ä¸‹å›¾ä¸­æˆ‘ä»¬å¯ä»¥ï»¿çœ‹åˆ°æç¤ºè¯å†™çš„æ¯”è¾ƒä¸“â€ä¸šï¼Œè¿™å—ä¹Ÿæ˜¯æ¯”è¾ƒå€¼å¾—å­¦ä¹ çš„ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/mSVVhH5RubGj1OdW.webp" alt="" width="100%" />


#### 5ã€å…¶ä»–æ”¯æŒ

ä¸ºäº†å®ç°å®Œï»¿æ•´çš„æ™ºèƒ½ä½“åŠŸèƒ½ï¼ŒOâ€‹penManus â€ä¾èµ–ä»¥ä¸‹å…³é”®ç»„ä»¶ï¼š

*   è®°å¿†ç³»ç»Ÿï¼šä½¿ç”¨ Memory ç±»å­˜å‚¨å¯¹è¯å†å²å’Œä¸­é—´çŠ¶æ€

*   LLM å¤§æ¨¡å‹ï¼šé€šè¿‡ LLM ç±»æä¾›æ€è€ƒå’Œå†³ç­–èƒ½åŠ›

*   å·¥å…·ç³»ç»Ÿï¼šæä¾› BaseTool å’Œ ToolCollection ç±»æ‰©å±•æ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¹ç•Œ

*   æµç¨‹æ§åˆ¶ï¼šé€šè¿‡ AgentState å’Œæ‰§è¡Œå¾ªç¯ç®¡ç†çŠ¶æ€è½¬æ¢å’Œä»»åŠ¡æµç¨‹


åœ¨ OpenManus ä¸­ï¼Œè¿™äº›éƒ½æ˜¯è‡ªä¸»å®ç°çš„ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/fAl9ADVfbzUlroaN.webp" alt="" width="100%" />


### AI æ™ºèƒ½ä½“æ ¸å¿ƒå®ç°

äº†è§£æ•´ä½“æ¶æ„åï¼Œæˆ‘ä»¬é‡ç‚¹å­¦ä¹  Agent åˆ†å±‚ä»£ç†æ¶æ„ã€‚

#### 1ã€BaseAgent

BaseAgent æ˜¯æ‰€æœ‰ä»£ç†çš„åŸºç¡€ï¼Œå®šä¹‰äº†ä»£ç†çŠ¶æ€ç®¡ç†å’Œæ‰§è¡Œå¾ªç¯çš„æ ¸å¿ƒé€»è¾‘ã€‚æŸ¥çœ‹ `base.py` æ–‡ä»¶ï¼Œå…³é”®ä»£ç å°±æ˜¯ Agent Loop çš„å®ç°ï¼Œé€šè¿‡ while å®ç°å¾ªç¯ï¼Œå¹¶ä¸”å®šä¹‰äº†æ­»å¾ªç¯æ£€æŸ¥æœºåˆ¶ï¼š

```python
class BaseAgent(BaseModel, ABC):
async def run(self, request: Optional[str] = None) -> str:
"""æ‰§è¡Œä»£ç†çš„ä¸»å¾ªç¯"""
if self.state != AgentState.IDLE:
raise RuntimeError(f"Cannot run agent from state: {self.state}")

if request:
self.update_memory("user", request)

results: List[str] = []
async with self.state_context(AgentState.RUNNING):
while (self.current_step < self.max_steps and
self.state != AgentState.FINISHED):
self.current_step += 1
step_result = await self.step()

# æ£€æŸ¥æ˜¯å¦é™·å…¥å¾ªç¯
if self.is_stuck():
self.handle_stuck_state()

results.append(f"Step {self.current_step}: {step_result}")

if self.current_step >= self.max_steps:
self.current_step = 0
self.state = AgentState.IDLE
results.append(f"Terminated: Reached max steps ({self.max_steps})")

return "\n".join(results) if results else "No steps executed"

@abstractmethod
async def step(self) -> str:
"""æ‰§è¡Œå•æ­¥æ“ä½œï¼Œå¿…é¡»ç”±å­ç±»å®ç°"""
```

è¿™é‡Œå…¶å®ä½¿ï»¿ç”¨äº†æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡â€‹å¼ï¼Œçˆ¶ç±»å®šä¹‰æ‰§è¡Œæµâ€ç¨‹ï¼Œå…·ä½“çš„æ‰§è¡Œæ–¹æ³•ï»¿ï¼ˆstepï¼‰äº¤ç»™â€å­ç±»å®ç°ã€‚

#### 2ã€ReActAgent

ReActAgent å®ç°äº† ReAct æ¨¡å¼ï¼Œå°†ä»£ç†çš„æ‰§è¡Œè¿‡ç¨‹åˆ†ä¸ºæ€è€ƒï¼ˆThinkï¼‰å’Œè¡ŒåŠ¨ï¼ˆActï¼‰ä¸¤ä¸ªå…³é”®æ­¥éª¤ã€‚æŸ¥çœ‹ `react.py` æ–‡ä»¶ï¼š

```python
class ReActAgent(BaseAgent, ABC):
@abstractmethod
async def think(self) -> bool:
"""å¤„ç†å½“å‰çŠ¶æ€å¹¶å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""

@abstractmethod
async def act(self) -> str:
"""æ‰§è¡Œå†³å®šçš„è¡ŒåŠ¨"""

async def step(self) -> str:
"""æ‰§è¡Œå•æ­¥ï¼šæ€è€ƒå’Œè¡ŒåŠ¨"""
should_act = await self.think()
if not should_act:
return "Thinking complete - no action needed"
return await self.act()
```

ä¸Šè¿°ä»£ç åŒæ ·è¿ç”¨ï»¿äº†æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ï¼Œè¿™ç§è®¾è®¡ä½“ç°â€‹äº† ReAct æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³ï¼Œâ€ä¹Ÿå°±æ˜¯ â€œæ€è€ƒ - è¡ŒåŠ¨ - è§‚ï»¿å¯Ÿâ€ çš„å¾ªç¯è¿‡ç¨‹ã€‚ä½†æ˜¯å…·ä½“æ€ä¹ˆæ€â€è€ƒã€æ€ä¹ˆè¡ŒåŠ¨ï¼Œäº¤ç»™å­ç±»å»å®ç°ã€‚

#### 3ã€ToolCallAgent

ToolCallAgent åœ¨ ReAct æ¨¡å¼çš„åŸºç¡€ä¸Šå¢åŠ äº†å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œæ˜¯ OpenManus æœ€é‡è¦çš„ä¸€ä¸ªå±‚æ¬¡ã€‚æŸ¥çœ‹ `toolcall.py` æ–‡ä»¶ï¼Œè™½ç„¶ä»£ç æ¯”è¾ƒå¤æ‚ï¼Œä½†åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯å·¥å…·è°ƒç”¨æœºåˆ¶çš„å…·ä½“å®ç°ï¼š

1.  thinkï¼šå’Œ AI äº¤äº’æ€è€ƒä½¿ç”¨ä»€ä¹ˆå·¥å…·

2.  actï¼šç¨‹åºæ‰§è¡Œå·¥å…·

3.  observeï¼šå°†ç»“æœè¿”å›ç»™ AI


```python
class ToolCallAgent(ReActAgent):
"""èƒ½å¤Ÿæ‰§è¡Œå·¥å…·è°ƒç”¨çš„ä»£ç†ç±»"""

available_tools: ToolCollection = ToolCollection(
CreateChatCompletion(), Terminate()
)
tool_choices: TOOL_CHOICE_TYPE = ToolChoice.AUTO
special_tool_names: List[str] = Field(default_factory=lambda: [Terminate().name])

async def think(self) -> bool:
"""å¤„ç†å½“å‰çŠ¶æ€å¹¶ä½¿ç”¨å·¥å…·å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""
# æ·»åŠ ä¸‹ä¸€æ­¥æç¤ºåˆ°ç”¨æˆ·æ¶ˆæ¯
if self.next_step_prompt:
user_msg = Message.user_message(self.next_step_prompt)
self.messages += [user_msg]

# è¯·æ±‚ LLM é€‰æ‹©å·¥å…·
response = await self.llm.ask_tool(
messages=self.messages,
system_msgs=([Message.system_message(self.system_prompt)]
if self.system_prompt else None),
tools=self.available_tools.to_params(),
tool_choice=self.tool_choices,
)

# å¤„ç†å·¥å…·è°ƒç”¨
self.tool_calls = tool_calls = (
response.tool_calls if response and response.tool_calls else []
)
content = response.content if response and response.content else ""

# æ·»åŠ åŠ©æ‰‹æ¶ˆæ¯åˆ°è®°å¿†
assistant_msg = (
Message.from_tool_calls(content=content, tool_calls=self.tool_calls)
if self.tool_calls
else Message.assistant_message(content)
)
self.memory.add_message(assistant_msg)

# å†³å®šæ˜¯å¦åº”è¯¥æ‰§è¡Œè¡ŒåŠ¨
return bool(self.tool_calls or content)

async def act(self) -> str:
"""æ‰§è¡Œå·¥å…·è°ƒç”¨å¹¶å¤„ç†ç»“æœ"""
if not self.tool_calls:
# è¿”å›æœ€åä¸€æ¡æ¶ˆæ¯å†…å®¹ï¼Œå¦‚æœæ²¡æœ‰å·¥å…·è°ƒç”¨
return self.messages[-1].content or "No content or commands to execute"

results = []
for command in self.tool_calls:
# æ‰§è¡Œå·¥å…·
result = await self.execute_tool(command)

# è®°å½•å·¥å…·å“åº”åˆ°è®°å¿†
tool_msg = Message.tool_message(
content=result,
tool_call_id=command.id,
name=command.function.name,
base64_image=self._current_base64_image,
)
self.memory.add_message(tool_msg)
results.append(result)

return "\n\n".join(results)
```

#### 4ã€Manus

Manus ç±»æ˜¯ OpenManus çš„æ ¸å¿ƒæ™ºèƒ½ä½“å®ä¾‹ï¼Œé›†æˆäº†å„ç§å·¥å…·å’Œèƒ½åŠ›ã€‚æŸ¥çœ‹ `manus.py` æ–‡ä»¶ï¼š

```python
class Manus(ToolCallAgent):
"""å¤šåŠŸèƒ½é€šç”¨æ™ºèƒ½ä½“ï¼Œæ”¯æŒæœ¬åœ°å’Œ MCP å·¥å…·"""

name: str = "Manus"
description: str = "A versatile agent that can solve various tasks using multiple tools"

# æ·»åŠ å„ç§é€šç”¨å·¥å…·åˆ°å·¥å…·é›†åˆ
available_tools: ToolCollection = Field(
default_factory=lambda: ToolCollection(
PythonExecute(),
BrowserUseTool(),
StrReplaceEditor(),
AskHuman(),
Terminate(),
)
)
```

#### MCP å®¢æˆ·ç«¯ç”¨äºè¿œç¨‹å·¥å…·è®¿é—®
mcp_clients: MCPClients = Field(default_factory=MCPClients)

```
@classmethod
async def create(cls, **kwargs) -> "Manus":
"""å·¥å‚æ–¹æ³•åˆ›å»ºå¹¶åˆå§‹åŒ– Manus å®ä¾‹"""
instance = cls(**kwargs)
await instance.initialize_mcp_servers()
instance._initialized = True
return instance

async def think(self) -> bool:
"""å¤„ç†å½“å‰çŠ¶æ€å¹¶æ ¹æ®ä¸Šä¸‹æ–‡å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨"""
if not self._initialized:
await self.initialize_mcp_servers()
self._initialized = True

# ä¸ºæµè§ˆå™¨å·¥å…·æ·»åŠ ç‰¹æ®Šä¸Šä¸‹æ–‡
original_prompt = self.next_step_prompt
browser_in_use = self._check_browser_in_use()

if browser_in_use:
self.next_step_prompt = (
await self.browser_context_helper.format_next_step_prompt()
)

result = await super().think()

# æ¢å¤åŸå§‹æç¤º
self.next_step_prompt = original_prompt

return result
```


### å…³é”®å®ç°ç»†èŠ‚

å­¦å®Œäº†è¶…çº§ï»¿æ™ºèƒ½ä½“çš„æ ¸å¿ƒå®ç°åâ€‹ï¼Œæˆ‘ä»¬å†å­¦ä¹ ä¸€äº›é¡¹â€ç›®ä¸­æ¯”è¾ƒå¾®å¦™çš„å®ç°ï»¿ç»†èŠ‚ï¼Œå¯¹æˆ‘ä»¬è‡ªå·±å¼€â€å‘é¡¹ç›®ä¹Ÿä¼šå¾ˆæœ‰å¸®åŠ©ã€‚

#### 1ã€å·¥å…·ç³»ç»Ÿè®¾è®¡

1ï¼‰å·¥å…·æŠ½è±¡å±‚ BaseTool

æ‰€æœ‰å·¥å…·å‡ç»§æ‰¿è‡ª `BaseTool` æŠ½è±¡åŸºç±»ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£å’Œè¡Œä¸ºï¼š

```python
class BaseTool(ABC, BaseModel):
name: str
description: str
parameters: Optional[dict] = None

async def __call__(self, **kwargs) -> Any:
"""ä½¿ç”¨ç»™å®šå‚æ•°æ‰§è¡Œå·¥å…·"""
return await self.execute(**kwargs)

@abstractmethod
async def execute(self, **kwargs) -> Any:
"""æ‰§è¡Œå·¥å…·çš„å…·ä½“é€»è¾‘ï¼Œç”±å­ç±»å®ç°"""

def to_param(self) -> Dict:
"""å°†å·¥å…·è½¬æ¢ä¸ºå‡½æ•°è°ƒç”¨æ ¼å¼"""
return {
"type": "function",
"function": {
"name": self.name,
"description": self.description,
"parameters": self.parameters,
},
}
```

è¿™ç§è®¾è®¡ä½¿ï»¿å¾—æ¯ä¸ªå·¥å…·éƒ½æœ‰ç»Ÿä¸€â€‹çš„è°ƒç”¨æ–¹å¼ï¼ŒåŒæ—¶å…·â€æœ‰è§„èŒƒåŒ–çš„å‚æ•°æè¿°ï»¿ï¼Œä¾¿äº LLM ç†â€è§£å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ã€‚

2ï¼‰ç»ˆæ­¢å·¥å…· Terminate

Termiï»¿nate å·¥å…·æ˜¯ä¸€ä¸ªâ€‹ç‰¹æ®Šçš„å·¥å…·ï¼Œå…è®¸æ™ºèƒ½â€ä½“é€šè¿‡ AI å¤§æ¨¡å‹ï»¿è‡ªä¸»å†³å®šä½•æ—¶ç»“æŸä»»åŠ¡â€ï¼Œé¿å…æ— é™å¾ªç¯æˆ–è€…è¿‡æ—©ç»“æŸã€‚

```python
class Terminate(BaseTool):
name: str = "terminate"
description: str = """Terminate the interaction when the request is met OR
if the assistant cannot proceed further with the task.
When you have finished all the tasks, call this tool to end the work."""

parameters: dict = {
"type": "object",
"properties": {
"status": {
"type": "string",
"description": "The finish status of the interaction.",
"enum": ["success", "failure"],
}
},
"required": ["status"],
}

async def execute(self, status: str) -> str:
"""å®Œæˆå½“å‰æ‰§è¡Œ"""
return f"The interaction has been completed with status: {status}"
```

åœ¨ agent æºç ä¸­ï¼Œæœ‰ä¸€ä¸ª `special_tool_names` å˜é‡ï¼Œç”¨äºæŒ‡å®šç»ˆæ­¢å·¥å…·ç­‰ç‰¹æ®Šå·¥å…·ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/RWPVeFwadBJ45CLN.webp" alt="img" width="100%" />


åœ¨ `toolcall.py` æºç ä¸­ï¼Œå¯¹ç‰¹æ®Šå·¥å…·è¿›è¡Œå¤„ç†ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/jXWZyr42lvDJd3xg.webp" alt="img" width="100%" />



3ï¼‰è¯¢é—®å·¥å…· AskHuman

AskHumaï»¿n å·¥å…·å…è®¸æ™ºèƒ½ä½“åœ¨é‡åˆ°æ— â€‹æ³•è‡ªä¸»è§£å†³çš„é—®é¢˜æ—¶å‘äººç±»å¯»â€æ±‚å¸®åŠ©ï¼Œä¹Ÿå°±æ˜¯ç»™ç”¨æˆ·ä¸€ä¸ªè¾“ï»¿å…¥æ¡†ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°å¹²é¢„â€æ™ºèƒ½ä½“å®Œæˆä»»åŠ¡çš„è¿‡ç¨‹ã€‚

```python
class AskHuman(BaseTool):
"""Add a tool to ask human for help."""

name: str = "ask_human"
description: str = "Use this tool to ask human for help."
parameters: str = {
"type": "object",
"properties": {
"inquire": {
"type": "string",
"description": "The question you want to ask human.",
}
},
"required": ["inquire"],
}

async def execute(self, inquire: str) -> str:
return input(f"""Bot: {inquire}\n\nYou: """).strip()
```

è¿™ä¸ªå·¥å…·å®ï»¿ç°è™½ç„¶ç®€å•ï¼Œä½†æå¤§â€‹åœ°æå‡äº†æ™ºèƒ½ä½“çš„å®â€ç”¨æ€§å’Œå®‰å…¨æ€§ã€‚

4ï¼‰å·¥å…·é›†åˆ ToolCollection

OpenMï»¿anus è®¾è®¡äº† Tâ€‹oolCollectâ€ion ç±»æ¥ç®¡ç†å¤šä¸ªï»¿å·¥å…·å®ä¾‹ï¼Œæä¾›ç»Ÿä¸€çš„â€å·¥å…·æ³¨å†Œå’Œæ‰§è¡Œæ¥å£ï¼š

```python
class ToolCollection:
"""A collection of defined tools."""

def __init__(self, *tools: BaseTool):
self.tools = tools
self.tool_map = {tool.name: tool for tool in tools}

def to_params(self) -> List[Dict[str, Any]]:
return [tool.to_param() for tool in self.tools]

async def execute(self, *, name: str, tool_input: Dict[str, Any] = None) -> ToolResult:
tool = self.tool_map.get(name)
if not tool:
return ToolFailure(error=f"Tool {name} is invalid")
try:
result = await tool(**tool_input)
return result
except ToolError as e:
return ToolFailure(error=e.message)

def add_tools(self, *tools: BaseTool):
"""Add multiple tools to the collection."""
for tool in tools:
self.add_tool(tool)
return self
```

è¿™ç§è®¾è®¡ä½¿å¾— Oï»¿penManus å¯ä»¥çµæ´»åœ°æ·»â€‹åŠ ã€ç§»é™¤å’Œç®¡ç†å·¥å…·ï¼Œå®ç°äº†å·¥å…·â€ç³»ç»Ÿçš„å¯æ’æ‹”æ€§ã€‚æˆ‘ä»¬ä¹‹å‰åˆ©ç”¨ ï»¿Spring AI å¼€å‘å·¥å…·è°ƒâ€ç”¨æ—¶ï¼Œä¹Ÿå†™äº†ä¸ªç±»ä¼¼çš„å·¥å…·æ³¨å†Œç±»ã€‚

#### 2ã€MCP åè®®æ”¯æŒ

1ï¼‰MCP ä¸å·¥å…·ç³»ç»Ÿçš„é›†æˆ

è¿˜è®°å¾—ä¹ˆï¼Œä¹‹å‰é±¼çš®åœ¨æ•™ç¨‹ä¸­æåˆ°è¿‡ â€œMCP çš„æœ¬è´¨å°±æ˜¯å·¥å…·è°ƒç”¨â€ï¼ŒOpenManus çš„å®ç°ä¹Ÿæ˜¯éµå¾ªäº†è¿™ä¸€æ€æƒ³ã€‚é€šè¿‡ `MCPClients` ç±»ï¼ˆç»§æ‰¿è‡ª ToolCollectionï¼‰å°† MCP æœåŠ¡é›†æˆåˆ°ç°æœ‰å·¥å…·ç³»ç»Ÿä¸­ã€‚æŸ¥çœ‹ `tool/mcp.py` çš„æºç ï¼š

```python
class MCPClients(ToolCollection):
"""
A collection of tools that connects to multiple MCP servers and manages available tools through the Model Context Protocol.
"""

sessions: Dict[str, ClientSession] = {}
exit_stacks: Dict[str, AsyncExitStack] = {}
description: str = "MCP client tools for server interaction"

def __init__(self):
super().__init__()  # Initialize with empty tools list
self.name = "mcp"  # Keep name for backward compatibility
```

2ï¼‰åŠ¨æ€å·¥å…·ä»£ç†

æ¯å½“è¿æ¥åˆ° MCP æœåŠ¡å™¨æ—¶ï¼ŒOpenManus ä¼šåŠ¨æ€åˆ›å»º `MCPClientTool` å®ä¾‹ï¼ˆç»§æ‰¿è‡ª BaseToolï¼‰ä½œä¸ºæ¯ä¸ªè¿œç¨‹å·¥å…·çš„ä»£ç†ã€‚æŸ¥çœ‹ `tool/mcp.py` çš„æºç ï¼Œé€šè¿‡å‘ MCP æœåŠ¡å™¨å‘é€è¿œç¨‹è¯·æ±‚æ¥æ‰§è¡Œå·¥å…·ï¼š

```python
class MCPClientTool(BaseTool):
"""Represents a tool proxy that can be called on the MCP server from the client side."""

session: Optional[ClientSession] = None
server_id: str = ""  # Add server identifier
original_name: str = ""

async def execute(self, **kwargs) -> ToolResult:
"""Execute the tool by making a remote call to the MCP server."""
if not self.session:
return ToolResult(error="Not connected to MCP server")

try:
result = await self.session.call_tool(self.original_name, kwargs)
content_str = ", ".join(
item.text for item in result.content if isinstance(item, TextContent)
)
return ToolResult(output=content_str or "No output returned.")
except Exception as e:
return ToolResult(error=f"Error executing tool: {str(e)}")
```

3ï¼‰Manus ä¸­çš„ MCP é›†æˆæœºåˆ¶

Manus æ™ºèƒ½ä½“ **é€šè¿‡å·¥å…·è°ƒç”¨** å®ç°äº†ä¸ MCP æœåŠ¡å™¨çš„æ— ç¼é›†æˆã€‚æŸ¥çœ‹ `agent/manus.py` çš„æºç ï¼Œå‘ç°æœ¬è´¨ä¸Šæ˜¯æŠŠ MCP æœåŠ¡æä¾›çš„å·¥å…·åŠ¨æ€æ·»åŠ åˆ°å¯ç”¨çš„å·¥å…·é›†åˆä¸­ï¼š

```python
async def connect_mcp_server(
self,
server_url: str,
server_id: str = "",
use_stdio: bool = False,
stdio_args: List[str] = None,
) -> None:
"""Connect to an MCP server and add its tools."""
if use_stdio:
await self.mcp_clients.connect_stdio(server_url, stdio_args or [], server_id)
else:
await self.mcp_clients.connect_sse(server_url, server_id)

# å…³é”®å®ç°ï¼šåŠ¨æ€æ·»åŠ è¯¥æœåŠ¡å™¨çš„å·¥å…·åˆ°å¯ç”¨å·¥å…·é›†åˆ
new_tools = [
tool for tool in self.mcp_clients.tools if tool.server_id == server_id
]
self.available_tools.add_tools(*new_tools)
```

è¿™æ ·ä¸€æ¥ï¼Œï»¿å¯¹å¤§æ¨¡å‹æ¥è¯´ï¼ŒMCâ€‹P å·¥å…·ä¸æœ¬åœ°å·¥å…·â€çš„è°ƒç”¨æ–¹å¼ä¸€è‡´ï¼Œå¾ˆï»¿å·§å¦™åœ°å¤ç”¨äº†ä»£ç ã€‚

#### 3ã€å…¶ä»–å€¼å¾—å­¦ä¹ çš„æºç 

1ï¼‰Python ä»£ç æ‰§è¡Œæ²™ç®±

`PythonExecute` å·¥å…·å®ç°äº†ä¸€ä¸ªå®‰å…¨çš„ Python ä»£ç æ‰§è¡Œç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå€¼å¾—å­¦ä¹ çš„å®‰å…¨å®ç°ã€‚æŸ¥çœ‹ `tool/python_execute.py` æºç ï¼š

```python
class PythonExecute(BaseTool):
name: str = "python_execute"

async def execute(self, code: str, timeout: int = 5) -> Dict:
"""å®‰å…¨æ‰§è¡Œ Python ä»£ç """
with multiprocessing.Manager() as manager:
result = manager.dict({"observation": "", "success": False})
# å®‰å…¨çš„å…¨å±€ç¯å¢ƒ
safe_globals = {"__builtins__": __builtins__.__dict__.copy()}
# ä½¿ç”¨ç‹¬ç«‹è¿›ç¨‹æ‰§è¡Œä»£ç 
proc = multiprocessing.Process(
target=self._run_code, args=(code, result, safe_globals)
)
proc.start()
proc.join(timeout)

# è¶…æ—¶å¤„ç†
if proc.is_alive():
proc.terminate()
proc.join(1)
return {
"observation": f"Execution timeout after {timeout} seconds",
"success": False,
}
return dict(result)
```

è¿™æ®µä»£ç å±•ç¤ºäº†å‡ ä¸ªå®‰å…¨ç¼–ç¨‹çš„æœ€ä½³å®è·µï¼š

*   ä½¿ç”¨ç‹¬ç«‹è¿›ç¨‹éš”ç¦»ä»£ç æ‰§è¡Œ

*   å®ç°äº†è¶…æ—¶æœºåˆ¶é˜²æ­¢æ— é™å¾ªç¯

*   æˆªè·å’Œå¤„ç†æ‰€æœ‰å¼‚å¸¸

*   é‡å®šå‘æ ‡å‡†è¾“å‡ºä»¥æ•è·æ‰“å°å†…å®¹


2ï¼‰çŠ¶æ€ç®¡ç†ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢æœºåˆ¶

`BaseAgent` å®ç°äº†ä¸€ä¸ªä¼˜é›…çš„çŠ¶æ€ç®¡ç†å’Œä¸Šä¸‹æ–‡åˆ‡æ¢æœºåˆ¶ï¼š

```python
@asynccontextmanager
async def state_context(self, new_state: AgentState):
"""Context manager for safe agent state transitions."""
if not isinstance(new_state, AgentState):
raise ValueError(f"Invalid state: {new_state}")

previous_state = self.state
self.state = new_state
try:
yield
except Exception as e:
self.state = AgentState.ERROR  # Transition to ERROR on failure
raise e
finally:
self.state = previous_state  # Revert to previous state
```

è¿™ä¸ªä¸Šä¸‹æ–‡ï»¿ç®¡ç†å™¨ç¡®ä¿äº†çŠ¶æ€è½¬â€‹æ¢çš„å®‰å…¨æ€§å’Œå¯é æ€§â€ï¼Œå³ä½¿åœ¨å¼‚å¸¸æƒ…å†µä¸‹ï»¿ä¹Ÿèƒ½æ­£ç¡®æ¢å¤çŠ¶æ€ï¼Œâ€æ˜¯ä¸€ä¸ªå€¼å¾—å­¦ä¹ çš„è®¾è®¡æ¨¡å¼ã€‚

3ï¼‰å·¥å…·ç»“æœç»Ÿä¸€è¡¨ç¤ºä¸ç»„åˆ

OpenManus è®¾è®¡äº† `ToolResult` ç±»æ¥ç»Ÿä¸€è¡¨ç¤ºå·¥å…·æ‰§è¡Œç»“æœï¼Œå¹¶æ”¯æŒç»“æœç»„åˆã€‚æŸ¥çœ‹ `tool/base.py` æºç ï¼š

```python
class ToolResult(BaseModel):
"""Represents the result of a tool execution."""

output: Any = Field(default=None)
error: Optional[str] = Field(default=None)
base64_image: Optional[str] = Field(default=None)
system: Optional[str] = Field(default=None)

def __add__(self, other: "ToolResult"):
"""ç»„åˆä¸¤ä¸ªå·¥å…·ç»“æœ"""
def combine_fields(field: Optional[str], other_field: Optional[str], concatenate: bool = True):
if field and other_field:
if concatenate:
return field + other_field
raise ValueError("Cannot combine tool results")
return field or other_field

return ToolResult(
output=combine_fields(self.output, other.output),
error=combine_fields(self.error, other.error),
base64_image=combine_fields(self.base64_image, other.base64_image, False),
system=combine_fields(self.system, other.system),
)
```

è¿™ç§è®¾è®¡ä½¿ï»¿å¾—å·¥å…·ç»“æœå¤„ç†æ›´åŠ â€‹ç»Ÿä¸€å’Œçµæ´»ï¼Œç‰¹åˆ«æ˜¯â€åœ¨éœ€è¦ç»„åˆå¤šä¸ªå·¥å…·ï»¿ç»“æœæˆ–å¤„ç†å¼‚å¸¸æƒ…å†µâ€æ—¶ã€‚

äº”ã€è‡ªä¸»å®ç° Manus æ™ºèƒ½ä½“
----------------

è™½ç„¶ OpenManus ä»£ï»¿ç é‡å¾ˆå¤§ï¼Œä½†å…¶å®å¾ˆå¤šä»£ç éƒ½æ˜¯åœ¨å®ç°æ™ºèƒ½ä½“æ‰€éœ€çš„æ”¯æŒç³»ç»Ÿâ€‹ï¼Œæ¯”å¦‚è°ƒç”¨å¤§æ¨¡å‹ã€ä¼šè¯è®°å¿†ã€å·¥å…·è°ƒç”¨èƒ½åŠ›ç­‰ã€‚å¦‚æœä½¿ç”¨ â€AI å¼€å‘æ¡†æ¶ï¼Œè¿™äº›èƒ½åŠ›éƒ½ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å®ç°ï¼Œä»£ç é‡ä¼šç®€ï»¿å•å¾ˆå¤šã€‚ä¸‹é¢å°±è®©æˆ‘ä»¬åŸºäº Spring AI æ¡†æ¶ï¼Œâ€å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Manus æ™ºèƒ½ä½“ã€‚

### å®šä¹‰æ•°æ®æ¨¡å‹

æ–°å»º `agent.model` åŒ…ï¼Œå°†æ‰€æœ‰ç”¨åˆ°çš„æ•°æ®æ¨¡å‹ï¼ˆå®ä½“ç±»ã€æšä¸¾ç±»ç­‰ï¼‰éƒ½æ”¾åˆ°è¯¥åŒ…ä¸‹ã€‚

ç›®å‰æˆ‘ä»¬åªï»¿éœ€è¦å®šä¹‰ Agenâ€‹t çš„çŠ¶æ€æšä¸¾ï¼Œç”¨â€äºæ§åˆ¶æ™ºèƒ½ä½“çš„æ‰§è¡Œï»¿ã€‚AgentStaâ€te ä»£ç å¦‚ä¸‹ï¼š

```java
/**  
 * ä»£ç†æ‰§è¡ŒçŠ¶æ€çš„æšä¸¾ç±»  
 */
public enum AgentState {

/**
 * ç©ºé—²çŠ¶æ€
 */
IDLE,

/**
 * è¿è¡Œä¸­çŠ¶æ€
 */
RUNNING,

/**
 * å·²å®ŒæˆçŠ¶æ€
 */
FINISHED,

/**
 * é”™è¯¯çŠ¶æ€
 */
ERROR
}
```

### æ ¸å¿ƒæ¶æ„å¼€å‘

é¦–å…ˆå®šä¹‰æ™ºèƒ½ä½“çš„æ ¸å¿ƒæ¶æ„ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç±»ï¼š

*   BaseAgentï¼šæ™ºèƒ½ä½“åŸºç±»ï¼Œå®šä¹‰åŸºæœ¬ä¿¡æ¯å’Œå¤šæ­¥éª¤æ‰§è¡Œæµç¨‹

*   ReActAgentï¼šå®ç°æ€è€ƒå’Œè¡ŒåŠ¨ä¸¤ä¸ªæ­¥éª¤çš„æ™ºèƒ½ä½“

*   ToolCallAgentï¼šå®ç°å·¥å…·è°ƒç”¨èƒ½åŠ›çš„æ™ºèƒ½ä½“

*   YuManusï¼šæœ€ç»ˆå¯ä½¿ç”¨çš„ Manus å®ä¾‹


#### 1ã€å¼€å‘åŸºç¡€ Agent ç±»

å‚è€ƒ Opï»¿enManus çš„â€‹å®ç°æ–¹å¼ï¼ŒBaseâ€Agent çš„ä»£ç ï»¿å¦‚ä¸‹ï¼š

```java
/**  
 * æŠ½è±¡åŸºç¡€ä»£ç†ç±»ï¼Œç”¨äºç®¡ç†ä»£ç†çŠ¶æ€å’Œæ‰§è¡Œæµç¨‹ã€‚  
 *   
 * æä¾›çŠ¶æ€è½¬æ¢ã€å†…å­˜ç®¡ç†å’ŒåŸºäºæ­¥éª¤çš„æ‰§è¡Œå¾ªç¯çš„åŸºç¡€åŠŸèƒ½ã€‚  
 * å­ç±»å¿…é¡»å®ç°stepæ–¹æ³•ã€‚  
 */
@Data
@Slf4j
public abstract class BaseAgent {

// æ ¸å¿ƒå±æ€§
private String name;

// æç¤º
private String systemPrompt;
private String nextStepPrompt;

// çŠ¶æ€
private AgentState state = AgentState.IDLE;

// æ‰§è¡Œæ§åˆ¶
private int maxSteps = 10;
private int currentStep = 0;

// LLM
private ChatClient chatClient;

// Memoryï¼ˆéœ€è¦è‡ªä¸»ç»´æŠ¤ä¼šè¯ä¸Šä¸‹æ–‡ï¼‰
private List<Message> messageList = new ArrayList<>();

/**
 * è¿è¡Œä»£ç†
 *
 * @param userPrompt ç”¨æˆ·æç¤ºè¯
 * @return æ‰§è¡Œç»“æœ
 */
public String run(String userPrompt) {
if (this.state != AgentState.IDLE) {
throw new RuntimeException("Cannot run agent from state: " + this.state);
}
if (StringUtil.isBlank(userPrompt)) {
throw new RuntimeException("Cannot run agent with empty user prompt");
}
// æ›´æ”¹çŠ¶æ€
state = AgentState.RUNNING;
// è®°å½•æ¶ˆæ¯ä¸Šä¸‹æ–‡
messageList.add(new UserMessage(userPrompt));
// ä¿å­˜ç»“æœåˆ—è¡¨
List<String> results = new ArrayList<>();
try {
for (int i = 0; i < maxSteps && state != AgentState.FINISHED; i++) {
int stepNumber = i + 1;
currentStep = stepNumber;
log.info("Executing step " + stepNumber + "/" + maxSteps);
// å•æ­¥æ‰§è¡Œ
String stepResult = step();
String result = "Step " + stepNumber + ": " + stepResult;
results.add(result);
}
// æ£€æŸ¥æ˜¯å¦è¶…å‡ºæ­¥éª¤é™åˆ¶
if (currentStep >= maxSteps) {
state = AgentState.FINISHED;
results.add("Terminated: Reached max steps (" + maxSteps + ")");
}
return String.join("\n", results);
} catch (Exception e) {
state = AgentState.ERROR;
log.error("Error executing agent", e);
return "æ‰§è¡Œé”™è¯¯" + e.getMessage();
} finally {
// æ¸…ç†èµ„æº
this.cleanup();
}
}

/**
 * æ‰§è¡Œå•ä¸ªæ­¥éª¤
 *
 * @return æ­¥éª¤æ‰§è¡Œç»“æœ
 */
public abstract String step();

/**
 * æ¸…ç†èµ„æº
 */
protected void cleanup() {
// å­ç±»å¯ä»¥é‡å†™æ­¤æ–¹æ³•æ¥æ¸…ç†èµ„æº
}
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¦æ³¨æ„ 3 ç‚¹ï¼š

1.  åŒ…å« chatClient å±æ€§ï¼Œç”±è°ƒç”¨æ–¹ä¼ å…¥å…·ä½“è°ƒç”¨å¤§æ¨¡å‹çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯å†™æ­»ä½¿ç”¨çš„å¤§æ¨¡å‹ï¼Œæ›´çµæ´»

2.  åŒ…å« messageList å±æ€§ï¼Œç”¨äºç»´æŠ¤æ¶ˆæ¯ä¸Šä¸‹æ–‡åˆ—è¡¨

3.  é€šè¿‡ state å±æ€§æ¥æ§åˆ¶æ™ºèƒ½ä½“çš„æ‰§è¡Œæµç¨‹


#### 2ã€å¼€å‘ ReActAgent ç±»

å‚è€ƒ OpenMï»¿anus çš„å®ç°æ–¹å¼ï¼Œç»§æ‰¿è‡ª â€‹BaseAgentï¼Œå¹¶ä¸”å°† sâ€tep æ–¹æ³•åˆ†è§£ä¸º thinkï»¿ å’Œ act ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚Râ€eActAgent çš„ä»£ç å¦‚ä¸‹ï¼š

```java
/**  
 * ReAct (Reasoning and Acting) æ¨¡å¼çš„ä»£ç†æŠ½è±¡ç±»  
 * å®ç°äº†æ€è€ƒ-è¡ŒåŠ¨çš„å¾ªç¯æ¨¡å¼  
 */
@EqualsAndHashCode(callSuper = true)
@Data
public abstract class ReActAgent extends BaseAgent {

/**
 * å¤„ç†å½“å‰çŠ¶æ€å¹¶å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨
 *
 * @return æ˜¯å¦éœ€è¦æ‰§è¡Œè¡ŒåŠ¨ï¼Œtrueè¡¨ç¤ºéœ€è¦æ‰§è¡Œï¼Œfalseè¡¨ç¤ºä¸éœ€è¦æ‰§è¡Œ
 */
public abstract boolean think();

/**
 * æ‰§è¡Œå†³å®šçš„è¡ŒåŠ¨
 *
 * @return è¡ŒåŠ¨æ‰§è¡Œç»“æœ
 */
public abstract String act();

/**
 * æ‰§è¡Œå•ä¸ªæ­¥éª¤ï¼šæ€è€ƒå’Œè¡ŒåŠ¨
 *
 * @return æ­¥éª¤æ‰§è¡Œç»“æœ
 */
@Override
public String step() {
try {
boolean shouldAct = think();
if (!shouldAct) {
return "æ€è€ƒå®Œæˆ - æ— éœ€è¡ŒåŠ¨";
}
return act();
} catch (Exception e) {
// è®°å½•å¼‚å¸¸æ—¥å¿—
e.printStackTrace();
return "æ­¥éª¤æ‰§è¡Œå¤±è´¥: " + e.getMessage();
}
}
}
```

#### 3ã€å¼€å‘ ToolCallAgent ç±»

ToolCaï»¿llAgent è´Ÿè´£å®ç°â€‹å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œç»§æ‰¿è‡ª Râ€eActAgentï¼Œå…·ä½“ï»¿å®ç°äº† think å’Œ â€act ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚

æˆ‘ä»¬æœ‰ 3 ç§æ–¹æ¡ˆæ¥å®ç° ToolCallAgentï¼š

1ï¼‰åŸºäº Sï»¿pring AI çš„å·¥â€‹å…·è°ƒç”¨èƒ½åŠ›ï¼Œæ‰‹åŠ¨æ§åˆ¶å·¥å…·â€æ‰§è¡Œã€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚ï»¿â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€

å…¶å® Spring çš„ ChatClient å·²ç»æ”¯æŒé€‰æ‹©å·¥å…·è¿›è¡Œè°ƒç”¨ï¼ˆå†…éƒ¨å®Œæˆäº† thinkã€actã€observeï¼‰ï¼Œä½†è¿™é‡Œæˆ‘ä»¬è¦è‡ªä¸»å®ç°ï¼Œå¯ä»¥ä½¿ç”¨ Spring AI æä¾›çš„ [æ‰‹åŠ¨æ§åˆ¶å·¥å…·æ‰§è¡Œ](https://docs.spring.io/spring-ai/reference/api/tools.html#_user_controlled_tool_execution)ã€‚

2ï¼‰åŸºäº ï»¿Spring AIâ€‹ çš„å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œâ€ç®€åŒ–è°ƒç”¨æµç¨‹ã€‚

ç”±äº Sprï»¿ing AI å®Œå…¨æ‰˜ç®¡äº†â€‹å·¥å…·è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠâ€æ‰€æœ‰å·¥å…·è°ƒç”¨çš„ä»£ç ä½œä¸º ï»¿think æ–¹æ³•ï¼Œè€Œ aâ€ct æ–¹æ³•ä¸å®šä¹‰ä»»ä½•åŠ¨ä½œã€‚

3ï¼‰è‡ªä¸»å®ç°å·¥å…·è°ƒç”¨èƒ½åŠ›ã€‚

ä¹Ÿå°±æ˜¯å·¥å…·è°ƒç”¨ï»¿ç« èŠ‚æåˆ°çš„å®ç°åŸç†ï¼šè‡ªå·±å†™â€‹ Promptï¼Œå¼•å¯¼ AIâ€ å›å¤æƒ³è¦è°ƒç”¨çš„å·¥å…·åˆ—è¡¨å’Œï»¿è°ƒç”¨å‚æ•°ï¼Œç„¶åå†æ‰§è¡Œå·¥å…·å¹¶â€å°†ç»“æœè¿”é€ç»™ AI å†æ¬¡æ‰§è¡Œã€‚

ä½¿ç”¨å“ªç§æ–¹æ¡ˆå‘¢ï¼Ÿ

å¦‚æœæ˜¯ä¸ºäº†å­¦ï»¿ä¹  ReAct æ¨¡å¼ï¼Œè®©â€‹æµç¨‹æ›´æ¸…æ™°ï¼Œæ¨èç¬¬ä¸€ç§ï¼›â€å¦‚æœåªæ˜¯ä¸ºäº†å¿«é€Ÿå®ç°ï¼Œæ¨ï»¿èç¬¬äºŒç§ï¼›ä¸å»ºè®®é‡‡ç”¨ç¬¬ä¸‰â€ç§æ–¹æ¡ˆï¼Œè¿‡äºåŸç”Ÿï¼Œå¼€å‘æˆæœ¬é«˜ã€‚

ä¸‹é¢æˆ‘ä»¬é‡‡ï»¿ç”¨ç¬¬ä¸€ç§æ–¹æ¡ˆå®ç° â€‹ToolCallAâ€gentï¼Œå…ˆå®šä¹‰æ‰€ï»¿éœ€çš„å±æ€§å’Œæ„é€ æ–¹æ³•â€ï¼š

```java
/**  
 * å¤„ç†å·¥å…·è°ƒç”¨çš„åŸºç¡€ä»£ç†ç±»ï¼Œå…·ä½“å®ç°äº† think å’Œ act æ–¹æ³•ï¼Œå¯ä»¥ç”¨ä½œåˆ›å»ºå®ä¾‹çš„çˆ¶ç±»  
 */
@EqualsAndHashCode(callSuper = true)
@Data
@Slf4j
public class ToolCallAgent extends ReActAgent {

// å¯ç”¨çš„å·¥å…·
private final ToolCallback[] availableTools;

// ä¿å­˜äº†å·¥å…·è°ƒç”¨ä¿¡æ¯çš„å“åº”
private ChatResponse toolCallChatResponse;

// å·¥å…·è°ƒç”¨ç®¡ç†è€…
private final ToolCallingManager toolCallingManager;

// ç¦ç”¨å†…ç½®çš„å·¥å…·è°ƒç”¨æœºåˆ¶ï¼Œè‡ªå·±ç»´æŠ¤ä¸Šä¸‹æ–‡
private final ChatOptions chatOptions;

public ToolCallAgent(ToolCallback[] availableTools) {
super();
this.availableTools = availableTools;
this.toolCallingManager = ToolCallingManager.builder().build();
// ç¦ç”¨ Spring AI å†…ç½®çš„å·¥å…·è°ƒç”¨æœºåˆ¶ï¼Œè‡ªå·±ç»´æŠ¤é€‰é¡¹å’Œæ¶ˆæ¯ä¸Šä¸‹æ–‡
this.chatOptions = DashScopeChatOptions.builder()
.withProxyToolCalls(true)
.build();
}
}
```

æ³¨æ„ï¼Œåœ¨ä¸Šè¿°ä»£ç ä¸­ï»¿ï¼Œæˆ‘ä»¬é€šè¿‡å°† DashScopeChâ€‹atOptions çš„ withPrâ€oxyToolCalls é€‰é¡¹è®¾ç½®ä¸ºï»¿ trueï¼Œæ¥ç¦æ­¢ Spring Aâ€I æ‰˜ç®¡å·¥å…·è°ƒç”¨ï¼Œè€Œæ˜¯æˆ‘ä»¬è‡ªä¸»å®ç°ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/EGJoiTueixnROgjz.webp" alt="" width="100%" />


è™½ç„¶å®˜æ–¹æä¾›çš„ç¤ºä¾‹ä»£ç æ˜¯è®¾ï»¿ç½® internalToolExecutionEnaâ€‹bled ä¸º false æ¥ç¦ç”¨ Spring AIâ€ æ‰˜ç®¡å·¥å…·è°ƒç”¨ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é˜¿é‡Œçš„ Dashï»¿ScopeChatModel å¤§æ¨¡å‹å®¢æˆ·ç«¯ï¼Œå¦‚æœæŒ‰ç…§â€ä¸‹é¢çš„æ–¹å¼ï¼Œä¼šç›´æ¥å¯¼è‡´å·¥å…·è°ƒç”¨å¤±æ•ˆï¼

```java
ChatOptions chatOptions = ToolCallingChatOptions.builder()
.toolCallbacks(new CustomerTools())
.internalToolExecutionEnabled(false)
.build();
```

ä¸‹é¢æˆ‘ä»¬å®ï»¿ç° think æ–¹â€‹æ³•ï¼Œä¼ å…¥å·¥å…·åˆ—è¡¨å¹¶â€è°ƒç”¨å¤§æ¨¡å‹ï¼Œå¾—åˆ°éœ€ï»¿è¦è°ƒç”¨çš„å·¥å…·åˆ—è¡¨ï¼š

```java
/**  
 * å¤„ç†å½“å‰çŠ¶æ€å¹¶å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨  
 *  
 * @return æ˜¯å¦éœ€è¦æ‰§è¡Œè¡ŒåŠ¨  
 */
@Override
public boolean think() {
if (getNextStepPrompt() != null && !getNextStepPrompt().isEmpty()) {
UserMessage userMessage = new UserMessage(getNextStepPrompt());
getMessageList().add(userMessage);
}
List<Message> messageList = getMessageList();
Prompt prompt = new Prompt(messageList, chatOptions);
try {
// è·å–å¸¦å·¥å…·é€‰é¡¹çš„å“åº”
ChatResponse chatResponse = getChatClient().prompt(prompt)
.system(getSystemPrompt())
.tools(availableTools)
.call()
.chatResponse();
// è®°å½•å“åº”ï¼Œç”¨äº Act
this.toolCallChatResponse = chatResponse;
AssistantMessage assistantMessage = chatResponse.getResult().getOutput();
// è¾“å‡ºæç¤ºä¿¡æ¯
String result = assistantMessage.getText();
List<AssistantMessage.ToolCall> toolCallList = assistantMessage.getToolCalls();
log.info(getName() + "çš„æ€è€ƒ: " + result);
log.info(getName() + "é€‰æ‹©äº† " + toolCallList.size() + " ä¸ªå·¥å…·æ¥ä½¿ç”¨");
String toolCallInfo = toolCallList.stream()
.map(toolCall -> String.format("å·¥å…·åç§°ï¼š%sï¼Œå‚æ•°ï¼š%s",
toolCall.name(),
toolCall.arguments())
)
.collect(Collectors.joining("\n"));
log.info(toolCallInfo);
if (toolCallList.isEmpty()) {
// åªæœ‰ä¸è°ƒç”¨å·¥å…·æ—¶ï¼Œæ‰è®°å½•åŠ©æ‰‹æ¶ˆæ¯
getMessageList().add(assistantMessage);
return false;
} else {
// éœ€è¦è°ƒç”¨å·¥å…·æ—¶ï¼Œæ— éœ€è®°å½•åŠ©æ‰‹æ¶ˆæ¯ï¼Œå› ä¸ºè°ƒç”¨å·¥å…·æ—¶ä¼šè‡ªåŠ¨è®°å½•
return true;
}
} catch (Exception e) {
log.error(getName() + "çš„æ€è€ƒè¿‡ç¨‹é‡åˆ°äº†é—®é¢˜: " + e.getMessage());
getMessageList().add(
new AssistantMessage("å¤„ç†æ—¶é‡åˆ°é”™è¯¯: " + e.getMessage()));
return false;
}
}
```

æœ€åå®ç° ï»¿act æ–¹æ³•ï¼Œæ‰§è¡Œâ€‹å·¥å…·è°ƒç”¨åˆ—è¡¨ï¼Œå¾—åˆ°â€è¿”å›ç»“æœï¼Œå¹¶å°†å·¥å…·ï»¿çš„å“åº”æ·»åŠ åˆ°æ¶ˆæ¯åˆ—â€è¡¨ä¸­ï¼š

```java
/**  
 * æ‰§è¡Œå·¥å…·è°ƒç”¨å¹¶å¤„ç†ç»“æœ  
 *  
 * @return æ‰§è¡Œç»“æœ  
 */
@Override
public String act() {
if (!toolCallChatResponse.hasToolCalls()) {
return "æ²¡æœ‰å·¥å…·è°ƒç”¨";
}
// è°ƒç”¨å·¥å…·
Prompt prompt = new Prompt(getMessageList(), chatOptions);
ToolExecutionResult toolExecutionResult = toolCallingManager.executeToolCalls(prompt, toolCallChatResponse);
// è®°å½•æ¶ˆæ¯ä¸Šä¸‹æ–‡ï¼ŒconversationHistory å·²ç»åŒ…å«äº†åŠ©æ‰‹æ¶ˆæ¯å’Œå·¥å…·è°ƒç”¨è¿”å›çš„ç»“æœ
setMessageList(toolExecutionResult.conversationHistory());
// å½“å‰å·¥å…·è°ƒç”¨çš„ç»“æœ
ToolResponseMessage toolResponseMessage = (ToolResponseMessage) CollUtil.getLast(toolExecutionResult.conversationHistory());
String results = toolResponseMessage.getResponses().stream()
.map(response -> "å·¥å…· " + response.name() + " å®Œæˆäº†å®ƒçš„ä»»åŠ¡ï¼ç»“æœ: " + response.responseData())
.collect(Collectors.joining("\n"));
log.info(results);
return results;
}
```

æ³¨æ„ç»´æŠ¤æ¶ˆæ¯ä¸Šä¸‹æ–‡ï¼Œä¸è¦é‡å¤æ·»åŠ äº†æ¶ˆæ¯ï¼Œå› ä¸º `toolExecutionResult.conversationHistory()` æ–¹æ³•å·²ç»åŒ…å«äº†åŠ©æ‰‹æ¶ˆæ¯å’Œå·¥å…·è°ƒç”¨è¿”å›çš„ç»“æœã€‚

å¯ä»¥å¸¦çœ‹ä¸‹ toolCallingManager.executeToolCalls çš„æºç ï¼Œä¼šè‡ªåŠ¨è¿½åŠ åŠ©æ‰‹æ¶ˆæ¯åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/5LRrBoyPvs2kAJny.webp" alt="" width="100%" />

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/FlxqTqefcho72bGH.webp" alt="" width="100%" />




åƒä¸‡åˆ«å¿˜äº†ï»¿ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€â€‹ä¸ªç»ˆæ­¢å·¥å…·ï¼Œè®©æ™ºèƒ½â€ä½“å¯ä»¥è‡ªè¡Œå†³å®šä»»ï»¿åŠ¡ç»“æŸã€‚

1ï¼‰åœ¨ tools åŒ…ä¸‹æ–°å»º TerminateToolï¼š

```java
public class TerminateTool {

@Tool(description = """
Terminate the interaction when the request is met OR if the assistant cannot proceed further with the task.
"When you have finished all the tasks, call this tool to end the work.
""")
public String doTerminate() {
return "ä»»åŠ¡ç»“æŸ";
}
}
```

2ï¼‰ä¿®æ”¹ ToolRegistrationï¼Œæ³¨å†Œä¸­æ­¢å·¥å…·ï¼š

```java
TerminateTool terminateTool = new TerminateTool();

return ToolCallbacks.from(
fileOperationTool,
webSearchTool,
webScrapingTool,
resourceDownloadTool,
terminalOperationTool,
pdfGenerationTool,
terminateTool
);
```

3ï¼‰å®Œå–„ ï»¿act æ–¹æ³•ï¼Œå½“è°ƒâ€‹ç”¨äº†ç»ˆæ­¢å·¥å…·æ—¶ï¼Œä¿®â€æ”¹ agent çš„ï»¿çŠ¶æ€ä¸º â€œå·²ç»“æŸâ€â€ï¼š

```java
// å½“å‰å·¥å…·è°ƒç”¨çš„ç»“æœ  
ToolResponseMessage toolResponseMessage = (ToolResponseMessage) CollUtil.getLast(toolExecutionResult.conversationHistory());
String results = toolResponseMessage.getResponses().stream()
.map(response -> "å·¥å…· " + response.name() + " å®Œæˆäº†å®ƒçš„ä»»åŠ¡ï¼ç»“æœ: " + response.responseData())
.collect(Collectors.joining("\n"));
// åˆ¤æ–­æ˜¯å¦è°ƒç”¨äº†ç»ˆæ­¢å·¥å…·  
boolean terminateToolCalled = toolResponseMessage.getResponses().stream()
.anyMatch(response -> "doTerminate".equals(response.name()));
if (terminateToolCalled) {
setState(AgentState.FINISHED);
}
log.info(results);
return results;
```

#### 4ã€å¼€å‘ YuManus ç±»

YuManus æ˜¯ï»¿å¯ä»¥ç›´æ¥æä¾›ç»™å…¶ä»–æ–¹æ³•è°ƒç”¨çš„ AIâ€‹ è¶…çº§æ™ºèƒ½ä½“å®ä¾‹ï¼Œç»§æ‰¿è‡ª Toolâ€CallAgentï¼Œéœ€è¦ç»™æ™ºèƒ½ä½“è®¾ï»¿ç½®å„ç§å‚æ•°ï¼Œæ¯”å¦‚å¯¹è¯å®¢æˆ·ç«¯ chaâ€tClientã€å·¥å…·è°ƒç”¨åˆ—è¡¨ç­‰ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```java
@Component
public class YuManus extends ToolCallAgent {

public YuManus(ToolCallback[] allTools, ChatModel dashscopeChatModel) {
super(allTools);
this.setName("yuManus");
String SYSTEM_PROMPT = """
You are YuManus, an all-capable AI assistant, aimed at solving any task presented by the user.
You have various tools at your disposal that you can call upon to efficiently complete complex requests.
""";
this.setSystemPrompt(SYSTEM_PROMPT);
String NEXT_STEP_PROMPT = """
Based on user needs, proactively select the most appropriate tool or combination of tools.
For complex tasks, you can break down the problem and use different tools step by step to solve it.
After using each tool, clearly explain the execution results and suggest the next steps.
If you want to stop the interaction at any point, use the `terminate` tool/function call.
""";
this.setNextStepPrompt(NEXT_STEP_PROMPT);
this.setMaxSteps(20);
// åˆå§‹åŒ–å®¢æˆ·ç«¯
ChatClient chatClient = ChatClient.builder(dashscopeChatModel)
.defaultAdvisors(new MyLoggerAdvisor())
.build();
this.setChatClient(chatClient);
}
}
```

### æµ‹è¯•æ™ºèƒ½ä½“

ç¼–å†™å•å…ƒæµ‹è¯•ç±»ï¼Œè®©è¶…çº§æ™ºèƒ½ä½“å®Œæˆä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„ä»»åŠ¡ï¼š

```java
@SpringBootTest
class YuManusTest {

@Resource
private YuManus yuManus;

@Test
void run() {
String userPrompt = """
æˆ‘çš„å¦ä¸€åŠå±…ä½åœ¨ä¸Šæµ·é™å®‰åŒºï¼Œè¯·å¸®æˆ‘æ‰¾åˆ° 5 å…¬é‡Œå†…åˆé€‚çš„çº¦ä¼šåœ°ç‚¹ï¼Œ
å¹¶ç»“åˆä¸€äº›ç½‘ç»œå›¾ç‰‡ï¼Œåˆ¶å®šä¸€ä»½è¯¦ç»†çš„çº¦ä¼šè®¡åˆ’ï¼Œ
å¹¶ä»¥ PDF æ ¼å¼è¾“å‡º""";
String answer = yuManus.run(userPrompt);
Assertions.assertNotNull(answer);
}
}
```

ä»¥ Debï»¿ug æ¨¡å¼è¿è¡Œï¼Œèƒ½â€‹å¤ŸæŸ¥çœ‹åˆ° AI æ¯â€ä¸€æ­¥çš„æ€è€ƒè¿‡ç¨‹ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/WLIrziReAJr9zBVA.webp" alt="" width="100%" />


æ‰§è¡Œå®Œæˆåï»¿ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸€æ­¥çš„â€‹æ‰§è¡Œç»“æœï¼Œå¹¶ä¸”å¯ä»¥â€åœ¨æœ¬åœ°æŸ¥çœ‹åˆ°å·²ä¸‹è½½ï»¿çš„å›¾ç‰‡å’Œç”Ÿæˆçš„â€ PDFã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/TOhzfpBAWsewYqJy.webp" alt="" width="100%" />



æ³¨æ„ï¼Œç”±äº AI æ˜¯å­˜åœ¨éšæœºæ€§çš„ï¼Œæ‰§è¡Œçš„æ­¥éª¤æ•°ä¹Ÿä¸å›ºå®šã€‚ç»è¿‡æµ‹è¯•å¤§å®¶ä¼šå‘ç°ï¼Œæ‹¥æœ‰è‡ªä¸»è§„åˆ’èƒ½åŠ›çš„è¶…çº§æ™ºèƒ½ä½“è™½ç„¶èƒ½å¤Ÿå®Œæˆå¤æ‚çš„ä»»åŠ¡ï¼Œä½†ç¼ºç‚¹æ˜¯ **éå¸¸æµªè´¹ tokensï¼Œå¹¶ä¸”å¯èƒ½é™·å…¥æ— é™å¾ªç¯ã€‚** æ‰€ä»¥è¿˜æ˜¯è¦æŒ‰éœ€ä½¿ç”¨ã€‚

æ„Ÿå…´è¶£çš„åŒï»¿å­¦å¯ä»¥å‚è€ƒ Openâ€‹Manus çš„å®ç°æ¥â€è¿›ä¸€æ­¥ä¼˜åŒ–è¶…çº§æ™ºèƒ½ä½“ï»¿ï¼Œæ¯”å¦‚é˜²æ­¢é™·å…¥æ— é™å¾ªâ€ç¯ã€èƒ½å¤Ÿå’Œç”¨æˆ·äº¤äº’ç­‰ã€‚

å…­ã€æ‰©å±•çŸ¥è¯†
------

### æ™ºèƒ½ä½“å·¥ä½œæµ

å½“æˆ‘ä»¬é¢å¯¹å¤æ‚ä»»ï»¿åŠ¡æ—¶ï¼Œå•ä¸€æ™ºèƒ½ä½“å¯èƒ½æ— æ³•æ»¡è¶³éœ€â€‹æ±‚ã€‚å› æ­¤æ™ºèƒ½ä½“å·¥ä½œæµï¼ˆAgenâ€t Workflowï¼‰åº”è¿è€Œç”Ÿï»¿ï¼Œé€šè¿‡ç®€å•çš„ç¼–æ’ï¼Œå…è®¸å¤šä¸ªä¸“ä¸šâ€æ™ºèƒ½ä½“ååŒå·¥ä½œï¼Œå„å¸å…¶èŒã€‚

æ™ºèƒ½ä½“å·¥ä½œæµç¼–æ’çš„ç²¾é«“åœ¨äº **å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºè¿è´¯çš„èŠ‚ç‚¹é“¾**ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç”±æœ€é€‚åˆçš„æ™ºèƒ½ä½“å¤„ç†ï¼ŒèŠ‚ç‚¹é—´é€šè¿‡æ¡ä»¶è·¯ç”±çµæ´»è¿æ¥ï¼Œå½¢æˆä¸€ä¸ªé«˜æ•ˆã€å¯é çš„æ‰§è¡Œç½‘ç»œã€‚

Anthropic æ›¾ç»åœ¨ä¸€ç¯‡ [ç ”ç©¶æŠ¥å‘Šã€ŠBuilding effective agentsã€‹](https://www.anthropic.com/engineering/building-effective-agents?spm=4347728f.4638ae38.0.0.54b97646EY5Jbw) ä¸­æåˆ°äº†å¤šç§ä¸åŒçš„æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼ï¼Œå¤§å®¶éœ€è¦äº†è§£æ¯ç§æ¨¡å¼çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚

#### æ™ºèƒ½ä½“å·¥ä½œæ¨¡å¼

1ï¼‰Prompt Chaining æç¤ºé“¾å·¥ä½œæµ

Prompt Cï»¿haining æ˜¯æœ€å¸¸è§çš„æ™ºèƒ½ä½“â€‹å·¥ä½œæµæ¨¡å¼ä¹‹ä¸€ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†â€ä¸€ä¸ªå¤æ‚ä»»åŠ¡æ‹†è§£ä¸ºä¸€ç³»åˆ—æœ‰åºçš„å­ï»¿ä»»åŠ¡ï¼Œæ¯ä¸€æ­¥ç”± LLM å¤„ç†å‰ä¸€â€æ­¥çš„è¾“å‡ºï¼Œé€æ­¥æ¨è¿›ä»»åŠ¡å®Œæˆã€‚

æ¯”å¦‚åœ¨å†…å®¹ç”Ÿæˆï»¿åœºæ™¯ä¸­ï¼Œå¯ä»¥å…ˆè®©æ¨¡å‹ç”Ÿæˆå¤§â€‹çº²ï¼Œå†æ ¹æ®å¤§çº²ç”Ÿæˆè¯¦ç»†å†…å®¹â€ï¼Œæœ€åè¿›è¡Œæ¶¦è‰²å’Œæ ¡å¯¹ã€‚æ¯ä¸€ï»¿æ­¥éƒ½å¯ä»¥æ’å…¥æ ¡éªŒå’Œä¸­é—´æ£€æŸ¥â€ï¼Œç¡®ä¿æµç¨‹æ­£ç¡®ã€è¾“å‡ºæ›´ç²¾å‡†ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/k8OiC4KGZMh7JXLw.webp" alt="" width="100%" />


è¿™ç§æ¨¡å¼ç»“ï»¿æ„æ¸…æ™°ï¼Œæ˜“äºè°ƒè¯•ï¼Œâ€‹éå¸¸é€‚åˆä»»åŠ¡å¯ä»¥è¢«â€è‡ªç„¶åˆ†è§£ä¸ºå¤šä¸ªé˜¶æ®µï»¿çš„åœºæ™¯ã€‚

2ï¼‰Routing è·¯ç”±åˆ†æµå·¥ä½œæµ

Routing ï»¿å·¥ä½œæµæ¨¡å¼åˆ™æ›´åƒæ˜¯ä¸€ä¸ªæ™ºèƒ½çš„è·¯ç”±â€‹å™¨ã€‚ç³»ç»Ÿä¼šæ ¹æ®è¾“å…¥å†…å®¹çš„ç±»å‹â€æˆ–ç‰¹å¾ï¼Œå°†ä»»åŠ¡åˆ†å‘ç»™æœ€åˆé€‚çš„ä¸‹ï»¿æ¸¸æ™ºèƒ½ä½“æˆ–å¤„ç†æµç¨‹ã€‚éå¸¸é€‚åˆå¤šâ€æ ·åŒ–è¾“å…¥å’Œå¤šç§å¤„ç†ç­–ç•¥çš„åœºæ™¯ã€‚

æ¯”å¦‚åœ¨å®¢æœç³»ç»Ÿä¸­ï¼Œï»¿å¯ä»¥å°†å¸¸è§é—®é¢˜ã€é€€æ¬¾è¯·æ±‚ã€æŠ€æœ¯æ”¯æŒç­‰â€‹åˆ†æµåˆ°ä¸åŒçš„å¤„ç†æ¨¡å—ï¼›åœ¨å¤šæ¨¡å‹ç³»ç»Ÿä¸­â€ï¼Œå¯ä»¥å°†ç®€å•é—®é¢˜åˆ†é…ç»™å°æ¨¡å‹ï¼Œå¤æ‚é—®ï»¿é¢˜äº¤ç»™å¤§æ¨¡å‹ã€‚è¿™æ ·æ—¢æé«˜äº†å¤„ç†æ•ˆç‡ï¼Œâ€ä¹Ÿä¿è¯äº†æ¯ç±»é—®é¢˜éƒ½èƒ½å¾—åˆ°æœ€ä¼˜è§£ç­”ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/m4vQ65viDd0EoEAI.webp" alt="" width="100%" />


3ï¼‰Parallelization å¹¶è¡ŒåŒ–å·¥ä½œæµ

åœ¨ Parï»¿allelizatiâ€‹on å¹¶è¡ŒåŒ–æ¨¡å¼ä¸‹ï¼Œâ€ä»»åŠ¡ä¼šè¢«æ‹†åˆ†ä¸ºå¤šä¸ªå¯ï»¿ä»¥å¹¶è¡Œå¤„ç†çš„å­ä»»åŠ¡ï¼Œâ€æœ€åèšåˆå„è‡ªçš„ç»“æœã€‚

æ¯”å¦‚åœ¨ä»£ç å®‰å…¨å®¡æŸ¥åœºæ™¯ï»¿ä¸­ï¼Œå¯ä»¥è®©å¤šä¸ªæ™ºèƒ½ä½“åˆ†åˆ«å¯¹åŒä¸€æ®µä»£ç è¿›è¡Œå®‰å…¨â€‹å®¡æŸ¥ï¼Œæœ€å â€œæŠ•ç¥¨â€ å†³å®šæ˜¯å¦æœ‰é—®é¢˜ã€‚åˆæ¯”å¦‚â€åœ¨å¤„ç†é•¿æ–‡æ¡£æ—¶ï¼Œå¯ä»¥å°†æ–‡æ¡£åˆ†æ®µï¼Œæ¯æ®µç”±ä¸åŒæ™ºï»¿èƒ½ä½“å¹¶è¡Œæ€»ç»“ã€‚è¿™ç§æ¨¡å¼å¯ä»¥æ˜¾è‘—æå‡å¤„ç†é€Ÿåº¦ï¼Œâ€å¹¶é€šè¿‡ â€œæŠ•ç¥¨â€ æœºåˆ¶æå‡ç»“æœçš„å‡†ç¡®åº¦ã€‚


![](https://pic.code-nav.cn/course_picture/1608440217629360130/maM1xZsU42RcIUMF.webp)


4ï¼‰Orcï»¿hestratorâ€‹-Workers â€åè°ƒå™¨-æ‰§è¡Œè€…å·¥ä½œï»¿æµ

å¯¹äºå¤æ‚çš„ä»»åŠ¡ã€å‚ä¸ä»»åŠ¡ï»¿çš„æ™ºèƒ½ä½“å¢å¤šæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä½ â€œç®¡ç†è€…â€ï¼Œä¼šâ€‹æ ¹æ®ä»»åŠ¡åŠ¨æ€æ‹†è§£å‡ºå¤šä¸ªå­ä»»åŠ¡ï¼Œå¹¶å°†è¿™äº›å­ä»»åŠ¡åˆ†é…â€ç»™å¤šä¸ª â€œå·¥äººâ€ æ™ºèƒ½ä½“ï¼Œæœ€åå†æ•´åˆæ‰€æœ‰å·¥äººï»¿çš„ç»“æœã€‚è¿™ç§ä¸­å¤®åè°ƒæœºåˆ¶æé«˜äº†å¤æ‚ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡ï¼Œé€‚â€åˆä»»åŠ¡ç»“æ„ä¸ç¡®å®šã€éœ€è¦åŠ¨æ€åˆ†è§£çš„å¤æ‚åœºæ™¯ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/MBvCSteZa4WE7CPP.webp" alt="" width="100%" />



5ï¼‰Evaï»¿luator-Opâ€‹timizer è¯„â€ä¼°-ä¼˜åŒ–å¾ªç¯å·¥ä½œæµ

Evaluatoï»¿r-Optimizer æ¨¡å¼æ¨¡æ‹Ÿâ€‹äº†äººç±» â€œå†™ => è¯„ => æ”¹â€â€ çš„è¿‡ç¨‹ã€‚ä¸€ä¸ªæ™ºèƒ½ä½“è´Ÿè´£ç”Ÿæˆåˆï»¿æ­¥ç»“æœï¼Œå¦ä¸€ä¸ªæ™ºèƒ½ä½“è´Ÿè´£è¯„ä¼°å’Œåâ€é¦ˆï¼ŒäºŒè€…å¾ªç¯è¿­ä»£ä¼˜åŒ–è¾“å‡ºã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨æœºï»¿å™¨ç¿»è¯‘åœºæ™¯ä¸­ï¼Œå…ˆç”±ç¿»è¯‘æ™ºèƒ½ä½“â€‹è¾“å‡ºï¼Œå†ç”±è¯„å®¡æ™ºèƒ½ä½“ç»™å‡ºæ”¹è¿›â€å»ºè®®ï¼Œåå¤è¿­ä»£ç›´åˆ°è¾¾åˆ°æ»¡æ„ï»¿çš„è´¨é‡ã€‚è¿™ç§æ¨¡å¼ç‰¹åˆ«é€‚åˆéœ€è¦å¤šâ€è½®æ‰“ç£¨å’Œè´¨é‡æå‡çš„ä»»åŠ¡ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/wuZhEo9tB0q03F8G.webp" alt="" width="100%" />


#### æ™ºèƒ½ä½“å·¥ä½œæµç¼–æ’æ¡†æ¶

å¦‚æœè¦å®ç°ä¸Šè¿°å·¥ä½œæµï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ï»¿ç”¨ Activitiã€LiteFlow è¿™ç§å·¥ä½œæµæ¡†æ¶ï¼ŒæŠŠæ™ºèƒ½â€‹ä½“å¤„ç†å½“åšå·¥ä½œæµçš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸“é—¨çš„ AI æ™ºèƒ½ä½“â€å·¥ä½œæµç¼–æ’æ¡†æ¶ï¼Œæ¯”å¦‚ LangGraph å’Œ Spring Aï»¿I Alibaba Graphã€‚è¿™ä¸¤ä¸ªæ¡†æ¶å¤§å®¶ç®€å•äº†è§£ä¸€ä¸‹ï¼Œç›´â€åˆ°æ€ä¹ˆç»„åˆå·¥ä½œæµå³å¯ï¼Œå®é™…å­¦ä¹ æˆæœ¬éƒ½ä¸é«˜ã€‚

**1ï¼‰LangGraph**

[LangGraph](https://github.com/langchain-ai/langgraph) æ˜¯ LangChain å›¢é˜Ÿå¼€å‘çš„å‰æ²¿å·¥ä½œæµç¼–æ’æ¡†æ¶ï¼Œä¸“ä¸ºå¤§è¯­è¨€æ¨¡å‹åº”ç”¨è®¾è®¡ï¼Œæ˜¯æ„å»ºå¤æ‚ AI ç³»ç»Ÿçš„é¦–é€‰å·¥å…·ã€‚LangGraph çš„æ ¸å¿ƒç†å¿µæ˜¯å°†æ™ºèƒ½ä½“å·¥ä½œæµè¡¨ç¤ºä¸ºçŠ¶æ€è½¬æ¢å›¾ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æ˜¯å‡½æ•°ã€æ™ºèƒ½ä½“æˆ–å­å·¥ä½œæµï¼Œè¾¹åˆ™ä»£è¡¨çŠ¶æ€è½¬æ¢æ¡ä»¶ã€‚

ç›¸æ¯”äºä¼ ç»Ÿçš„å·¥ä½œæµæ¡†æ¶ï¼ŒLï»¿angGraph çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå®ƒå¯¹å¤§è¯­è¨€æ¨¡å‹å·¥ä½œæµâ€‹çš„æ·±åº¦ä¼˜åŒ–ã€‚æ¡†æ¶æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½æ¥æ»¡è¶³å¤§æ¨¡å‹åº”ç”¨å¼€å‘â€åœºæ™¯ï¼Œæ¯”å¦‚åŠ¨æ€åˆ†æ”¯å’Œå¹¶è¡Œæ‰§è¡Œã€æ€ç»´é“¾æ”¯æŒã€å¯¹è¯ç®¡ç†ã€ï»¿å†…ç½®ç›‘æ§ä¸å¯è§†åŒ–ç­‰ã€‚å¼€å‘è€…å¯ä»¥è½»æ¾å®ç°å¤æ‚çš„æ¨ç†è·¯å¾„â€ï¼Œè®©æ¨¡å‹åœ¨éœ€è¦æ—¶è¿›è¡Œåæ€ã€è§„åˆ’å’Œçº é”™ã€‚

å‰é¢è®²åˆ°çš„å‡ ç§å·¥ä½œæµæ¨¡å¼ï¼Œä»¥åŠæ™®é€šçš„å·¥å…·è°ƒç”¨ä»£ç†åœºæ™¯ï¼Œä½¿ç”¨ LangGraph éƒ½èƒ½è½»æ¾å®Œæˆï¼Œå…·ä½“ç”¨æ³•å’Œä»£ç ç¤ºä¾‹å¯ä»¥å‚è€ƒ [å®˜æ–¹æ–‡æ¡£](https://langchain-ai.github.io/langgraph/tutorials/workflows/#building-blocks-the-augmented-llm)ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/BSLeAOqLBz74bQUi.webp" alt="" width="100%" />


ä¸‹é¢ç»™å¤§å®¶ä¸€æ®µç®€å•çš„å·¥ä½œæµä»£ç ç¤ºä¾‹ï¼š

```python
from langgraph.graph import StateGraph
from typing import TypedDict, List, Annotated

# å®šä¹‰å·¥ä½œæµçŠ¶æ€
class AgentState(TypedDict):
messages: List[dict]
task: str
context: dict

# åˆ›å»ºçŠ¶æ€å›¾
workflow = StateGraph(AgentState)

# æ·»åŠ èŠ‚ç‚¹
workflow.add_node("understand", understand_task)
workflow.add_node("research", research_information)
workflow.add_node("analyze", analyze_data)
workflow.add_node("generate", generate_response)

# å®šä¹‰è¾¹å’Œæ¡ä»¶
workflow.add_edge("understand", "research")
workflow.add_conditional_edges(
"research",
decide_next_step,
{
"needs_more_info": "research",
"ready_for_analysis": "analyze",
"skip_analysis": "generate"
}
)
workflow.add_edge("analyze", "generate")

# è®¾ç½®èµ·å§‹èŠ‚ç‚¹
workflow.set_entry_point("understand")
```

è¿™æ®µä»£ç åˆ©ç”¨ LangGraph æ¡†æ¶å®šä¹‰ï»¿äº†ä¸€ä¸ªå¤šé˜¶æ®µçš„æ™ºèƒ½ä½“å·¥ä½œæµï¼šé¦–å…ˆé€šè¿‡ AgentState æè¿°äº†æ¯ä¸€æ­¥çš„çŠ¶æ€ç»“æ„â€‹ï¼Œç„¶åç”¨ StateGraph åˆ›å»ºäº†ä¸€ä¸ªçŠ¶æ€æµè½¬å›¾ï¼Œä¾æ¬¡æ·»åŠ äº† â€œç†è§£ä»»åŠ¡â€ã€â€œâ€ä¿¡æ¯æ£€ç´¢â€ã€â€œæ•°æ®åˆ†æâ€ å’Œ â€œç»“æœç”Ÿæˆâ€ å››ä¸ªèŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡æœ‰å‘è¾¹å’Œæ¡ä»¶åˆ†æ”¯å°†å®ƒä»¬ï»¿ä¸²è”èµ·æ¥ï¼Œå®ç°äº†æµç¨‹çš„è·³è½¬å’Œå¾ªç¯ï¼Œæœ€åæŒ‡å®šå·¥ä½œæµä» â€œç†è§£ä»»åŠ¡â€ èŠ‚ç‚¹å¼€å§‹ï¼Œæ•´ä½“ä¸Šâ€å®ç°äº†ä¸€ä¸ªå¯è‡ªåŠ¨å†³ç­–ã€å¯å¾ªç¯çš„æ™ºèƒ½ä½“ä»»åŠ¡å¤„ç†æµç¨‹ã€‚

2ï¼‰Spring AI Alibaba Graph

ç›®å‰ Spring AI å®˜æ–¹è¿˜æ²¡æœ‰æä¾›å·¥ä½œæµç¼–æ’èƒ½åŠ›ï¼Œä½†æ˜¯å›½å†…çš„ Spring AI Alibaba å·²ç»æä¾›äº†å·¥ä½œæµç¼–æ’æ¡†æ¶ [Spring AI Alibaba Graph](https://java2ai.com/blog/spring-ai-alibaba-graph-preview/)ã€‚

è™½ç„¶ç›®å‰è¿˜å¤„äº Demo é˜¶æ®µï¼Œå·²ç»æ”¯æŒäº†ï¼š

*   åŸºç¡€å·¥ä½œæµçš„ç¼–æ’

*   ReAct Agent æ¨¡å¼

*   Orchestrator-Workers åè°ƒå™¨-å·¥ä½œè€…æ¨¡å¼


åƒæˆ‘ä»¬å‰é¢è‡ªï»¿ä¸»å¼€å‘çš„ ReAct æ¨¡â€‹å¼çš„ Manus æ™ºèƒ½ä½“â€ï¼Œä½¿ç”¨ Spring Aï»¿I Alibaba Grâ€aphï¼Œå‡ è¡Œä»£ç å°±æå®šäº†ï¼š

```java
ReactAgent reactAgent = ReactAgent.builder()
.name("React Agent Demo")
.prompt("è¯·å®Œæˆæ¥ä¸‹æ¥ç”¨æˆ·è¾“å…¥ç»™ä½ çš„ä»»åŠ¡ã€‚")
.chatClient(chatClient)
.resolver(resolver)
.maxIterations(10)
.build();

reactAgent.invoke(Map.of("messages", new UserMessage(query)))
```

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®ï»¿é™…æ¡ˆä¾‹æ¥æ„Ÿå—åƒ Spring Aâ€‹I Alibaba Graph â€è¿™ç§æ¡†æ¶çš„ä½œç”¨ï¼Œæ¯”å¦‚ç¼–å†™ä¸€ä¸ªæ•°æ®ï»¿åˆ†æå’Œå¯è§†åŒ–æŠ¥å‘Šç”Ÿæˆä»»åŠ¡çš„å·¥ä½œæµâ€ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š

```java
public AIGraph<String, String> dataAnalysisWorkflow(
PlanningAgent planningAgent,
DataCollectionAgent dataCollectionAgent,
AnalysisAgent analysisAgent,
VisualizationAgent visualizationAgent,
ReportingAgent reportingAgent) {

return AIGraph.builder(String.class, String.class)
// ä»»åŠ¡è§„åˆ’èŠ‚ç‚¹
.addNode("planning", input -> planningAgent.run(input), Map.of(
"success", "data_collection"
))
// æ•°æ®æ”¶é›†èŠ‚ç‚¹
.addNode("data_collection", input -> dataCollectionAgent.run(input), Map.of(
"complete", "analysis",
"incomplete", "planning"
))
// æ•°æ®åˆ†æèŠ‚ç‚¹
.addNode("analysis", input -> analysisAgent.run(input), Map.of(
"success", "visualization",
"failure", "data_collection"
))
// æ•°æ®å¯è§†åŒ–èŠ‚ç‚¹
.addNode("visualization", input -> visualizationAgent.run(input), Map.of(
"success", "reporting"
))
// æŠ¥å‘Šç”ŸæˆèŠ‚ç‚¹
.addNode("reporting", input -> reportingAgent.run(input), Map.of())
.withStartAt("planning")
.build();
}
```

è¿™ä¸ªå·¥ä½œæµå±•ç°äº†æ•°æ®ï»¿åˆ†æçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼šä»è§„åˆ’æ™ºèƒ½ä½“åˆ¶å®šåˆ†â€‹æç­–ç•¥å¼€å§‹ï¼Œåˆ°æ•°æ®æ”¶é›†æ™ºèƒ½ä½“è·å–å¿…è¦æ•°â€æ®ï¼Œç„¶åæ˜¯åˆ†ææ™ºèƒ½ä½“å¤„ç†è¿™äº›æ•°æ®ï¼Œæ¥ç€ï»¿ç”±å¯è§†åŒ–æ™ºèƒ½ä½“åˆ›å»ºç›´è§‚å›¾è¡¨ï¼Œæœ€åç”±æŠ¥å‘Šâ€æ™ºèƒ½ä½“æ•´åˆæ‰€æœ‰å‘ç°ç”Ÿæˆå®Œæ•´æŠ¥å‘Šã€‚

* * *

é™¤äº†ä¸Šé¢è¿™äº›å·¥ä½œæµï»¿å¼€å‘æ¡†æ¶å¤–ï¼Œä¹‹å‰æˆ‘ä»¬è¿˜å­¦ä¹ è¿‡ä¸€ç§å¯è§†â€‹åŒ–çš„æ™ºèƒ½ä½“å·¥ä½œæµå¼€å‘æ–¹æ³• â€”â€” ä½¿ç”¨â€ AI å¤§æ¨¡å‹åº”ç”¨å¼€å‘å¹³å°åˆ›å»ºå·¥ä½œï»¿æµåº”ç”¨ã€‚ç›®å‰å¾ˆå¤šå…¬å¸éƒ½åœ¨ç”¨è¿™ç§æ–¹æ³•æ„å»ºâ€å¤æ‚çš„æ™ºèƒ½ä½“å·¥ä½œæµï¼Œç¡®å®å¾ˆæ–¹ä¾¿~

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/Vrkkn9bVoVFPrYUs.webp" alt="" width="100%" />


### OWL æ¡†æ¶

å‰é¢æåˆ°è¿‡ï»¿ AI æ™ºèƒ½ä½“ä¾èµ–â€‹å·¥å…·è°ƒç”¨èƒ½åŠ›æ¥æ‹“å±•â€èƒ½åŠ›è¾¹ç•Œï¼Œè¿™é‡Œå†ç»™ï»¿å¤§å®¶åˆ†äº«ä¸€ä¸ªå¾ˆå®ç”¨â€çš„å¼€æºé¡¹ç›® OWLã€‚

[OWL (Optimized Workforce Learning)](https://github.com/camel-ai/owl) æ˜¯ç”± CAMEL-AI å›¢é˜Ÿå¼€æºçš„ä¸€æ¬¾é¢å‘ **å¤šæ™ºèƒ½ä½“åä½œä¸çœŸå®ä¸–ç•Œä»»åŠ¡è‡ªåŠ¨åŒ–** çš„å‰æ²¿æ¡†æ¶ã€‚é€šè¿‡ OWLï¼ŒAI æ™ºèƒ½ä½“å¯ä»¥æ‰§è¡Œç»ˆç«¯å‘½ä»¤ã€è®¿é—®ç½‘ç»œèµ„æºã€è¿è¡Œå„ç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç ã€ä½¿ç”¨å„ç§å¼€å‘å·¥å…·ç­‰ç­‰ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/8wp3n7kYmAKEO4cO.webp" alt="" width="100%" />


å®ƒçš„ä¸»è¦ç‰¹ç‚¹ï¼š

*   å¤šæ™ºèƒ½ä½“åä½œï¼šOWL æ”¯æŒå¤šä¸ªæ™ºèƒ½ä½“ä¹‹é—´çš„åŠ¨æ€äº¤äº’ä¸åä½œï¼Œèƒ½å¤Ÿæ¨¡æ‹ŸçœŸå®å›¢é˜Ÿåä½œåœºæ™¯ï¼Œé€‚åˆè§£å†³éœ€è¦å¤šè§’è‰²ã€å¤šæŠ€èƒ½é…åˆçš„å¤æ‚ä»»åŠ¡ã€‚

*   ä¸°å¯Œçš„å·¥å…·é›†æˆï¼šå†…ç½®äº†æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€ä»£ç æ‰§è¡Œã€æ–‡æ¡£å¤„ç†ã€éŸ³è§†é¢‘åˆ†æã€æœç´¢å¼•æ“ç­‰å¤šç§å·¥å…·åŒ…ï¼Œæ”¯æŒå¤šæ¨¡æ€ä»»åŠ¡ï¼ˆå¦‚ç½‘é¡µæ“ä½œã€å›¾ç‰‡/è§†é¢‘/éŸ³é¢‘åˆ†æç­‰ï¼‰ã€‚

*   MCP åè®®æ”¯æŒï¼šé€šè¿‡ MCPï¼ŒOWL èƒ½å¤Ÿä¸å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºæ ‡å‡†åŒ–å¯¹æ¥ï¼Œæå¤§æ‰©å±•äº†æ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¹ç•Œã€‚

*   å¯å®šåˆ¶ä¸æ˜“ç”¨æ€§ï¼šç”¨æˆ·å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚çµæ´»é…ç½®å’Œç»„åˆæ‰€éœ€å·¥å…·ï¼Œä¼˜åŒ–æ€§èƒ½å’Œèµ„æºæ¶ˆè€—ã€‚

*   Web å¯è§†åŒ–ç•Œé¢ï¼šæä¾›åŸºäº Gradio çš„æœ¬åœ° Web UIï¼Œæ”¯æŒæ¨¡å‹é€‰æ‹©ã€ç¯å¢ƒå˜é‡ç®¡ç†ã€äº¤äº’å†å²æŸ¥çœ‹ç­‰åŠŸèƒ½ï¼Œæ–¹ä¾¿å¼€å‘å’Œè°ƒè¯•ã€‚


å…¶å® OWLï»¿ çš„æœ¬è´¨å°±æ˜¯åˆ©ç”¨ AI â€‹æ¥å¢å¼ºä¼ ç»Ÿçš„è‡ªåŠ¨åŒ–åŠå…¬åœºâ€æ™¯ï¼Œåƒè‡ªåŠ¨åŒ–æ•°æ®åˆ†æå’Œå¤„ï»¿ç†ã€è‡ªåŠ¨åŒ–ç½‘é¡µä¿¡æ¯æ£€ç´¢ï¼Œâ€éƒ½èƒ½å¤Ÿç”¨ OWL è½»æ¾å®Œæˆã€‚

ä¸‹å›¾æ˜¯å®˜æ–¹ï»¿ä»‹ç»çš„ Demoï¼ŒOâ€‹WL å¯ä»¥è‡ªåŠ¨æ‰“å¼€æˆ‘â€ä»¬çš„æµè§ˆå™¨è®¿é—®ç½‘é¡µï¼Œï»¿æ‰§è¡Œæ»šåŠ¨ã€ç‚¹å‡»ã€æ‰“å­—â€æ“ä½œï¼Œå¹¶ä¸”å®æ—¶æŠ“å–ç½‘é¡µä¿¡æ¯ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/Kh7sDt9F7j00Pbs0.webp" alt="ã€" width="100%" />


### A2A åè®®


#### ä»€ä¹ˆæ˜¯ A2A åè®®ï¼Ÿ

A2Aï¼ˆAgent to Agentï¼‰ä¹Ÿæ˜¯æœ€è¿‘å¾ˆçƒ­é—¨çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç®€å•æ¥è¯´ï¼Œ[A2A åè®®](https://google.github.io/A2A/) å°±æ˜¯ä¸º â€œæ™ºèƒ½ä½“ä¹‹é—´å¦‚ä½•ç›´æ¥äº¤æµå’Œåä½œâ€ åˆ¶å®šçš„ä¸€å¥—æ ‡å‡†ã€‚

A2A åè®®çš„æ ¸å¿ƒï¼Œæ˜¯è®©æ¯ï»¿ä¸ªæ™ºèƒ½ä½“éƒ½èƒ½åƒ â€œç½‘ç»œèŠ‚ç‚¹â€ ä¸€æ ·ï¼Œæ‹¥æœ‰è‡ªå·±çš„èº«ä»½â€‹ã€èƒ½åŠ›æè¿°å’Œé€šä¿¡æ¥å£ã€‚å®ƒä¸ä»…è§„å®šäº†æ¶ˆæ¯çš„æ ¼å¼å’Œä¼ é€’â€æ–¹å¼ï¼Œè¿˜åŒ…æ‹¬äº†èº«ä»½è®¤è¯ã€èƒ½åŠ›å‘ç°ã€ä»»åŠ¡å§”æ‰˜ã€ç»“æœå›ä¼ ï»¿ç­‰æœºåˆ¶ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ™ºèƒ½ä½“ä¹‹é—´å°±å¯ä»¥åƒäººç±»å›¢é˜Ÿä¸€æ ·â€ï¼Œäº’ç›¸æ‰“æ‹›å‘¼ã€è¯¢é—®å¯¹æ–¹èƒ½åšä»€ä¹ˆã€è¯·æ±‚ååŠ©ã€‚

å¯ä»¥æŠŠ A2A ç±»æ¯”ä¸ºæ™ºèƒ½ä½“ä¸–ï»¿ç•Œé‡Œçš„ HTTPåè®®ï¼ŒHTTP åè®®è®©å…¨çƒä¸åŒæœåŠ¡å™¨å’Œç”µè„‘ä¹‹â€‹é—´èƒ½å¤Ÿäº¤æ¢æ•°æ®ï¼ŒA2A åè®®åˆ™æ˜¯è®©ä¸åŒå‚å•†ã€ä¸åŒå¹³å°ã€ä¸åŒèƒ½â€åŠ›çš„æ™ºèƒ½ä½“èƒ½å¤Ÿåƒå›¢é˜Ÿæˆå‘˜ä¸€æ ·äº’ç›¸ç†è§£ã€åä½œå’Œåˆ†å·¥ã€‚å¦‚æœè¯´ Hï»¿TTP åè®®è®©äº’è”ç½‘æˆä¸ºäº†ä¸€ä¸ªå¼€æ”¾ã€äº’è”çš„ä¸–ç•Œï¼Œé‚£ä¹ˆ A2Aâ€ åè®®åˆ™è®©æ™ºèƒ½ä½“ä¸–ç•Œå˜å¾—å¼€æ”¾ã€åä½œå’Œé«˜æ•ˆã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/PcO9jKM6WidOL7vy.webp" alt="" width="100%" />



#### A2A åè®®çš„åº”ç”¨åœºæ™¯

A2A åè®®çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæ€»ç»“ä¸‹æ¥ 4 ä¸ªå­—å°±æ˜¯ **å¼€æ”¾äº’è”**ã€‚æ¯”å¦‚åœ¨è‡ªåŠ¨é©¾é©¶é¢†åŸŸï¼Œä¸åŒè½¦è¾†çš„æ™ºèƒ½ä½“å¯ä»¥å®æ—¶äº¤æ¢è·¯å†µä¿¡æ¯ï¼ŒååŒé¿éšœå’Œè§„åˆ’è·¯çº¿ï¼›åœ¨åˆ¶é€ è½¦é—´ï¼Œç”Ÿäº§çº¿ä¸Šçš„å„ç±»æœºå™¨äººæ™ºèƒ½ä½“å¯ä»¥æ ¹æ®ä»»åŠ¡åŠ¨æ€åˆ†å·¥ï¼Œäº’ç›¸è¡¥ä½ï¼›åœ¨é‡‘èé£æ§ã€æ™ºèƒ½å®¢æœç­‰åœºæ™¯ï¼Œä¸åŒçš„æ™ºèƒ½ä½“å¯ä»¥æ ¹æ®è‡ªèº«ä¸“é•¿åä½œå¤„ç†å¤æ‚ä¸šåŠ¡æµç¨‹ã€‚

æˆ‘ä»¬è¿˜å¯ä»¥å¤§èƒ†æƒ³è±¡ï»¿ï¼Œæœªæ¥å¼€å‘è€…å¯ä»¥åƒè°ƒç”¨äº‘æœåŠ¡ä¸€æ ·ï¼Œâ€‹æŒ‰éœ€ç§Ÿç”¨æˆ–ç»„åˆä¸åŒçš„æ™ºèƒ½ä½“æœåŠ¡ï¼Œç”šâ€è‡³å®ç°æ™ºèƒ½ä½“ä¹‹é—´çš„è‡ªåŠ¨äº¤æ˜“å’Œç»“ç®—ã€‚ï»¿ç›®å‰å…¶å®å°±æœ‰å¾ˆå¤šæ™ºèƒ½ä½“å¹³å°ï¼Œåªä¸è¿‡â€æ™ºèƒ½ä½“ä¹‹é—´çš„è¿æ¥åä½œç”šå°‘ã€‚

#### å’Œ MCP åè®®çš„åŒºåˆ«

è™½ç„¶ A2ï»¿A å’Œ MCP éƒ½â€‹ç®—æ˜¯åè®®ï¼ˆæˆ–è€…æ ‡å‡†â€ï¼‰ï¼Œä½†äºŒè€…å­˜åœ¨æœ¬è´¨ä¸Šï»¿çš„åŒºåˆ«ã€‚

MCP åè®®æ˜¯ **æ™ºèƒ½ä½“å’Œå¤–éƒ¨å·¥å…·ä¹‹é—´çš„æ ‡å‡†**ï¼Œå®ƒè§„å®šäº†æ™ºèƒ½ä½“å¦‚ä½•å®‰å…¨ã€è§„èŒƒåœ°è°ƒç”¨å¤–éƒ¨çš„æ•°æ®åº“ã€æœç´¢å¼•æ“ã€ä»£ç æ‰§è¡Œç­‰å·¥å…·èµ„æºã€‚ä½ å¯ä»¥æŠŠ MCP ç†è§£ä¸º â€œæ™ºèƒ½ä½“-å·¥å…·â€ çš„ HTTP åè®®ã€‚

è€Œ A2A åè®®åˆ™æ˜¯ **æ™ºèƒ½ä½“ä¹‹é—´çš„é€šä¿¡åè®®**ã€‚å®ƒæ›´åƒæ˜¯è®©ä¸åŒçš„ AI è§’è‰²ä¹‹é—´å¯ä»¥ç›´æ¥å¯¹è¯ã€åä½œå’Œåˆ†å·¥ã€‚

ä»å®‰å…¨è§’åº¦ï»¿çœ‹ï¼ŒMCP å’Œ Aâ€‹2A å¤„ç†çš„æ˜¯ä¸åŒâ€å±‚é¢çš„å®‰å…¨é—®é¢˜ï¼š

*   MCP çš„å®‰å…¨å…³æ³¨ç‚¹ï¼šä¸»è¦é›†ä¸­åœ¨å•ä¸ªæ™ºèƒ½ä½“ä¸å·¥å…·ä¹‹é—´çš„å®‰å…¨äº¤äº’ï¼Œä¸»è¦é˜²èŒƒçš„æ˜¯å·¥å…·æ»¥ç”¨å’Œæç¤ºè¯æ³¨å…¥æ”»å‡»ã€‚

*   A2A çš„å®‰å…¨å…³æ³¨ç‚¹ï¼šæ›´å…³æ³¨æ™ºèƒ½ä½“ç½‘ç»œä¸­çš„èº«ä»½è®¤è¯ã€æˆæƒå’Œä¿¡ä»»é“¾ã€‚A2A éœ€è¦è§£å†³â€œæˆ‘æ€ä¹ˆçŸ¥é“æˆ‘åœ¨å’Œè°é€šä¿¡â€ã€â€œè¿™ä¸ªæ™ºèƒ½ä½“æœ‰æƒé™è¯·æ±‚è¿™é¡¹ä»»åŠ¡å—â€ã€â€œå¦‚ä½•é˜²æ­¢æ¶æ„æ™ºèƒ½ä½“çªƒå–æˆ–ç¯¡æ”¹ä»»åŠ¡æ•°æ®â€ ç­‰é—®é¢˜ã€‚ï¼ˆè¿™äº›é—®é¢˜ä¹Ÿæ˜¯ HTTP åè®®éœ€è¦è€ƒè™‘çš„ï¼‰


æ˜¾ç„¶ï¼ŒA2ï»¿A é¢ä¸´çš„å®‰å…¨æŒ‘æˆ˜â€‹æ›´åŠ å¤æ‚ï¼Œå› ä¸ºå®ƒå¤„â€ç†çš„æ˜¯è·¨ç½‘ç»œã€è·¨å¹³ï»¿å°ã€å¤šæ–¹åä½œçš„åœºæ™¯â€ã€‚

å¯¹äºä¸€ä¸ªæˆç†Ÿçš„ï»¿æ™ºèƒ½ä½“ç³»ç»Ÿï¼Œå¯èƒ½ä¼šåŒæ—¶è¿ç”¨â€‹ MCP å’Œ A2Aï¼ŒMCâ€P è´Ÿè´£æŸä¸ªæ™ºèƒ½ä½“å†…éƒ¨è°ƒç”¨ï»¿å·¥å…·å®Œæˆä»»åŠ¡ï¼ŒA2A è´Ÿè´£â€æ™ºèƒ½ä½“ä¹‹é—´ååŒå®Œæˆä»»åŠ¡ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/7t0N8BatRyAI6x6q.webp" alt="" width="100%" />


ç›®å‰ A2A åè®®çš„è½åœ°å¹¶ä¸æˆç†Ÿï¼Œæš‚æ—¶å¤§å®¶ä¹Ÿä¸å¿…å…³æ³¨å¦‚ä½•è¿›è¡Œ A2A çš„å¼€å‘ï¼Œäº†è§£å®ƒæ˜¯ä»€ä¹ˆã€æœ‰ä»€ä¹ˆç”¨å°±è¶³å¤Ÿäº†ã€‚æ„Ÿå…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥é˜…è¯» [è¿™ç¯‡æ–‡ç« ](https://mp.weixin.qq.com/s/XbrsS2SatIV-6hXc5yj_Wg) æ¥äº†è§£ A2A åè®®çš„å®ç°ç»†èŠ‚å’Œäº¤äº’æµç¨‹ã€‚

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/jb0lISDWXcprdx2x.webp" alt="" width="100%" />


æ‰©å±•æ€è·¯
----

1ï¼‰ç»™æ™ºèƒ½ï»¿ä½“æ·»åŠ å¾ªç¯æ£€æµ‹å’Œå¤„â€‹ç†æœºåˆ¶ï¼Œé˜²æ­¢æ™ºèƒ½ä½“â€é™·å…¥æ— é™å¾ªç¯ã€‚

å¯ä»¥å‚è€ƒ OpenManus æºç å®ç°ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```java
private int duplicateThreshold = 2;

/**  
 * å¤„ç†é™·å…¥å¾ªç¯çš„çŠ¶æ€  
 */
protected void handleStuckState() {
String stuckPrompt = "è§‚å¯Ÿåˆ°é‡å¤å“åº”ã€‚è€ƒè™‘æ–°ç­–ç•¥ï¼Œé¿å…é‡å¤å·²å°è¯•è¿‡çš„æ— æ•ˆè·¯å¾„ã€‚";
this.nextStepPrompt = stuckPrompt + "\n" + (this.nextStepPrompt != null ? this.nextStepPrompt : "");
System.out.println("Agent detected stuck state. Added prompt: " + stuckPrompt);
}

/**  
 * æ£€æŸ¥ä»£ç†æ˜¯å¦é™·å…¥å¾ªç¯  
 *  
 * @return æ˜¯å¦é™·å…¥å¾ªç¯  
 */
protected boolean isStuck() {
List<Message> messages = this.memory.getMessages();
if (messages.size() < 2) {
return false;
}

Message lastMessage = messages.get(messages.size() - 1);
if (lastMessage.getContent() == null || lastMessage.getContent().isEmpty()) {
return false;
}

// è®¡ç®—é‡å¤å†…å®¹å‡ºç°æ¬¡æ•°
int duplicateCount = 0;
for (int i = messages.size() - 2; i >= 0; i--) {
Message msg = messages.get(i);
if (msg.getRole() == Role.ASSISTANT &&
lastMessage.getContent().equals(msg.getContent())) {
duplicateCount++;
}
}

return duplicateCount >= this.duplicateThreshold;
}

// æ¯ä¸€æ­¥ step æ‰§è¡Œå®Œéƒ½è¦æ£€æŸ¥æ˜¯å¦é™·å…¥å¾ªç¯  
if (isStuck()) {
handleStuckState();
}
```

2ï¼‰æ™ºèƒ½ä½“ï»¿æ”¯æŒäº¤äº’å¼æ‰§è¡Œï¼Œå¯â€‹ä»¥å‘ç”¨æˆ·è¯¢é—®ä¿¡æ¯æˆ–â€è·å–åé¦ˆï¼Œä»è€Œä¼˜åŒ–ï»¿ä»»åŠ¡çš„å®Œæˆæ•ˆæœã€‚

å®ç°æ€è·¯å¯ä»¥ï»¿å‚è€ƒ OpenManuâ€‹sï¼Œä¸“é—¨å®šä¹‰ä¸€ä¸ª Asâ€kHuman å·¥å…·ï¼Œè®©ï»¿ AI è‡ªä¸»å†³å®šä»€ä¹ˆæ—¶â€å€™éœ€è¦å¯»æ±‚äººç±»å¸®åŠ©ï¼š

<img src="https://pic.code-nav.cn/course_picture/1608440217629360130/tJHzvM9pmfVQhmsC.webp" alt="" width="100%" />


å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ç¼–å†™ Prompt å®ç°ï¼Œæ¯”å¦‚ Prompt ä¸­æåˆ° â€œå¦‚æœä½ è®¤ä¸ºéœ€è¦å‘äººç±»å¯»æ±‚å¸®åŠ©ï¼Œè¾“å‡ºç»“æœä¸­éœ€è¦åŒ…å« [ASK_USER]{å¯»æ±‚å¸®åŠ©çš„å…·ä½“é—®é¢˜}â€ï¼Œå¹¶ä¸”æ£€æŸ¥æ¯ä¸€æ¡ AI ç»™å‡ºçš„æ¶ˆæ¯ï¼Œå¦‚æœåŒ…å«äº† ASK_USER æ ‡è®°ï¼Œå°±é€šè¿‡ç³»ç»Ÿæ§åˆ¶å°å’Œç”¨æˆ·äº¤äº’ã€‚

ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```java
public boolean think() {
boolean shouldAct = super.think();

// è·å–æœ€æ–°çš„åŠ©æ‰‹æ¶ˆæ¯
Message lastMessage = getMessageList().get(getMessageList().size() - 1);
if (lastMessage instanceof AssistantMessage) {
String content = lastMessage.getContent();

// æ£€æŸ¥æ˜¯å¦åŒ…å«å‘ç”¨æˆ·è¯¢é—®çš„æ ‡è®°
if (content.contains("[ASK_USER]")) {
// æå–é—®é¢˜
String question = content.substring(content.indexOf("[ASK_USER]") + 10);

// å‘ç”¨æˆ·è¾“å‡ºé—®é¢˜
System.out.println("æ™ºèƒ½ä½“éœ€è¦ä½ çš„å¸®åŠ©: " + question);

// è·å–ç”¨æˆ·è¾“å…¥
Scanner scanner = new Scanner(System.in);
String userAnswer = scanner.nextLine();

// æ·»åŠ ç”¨æˆ·å›ç­”åˆ°æ¶ˆæ¯åˆ—è¡¨
UserMessage userResponse = new UserMessage("ç”¨æˆ·å›ç­”: " + userAnswer);
getMessageList().add(userResponse);

// éœ€è¦ç»§ç»­æ€è€ƒ
return true;
}
}

return shouldAct;
}
```

3ï¼‰å¼€å‘æ”¯æŒ MCP åè®®çš„è¶…çº§æ™ºèƒ½ä½“

æ€è·¯ï¼šå…¶å®åˆ©ï»¿ç”¨ Spring AIï¼Œâ€‹åªéœ€è¦æŠŠ MCP æœåŠ¡ä¸­â€çš„å·¥å…·æå–å‡ºæ¥å˜æˆå·¥å…·åˆ—ï»¿è¡¨ï¼Œå°±å¯ä»¥å¤ç”¨å·²æœ‰çš„ Tâ€oolCallAgent äº†

4ï¼‰è‡ªè¡Œå¼€ï»¿å‘ä¸€ä¸ªç‰¹å®šé¢†åŸŸçš„è¶…â€‹çº§æ™ºèƒ½ä½“ï¼Œå¯ä»¥ç›´æ¥â€ç»§æ‰¿ ToolCaï»¿llAgent å®â€ç°

5ï¼‰å‚è€ƒ OpenManus çš„æºç ï¼Œå®ç°æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ â€œè§„åˆ’å¹¶æ‰§è¡Œâ€ æ¨¡å¼çš„æ™ºèƒ½ä½“å·¥ä½œæµï¼ˆå‚è€ƒ `flow/planning.py`ï¼‰

æœ¬èŠ‚ä½œä¸š
----

1ï¼‰å®Œæˆ AI è¶…çº§æ™ºèƒ½ä½“çš„å¼€å‘

2ï¼‰ç†è§£ ï»¿AI è¶…çº§æ™ºèƒ½ä½“çš„â€‹å®ç°åŸç†å’Œæ¶æ„è®¾è®¡â€ï¼Œè¦æ±‚èƒ½å¤Ÿå£è¿°è®²æ¸…ï»¿æ¥š

3ï¼‰å°è¯•è‡ªï»¿ä¸»é˜…è¯» OpenMaâ€‹nus çš„æºç ï¼Œæ€è€ƒâ€å¦‚ä½•è¿›ä¸€æ­¥ä¼˜åŒ–æˆ‘ä»¬çš„ï»¿ç¨‹åºï¼Œå»ºè®®å¤šåˆ©ç”¨ Aâ€I å·¥å…·è¾…åŠ©å­¦ä¹ ç†è§£6:["$","$L29",null,{"value":"$2a"}]
